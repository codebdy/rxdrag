{"version":3,"sources":["webpack:///core.js","webpack:///webpack/bootstrap 1690dc0d4c2d9d8cc7e1","webpack:///./src/core/node.js","webpack:///./src/basic/object-state.js","webpack:///./src/core/rxeditor-command-proxy.js","webpack:///./src/core/nodes/rxnode.js","webpack:///./src/core/nodes/text-node.js","webpack:///./src/core/rules/common-rule.js","webpack:///./src/core.js","webpack:///./src/shell/init-editor.js","webpack:///./src/core/rxeditor.js","webpack:///./src/core/canvas.js","webpack:///./src/core/node-view.js","webpack:///./src/core/node-state.js","webpack:///./src/core/canvas-state.js","webpack:///./src/core/commands.js","webpack:///./src/core/node-label.js","webpack:///./src/core/node-toolbar.js","webpack:///./src/core/rx-cursor.js","webpack:///./src/core/mouse-follower.js","webpack:///./src/core/mini-editbar.js","webpack:///./src/core/node-parser.js","webpack:///./src/core/nodes/class-node.js","webpack:///./src/core/nodes/char-node.js","webpack:///./src/core/nodes/tag-node.js","webpack:///./src/core/rules/index.js","webpack:///./src/core/rules/container.js","webpack:///./src/core/rules/row.js","webpack:///./src/core/rules/col.js","webpack:///./src/core/rules/heading.js","webpack:///./src/basic/rxcomponent.js","webpack:///./src/basic/rxarray.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","206","__webpack_exports__","_classCallCheck","instance","Constructor","TypeError","Node","__WEBPACK_IMPORTED_MODULE_0__node_view__","__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__","__WEBPACK_IMPORTED_MODULE_2__node_state__","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","this","seedId","children","view","NodeView","meta","tag","classList","styles","attributes","defaultMeta","initStates","mouseFollower","offsetX","offsetY","begindrag","event","stopPropagation","state","onBegindrag","begindragLabel","$dom","begindragIcon","clientWidth","mousemove","onMousemove","rxEditor","canvasMouseMove","mouseover","onMouseover","mouseout","onMouseout","onclick","onClick","duplicate","changeToState","commandManager","render","up","parent","delete","deleteNode","stateChanged","oldState","newState","leave","enter","nodeStateChanged","idSeed","id","normalState","NormalState","activeState","ActiveState","focusState","FocusState","dragoverState","DragoverState","draggedState","DraggedState","disableState","DisableState","editState","EditState","previewState","PreviewState","concat","assign","stateName","refreshState","toViewModel","getParentViewDomElement","forEach","child","parentDomElement","dom","renderHtml","toHtmlModel","appendChild","clearDraggedoverStates","clearActiveStates","clearFocusAndEditStates","allToNormalState","draggedToFoused","first","after","before","targetParent","removeFromParent","unshiftChild","last","pushChild","brother","insertBefore","insertAfter","remove","unshift","add","copy","make","rule","JSON","parse","stringify","ruleName","clone","acceptedChildren","containsInAccepted","containsInExcept","childRuleName","rejectChildren","model","stateModel","on","onmousemove","onmouseover","onmouseout","label","getStateName","childView","toTreeViewNode","push","node","changeNode","nodeChanged","focusNode","clearCharNodes","getNodeById","preview","233","ObjectState","__WEBPACK_IMPORTED_MODULE_0__rxarray__","envetHandlers","attribute","callbackFunction","contains","console","assert","distributeEventWithoutGlobal","handlers","handler","234","RXEditorCommandProxy","pageId","window","addEventListener","data","handleMessage","sendMessage","optionsSchema","htmlCode","unFocusNode","document","screenX","screenY","canUndo","canRedo","commandSchema","innerHTML","json","message","loadedData","serveForRXEditor","assembleWithTheme","theme","toolbox","treeViewNodes","dragFromToolbox","item","endDragFromToolbox","rxNameId","changeCanvasState","undo","redo","clearCanvas","changeTheme","focusNodeFromShell","duplicateNodeFromShell","removeNodeFromShell","requestHtmlCode","loadHtml","html","setInlineFile","file","canvasHeight","body","scrollHeight","postMessage","235","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","RXNode","__WEBPACK_IMPORTED_MODULE_0__node__","__WEBPACK_IMPORTED_MODULE_1__text_node__","_get","receiver","Function","desc","getOwnPropertyDescriptor","undefined","getPrototypeOf","labelToCapitalize","replace","toUpperCase","baseMetaToModel","apply","setField","className","attrName","isTextNode","charNodes","isCharState","textNode","isCharNode","prev","previousSbiling","TextNode","text","char","changeCharNodeToTextNode","236","__WEBPACK_IMPORTED_MODULE_0__char_node__","parentDom","createTextNode","nodes","CharNode","237","dropInMargin","editable","editMarginStyle","paddingX","paddingY","empertyMargin","346","creatEditorCore","initEditor","347","RXEditor","348","getDefaultLang","lang","navigator","language","userLanguage","substr","getLocal","local","zhLocal","enLocal","__WEBPACK_IMPORTED_MODULE_0__canvas__","__WEBPACK_IMPORTED_MODULE_1__canvas_state__","__WEBPACK_IMPORTED_MODULE_2__basic_rxarray__","__WEBPACK_IMPORTED_MODULE_3__commands__","__WEBPACK_IMPORTED_MODULE_4__node_label__","__WEBPACK_IMPORTED_MODULE_5__node_toolbar__","__WEBPACK_IMPORTED_MODULE_6__rx_cursor__","__WEBPACK_IMPORTED_MODULE_7__mouse_follower__","__WEBPACK_IMPORTED_MODULE_8__mini_editbar__","__WEBPACK_IMPORTED_MODULE_9__rxeditor_command_proxy__","__WEBPACK_IMPORTED_MODULE_10__node_parser__","$t","CanvasState","CommadManager","onCommandsChanged","parentId","canvas","oldParentId","commandProxy","commandExcuted","optionClasses","activedLabel","NodeLabel","focusedLabel","cssClass","domOn","focusedNode","toolbar","NodeToolbar","cursor","RxCursor","MouseFollower","miniEditbar","MiniEditbar","nodeParser","NodeParser","workspace","getElementById","Canvas","rxeditorReady","dropElement","watch","tongleOnCondition","showOutline","refreshPosition","movingCommand","draggedNode","parseNode","startNew","beginFollowMouse","responsive","screenWidth","code","doDrop","finishMoving","endFollowMouse","position","command","adoptFromToolbox","moveInTop","finish","moveIn","moveBefore","moveAfter","isActived","followMouse","takeOverDraggingByWorkspace","active","hide","getNodeHtml","div","createElement","showMarginX","showMarginY","showLabel","generateHTML","loadNodeHtml","loadCanvasHtml","codeId","element","fileType","style","type","rel","getElementsByTagName","script","349","parentViewDomElement","padding","width","rootDiv","jsonArray","toJson","viewNodes","350","parentDoment","oldDom","doRender","replaceChild","previewDom","renderStylesAndClasses","showAttributes","domElement","bindEvents","styleName","attributeName","setAttribute","eventName","removeChild","351","NodeState","addtionToModel","for","draggable","judgeCharNodePostion","margin","srcElement","clientHeight","ratioY","ratioX","canAccept","inTop","inLeft","CanDropState","doDragover","judgePosition","show","changeTextnodeToCharNode","preventDefault","startMove","contenteditable","startEditText","finishEditText","352","__WEBPACK_IMPORTED_MODULE_0__basic_object_state__","__screenWidth","__preview","__showMarginX","__showMarginY","__showOutline","__showLabel","distributeEvent","353","CommandMovable","oldParent","oldnNextSbiling","nextSbiling","storeNewInfo","newParent","newNextSbiling","makeExcuteSchema","makeUndoSchema","CommandNew","_CommandMovable","nextSblilingId","nodeId","CommandMove","_CommandMovable2","CommandDelete","CommandClone","CommandChangeNode","newMeta","oldMeta","CommandTextEdit","oldChildren","chilid","newChildren","CommandLoadCanvasHtml","newHtml","CommandClearCanvas","CommandLoadNodeHtml","newNode","undoCommands","redoCommands","cmd","startCommand","excute","finished","newNodeData","textCommand","submitChanged","pop","354","__WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__","domAttr","followElement","offset","rect","getBoundingClientRect","left","x","y","top","height","RXComponent","355","SvgButton","title","svg","callback","_RXComponent","svgArrowUp","svgMove","svgEdit","svgClone","svgRemove","duplicateBtn","editButton","el","sel","getSelection","childNodes","collapse","focus","356","classClasses","inRight","inBottom","outTop","outRight","outBottom","outLeft","charLeft","charRight","right","bottom","357","clientX","clientY","358","__WEBPACK_IMPORTED_MODULE_1__basic_object_state__","EditorState","__bold","__italic","__underline","__strikeThrough","__isLink","_ObjectState","set","bold","italic","underline","strikeThrough","isLink","BarButton","toString","selection","rangeCount","getRangeAt","startContainer","parentNode","tagName","endContainer","boldBtn","execCommand","updateButtonsState","setInnerHTML","italicBtn","underlineBtn","strikeBtn","linkBtn","onpaste","plainText","clipboardData","getData","keyCode","watchOne","btn","removeCssClass","removeEventListener","isShow","queryCommandState","359","__WEBPACK_IMPORTED_MODULE_0__nodes_class_node_js__","__WEBPACK_IMPORTED_MODULE_1__nodes_tag_node_js__","__WEBPACK_IMPORTED_MODULE_2__nodes_text_node_js__","__WEBPACK_IMPORTED_MODULE_3__rules__","__WEBPACK_IMPORTED_MODULE_4__rules_common_rule__","paraseNode","nodeType","textContent","ClassNode","clssNode","parseClassNode","parseTagNode","copyClassList","childNode","parseAttributes","markDefaultMeta","attrs","attrValue","toLowerCase","rules","classRules","classes","setLabel","elTag","tagRules","tags","TagNode","commonRule","from","to","indexOf","360","__WEBPACK_IMPORTED_MODULE_0__rxnode_js__","361","__WEBPACK_IMPORTED_MODULE_0__node_js__","362","363","container","row","col","heading","364","365","acceptChildren","366","367","42","elementName","domOns","parentElement","destory","RXArray","display","refence","5","array","splice","condition"],"mappings":"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","file":"core.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 346);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 206:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Node; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__node_view__ = __webpack_require__(350);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__basic_rxarray__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__node_state__ = __webpack_require__(351);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\nfunction insterAfterDom(newElement, targetElement) {\n  var parent = targetElement.parentNode;\n  if (parent.lastChild == targetElement) {\n    parent.appendChild(newElement);\n  } else {\n    parent.insertBefore(newElement, targetElement.nextSibling);\n  }\n}\n\nvar Node = function () {\n  function Node() {\n    var _this = this;\n\n    _classCallCheck(this, Node);\n\n    this.seedId();\n    //this.mouseFollowerWidth =  '200px'\n    this.children = [];\n    this.view = new __WEBPACK_IMPORTED_MODULE_0__node_view__[\"a\" /* NodeView */]();\n\n    //\n    this.meta = {\n      tag: 'div',\n      classList: [],\n      styles: {},\n      attributes: {}\n    };\n\n    this.defaultMeta = {\n      tag: 'div',\n      classList: [],\n      styles: {},\n      attributes: {}\n    };\n\n    this.initStates();\n\n    this.mouseFollower = {\n      offsetX: 10,\n      offsetY: 0\n    };\n\n    this.begindrag = function (event) {\n      event.stopPropagation();\n      _this.state.onBegindrag(event);\n    };\n\n    this.begindragLabel = function (event) {\n      if (_this.view.$dom) {\n        _this.mouseFollower.offsetX = event.offsetX;\n        _this.mouseFollower.offsetY = -18 + event.offsetY;\n      }\n      _this.begindrag(event);\n    };\n\n    this.begindragIcon = function (event) {\n      if (_this.view.$dom) {\n        _this.mouseFollower.offsetX = _this.view.$dom.clientWidth - 96 + event.offsetX;\n        _this.mouseFollower.offsetY = -24 + event.offsetY;\n      }\n      _this.begindrag(event);\n    };\n\n    this.mousemove = function (event) {\n      event.stopPropagation();\n      _this.state.onMousemove(event);\n      rxEditor.canvasMouseMove(event);\n    };\n    this.mouseover = function (event) {\n      event.stopPropagation();\n      _this.state.onMouseover(event);\n    };\n    this.mouseout = function (event) {\n      event.stopPropagation();\n      _this.state.onMouseout(event);\n    };\n\n    this.onclick = function (event) {\n      event.stopPropagation();\n      _this.state.onClick(event);\n    };\n\n    this.duplicate = function () {\n      _this.changeToState('normalState');\n      rxEditor.commandManager.duplicate(_this);\n      rxEditor.render();\n    };\n\n    this.up = function (event) {\n      if (_this.parent) {\n        _this.changeToState('normalState');\n        _this.parent.changeToState('focusState');\n        event.stopPropagation();\n      }\n    };\n\n    this.delete = function () {\n      //if(confirm(\"Are you sure to delete?\")){\n      _this.changeToState('normalState');\n      rxEditor.commandManager.deleteNode(_this);\n      rxEditor.render();\n      //}\n    };\n\n    this.stateChanged = function (oldState, newState) {\n      oldState.leave();\n      newState.enter();\n      rxEditor.nodeStateChanged(_this, oldState, newState);\n    };\n  }\n\n  _createClass(Node, [{\n    key: \"seedId\",\n    value: function seedId() {\n      if (!Node.idSeed) Node.idSeed = 1;\n      Node.idSeed++;\n      this.id = Node.idSeed;\n    }\n  }, {\n    key: \"initStates\",\n    value: function initStates() {\n      this.normalState = new __WEBPACK_IMPORTED_MODULE_2__node_state__[\"g\" /* NormalState */](this);\n      this.activeState = new __WEBPACK_IMPORTED_MODULE_2__node_state__[\"a\" /* ActiveState */](this);\n      this.focusState = new __WEBPACK_IMPORTED_MODULE_2__node_state__[\"f\" /* FocusState */](this);\n      this.dragoverState = new __WEBPACK_IMPORTED_MODULE_2__node_state__[\"d\" /* DragoverState */](this);\n      this.draggedState = new __WEBPACK_IMPORTED_MODULE_2__node_state__[\"c\" /* DraggedState */](this);\n      this.disableState = new __WEBPACK_IMPORTED_MODULE_2__node_state__[\"b\" /* DisableState */](this);\n      this.editState = new __WEBPACK_IMPORTED_MODULE_2__node_state__[\"e\" /* EditState */](this);\n      this.previewState = new __WEBPACK_IMPORTED_MODULE_2__node_state__[\"h\" /* PreviewState */](this);\n      this.state = this.normalState;\n    }\n  }, {\n    key: \"markDefaultMeta\",\n    value: function markDefaultMeta() {\n      this.defaultMeta.tag = this.meta.tag;\n      this.defaultMeta.classList = this.meta.classList.concat();\n      this.defaultMeta.attributes = Object.assign({}, this.meta.attributes);\n      this.defaultMeta.styles = Object.assign({}, this.meta.styles);\n    }\n  }, {\n    key: \"changeToState\",\n    value: function changeToState(stateName) {\n      if (this.state === this[stateName]) return;\n      var oldState = this.state;\n      this.state = this[stateName];\n      this.refreshState();\n      this.stateChanged(oldState, this[stateName]);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.view.render(this.toViewModel(), this.getParentViewDomElement());\n      this.children.forEach(function (child) {\n        child.render();\n      });\n    }\n  }, {\n    key: \"renderHtml\",\n    value: function renderHtml(parentDomElement) {\n      var dom = this.view.renderHtml(this.toHtmlModel(), parentDomElement);\n      this.children.forEach(function (child) {\n        child.renderHtml(dom);\n      });\n\n      parentDomElement.appendChild(dom);\n      return dom;\n    }\n  }, {\n    key: \"refreshState\",\n    value: function refreshState() {\n      this.view.refreshState(this.toViewModel());\n      this.children.forEach(function (child) {\n        child.refreshState();\n      });\n    }\n  }, {\n    key: \"clearDraggedoverStates\",\n    value: function clearDraggedoverStates() {\n      if (this.state === this.dragoverState) {\n        this.changeToState('normalState');\n      }\n      this.children.forEach(function (child) {\n        child.clearDraggedoverStates();\n      });\n    }\n  }, {\n    key: \"clearActiveStates\",\n    value: function clearActiveStates() {\n      if (this.state === this.activeState) {\n        this.changeToState('normalState');\n      }\n      this.children.forEach(function (child) {\n        child.clearActiveStates();\n      });\n    }\n  }, {\n    key: \"clearFocusAndEditStates\",\n    value: function clearFocusAndEditStates() {\n      if (this.state === this.focusState || this.state === this.editState) {\n        this.changeToState('normalState');\n      }\n      this.children.forEach(function (child) {\n        child.clearFocusAndEditStates();\n      });\n    }\n  }, {\n    key: \"allToNormalState\",\n    value: function allToNormalState() {\n      this.changeToState('normalState');\n      this.children.forEach(function (child) {\n        child.allToNormalState();\n      });\n    }\n  }, {\n    key: \"draggedToFoused\",\n    value: function draggedToFoused() {\n      if (this.state === this.draggedState) {\n        this.changeToState('focusState');\n      }\n      this.children.forEach(function (child) {\n        child.draggedToFoused();\n      });\n    }\n  }, {\n    key: \"getParentViewDomElement\",\n    value: function getParentViewDomElement() {\n      return this.parent.view.$dom;\n    }\n  }, {\n    key: \"firstChild\",\n    value: function firstChild() {\n      return Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"e\" /* first */])(this.children);\n    }\n  }, {\n    key: \"nextSbiling\",\n    value: function nextSbiling() {\n      if (this.parent) {\n        return Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"b\" /* after */])(this, this.parent.children);\n      }\n    }\n  }, {\n    key: \"previousSbiling\",\n    value: function previousSbiling() {\n      if (this.parent) {\n        return Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"c\" /* before */])(this, this.parent.children);\n      }\n    }\n  }, {\n    key: \"moveInTop\",\n    value: function moveInTop(targetParent) {\n      if (Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"e\" /* first */])(targetParent.children) !== this) {\n        this.removeFromParent();\n        targetParent.unshiftChild(this);\n        targetParent.render();\n      }\n    }\n  }, {\n    key: \"moveIn\",\n    value: function moveIn(targetParent) {\n      if (Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"h\" /* last */])(targetParent.children) !== this) {\n        this.removeFromParent();\n        targetParent.pushChild(this);\n        targetParent.render();\n      }\n    }\n  }, {\n    key: \"moveBefore\",\n    value: function moveBefore(brother) {\n      if (Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"c\" /* before */])(brother, this.children) !== this) {\n        this.removeFromParent();\n        this.parent = brother.parent;\n        Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"g\" /* insertBefore */])(this, brother, brother.parent.children);\n        this.parent.render();\n      }\n    }\n  }, {\n    key: \"moveAfter\",\n    value: function moveAfter(brother) {\n      if (Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"b\" /* after */])(brother, this.children) !== this) {\n        this.removeFromParent();\n        this.parent = brother.parent;\n        Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"f\" /* insertAfter */])(this, brother, brother.parent.children);\n        this.parent.render();\n      }\n    }\n  }, {\n    key: \"removeFromParent\",\n    value: function removeFromParent() {\n      if (this.parent) {\n        Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"i\" /* remove */])(this, this.parent.children);\n        this.parent.render();\n      }\n    }\n  }, {\n    key: \"unshiftChild\",\n    value: function unshiftChild(child) {\n      child.parent = this;\n      this.children.unshift(child);\n      return this;\n    }\n  }, {\n    key: \"pushChild\",\n    value: function pushChild(child) {\n      child.parent = this;\n      Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"a\" /* add */])(child, this.children);\n      return this;\n    }\n  }, {\n    key: \"insertAfterSelf\",\n    value: function insertAfterSelf(brother) {\n      brother.parent = this.parent;\n      Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"f\" /* insertAfter */])(brother, this, this.parent.children);\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      var copy = this.make();\n      // /console.log(copy)\n      copy.rule = JSON.parse(JSON.stringify(this.rule));\n      copy.ruleName = this.ruleName;\n      this.children.forEach(function (child) {\n        copy.pushChild(child.clone());\n      });\n      return copy;\n    }\n  }, {\n    key: \"canAccept\",\n    value: function canAccept(child) {\n      var acceptedChildren = this.rule ? this.rule.acceptedChildren : '';\n      if (acceptedChildren && acceptedChildren.length == 0) {\n        return false;\n      }\n\n      if (acceptedChildren && !this.containsInAccepted(child)) {\n        return false;\n      }\n\n      if (!acceptedChildren && this.containsInExcept(child)) {\n        return false;\n      }\n      return true;\n    }\n  }, {\n    key: \"containsInAccepted\",\n    value: function containsInAccepted(child) {\n      var childRuleName = child.ruleName;\n      var acceptedChildren = this.rule ? this.rule.acceptedChildren : '';\n      for (var i = 0; i < acceptedChildren.length; i++) {\n        if (acceptedChildren[i] === childRuleName) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"containsInExcept\",\n    value: function containsInExcept(child) {\n      var childRuleName = child.ruleName;\n      var rejectChildren = this.rule ? this.rule.rejectChildren : '';\n      if (rejectChildren) {\n        for (var i = 0; i < rejectChildren.length; i++) {\n          if (rejectChildren[i] === childRuleName) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"toViewModel\",\n    value: function toViewModel() {\n      var model = this.state.stateModel();\n\n      model.on = {\n        onmousemove: this.mousemove,\n        onmouseover: this.mouseover,\n        onmouseout: this.mouseout,\n        //onmouseup:this.mouseup,\n        onclick: this.onclick\n      };\n\n      return model;\n    }\n  }, {\n    key: \"toHtmlModel\",\n    value: function toHtmlModel() {\n      return {\n        styles: {},\n        classList: [], //new RXArray,\n        attributes: {}\n      };\n    }\n  }, {\n    key: \"toTreeViewNode\",\n    value: function toTreeViewNode() {\n      var view = {\n        label: this.label,\n        tag: this.meta.tag,\n        id: this.id,\n        state: this.getStateName(),\n        children: []\n      };\n\n      this.children.forEach(function (child) {\n        var childView = child.toTreeViewNode();\n        if (childView) {\n          view.children.push(childView);\n        }\n      });\n\n      return view;\n    }\n  }, {\n    key: \"getStateName\",\n    value: function getStateName() {\n      if (this.state === this.normalState) {\n        return 'normalState';\n      }\n      if (this.state === this.activeState) {\n        return 'activeState';\n      }\n      if (this.state === this.focusState) {\n        return 'focusState';\n      }\n      if (this.state === this.dragoverState) {\n        return 'dragoverState';\n      }\n      if (this.state === this.draggedState) {\n        return 'draggedState';\n      }\n      if (this.state === this.disableState) {\n        return 'disableState';\n      }\n    }\n  }, {\n    key: \"nodeChanged\",\n    value: function nodeChanged(node) {\n      if (this.id === node.id) {\n        rxEditor.commandManager.changeNode(this, node);\n        return;\n      }\n\n      this.children.forEach(function (child) {\n        child.nodeChanged(node);\n      });\n    }\n  }, {\n    key: \"focusNode\",\n    value: function focusNode(node) {\n      if (node.id === this.id) {\n        this.changeToState('focusState');\n      } else {\n        this.changeToState('normalState');\n      }\n      this.children.forEach(function (child) {\n        child.focusNode(node);\n      });\n    }\n  }, {\n    key: \"clearCharNodes\",\n    value: function clearCharNodes() {\n      this.children.forEach(function (child) {\n        child.clearCharNodes();\n      });\n    }\n  }, {\n    key: \"getNodeById\",\n    value: function getNodeById(id) {\n      if (id === this.id) {\n        return this;\n      }\n\n      for (var i in this.children) {\n        var node = this.children[i].getNodeById(id);\n        if (node) {\n          return node;\n        }\n      }\n    }\n  }, {\n    key: \"preview\",\n    value: function preview() {\n      this.changeToState('previewState');\n      this.children.forEach(function (child) {\n        child.preview();\n      });\n    }\n  }]);\n\n  return Node;\n}();\n\n/***/ }),\n\n/***/ 233:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ObjectState; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__rxarray__ = __webpack_require__(5);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar ObjectState = function () {\n  function ObjectState() {\n    _classCallCheck(this, ObjectState);\n\n    this.envetHandlers = {};\n  }\n\n  _createClass(ObjectState, [{\n    key: 'watch',\n    value: function watch(attribute, callbackFunction) {\n      if (!this.envetHandlers[attribute]) {\n        this.envetHandlers[attribute] = [];\n      }\n      if (!Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"d\" /* contains */])(callbackFunction, this.envetHandlers[attribute])) {\n        this.envetHandlers[attribute].push(callbackFunction);\n      }\n    }\n  }, {\n    key: 'cancelWatch',\n    value: function cancelWatch(attribute, callbackFunction) {\n      console.assert(this.envetHandlers[attribute], 'EditorState: did not register this event handler');\n      Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"i\" /* remove */])(callbackFunction, this.envetHandlers[attribute]);\n    }\n  }, {\n    key: 'distributeEvent',\n    value: function distributeEvent(attribute) {\n      this.distributeEventWithoutGlobal(attribute);\n      this.distributeEventWithoutGlobal('changed'); //\n    }\n  }, {\n    key: 'distributeEventWithoutGlobal',\n    value: function distributeEventWithoutGlobal(attribute) {\n      var _this = this;\n\n      var handlers = this.envetHandlers[attribute];\n      if (handlers) {\n        handlers.forEach(function (handler) {\n          handler(_this);\n        });\n      }\n    }\n  }]);\n\n  return ObjectState;\n}();\n\n/***/ }),\n\n/***/ 234:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RXEditorCommandProxy; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar RXEditorCommandProxy = function () {\n  function RXEditorCommandProxy(pageId) {\n    var _this = this;\n\n    _classCallCheck(this, RXEditorCommandProxy);\n\n    this.pageId = pageId;\n    window.addEventListener(\"message\", function (event) {\n      if (_this.pageId === event.data.pageId) {\n        _this.handleMessage(event.data);\n      }\n    });\n\n    this.focusNode = function (node, pageId) {\n      _this.sendMessage({\n        name: 'focusNode',\n        pageId: pageId,\n        node: {\n          id: node.id,\n          ruleName: node.ruleName,\n          meta: node.meta,\n          defaultMeta: node.defaultMeta,\n          optionsSchema: node.rule.optionsSchema,\n          htmlCode: node.htmlCode\n        }\n      });\n    };\n\n    this.unFocusNode = function (node) {\n      _this.sendMessage({\n        name: 'unFocusNode',\n        id: node.id\n      });\n    };\n\n    document.addEventListener('mouseup', function (event) {\n      _this.sendMessage({\n        name: 'canvasMouseup'\n      });\n    });\n\n    document.addEventListener('mousemove', function (event) {\n      _this.canvasMouseMove(event);\n    });\n  }\n\n  _createClass(RXEditorCommandProxy, [{\n    key: 'canvasMouseMove',\n    value: function canvasMouseMove(event) {\n      this.sendMessage({\n        name: 'canvasMouseMove',\n        event: {\n          screenX: event.screenX,\n          screenY: event.screenY\n        }\n      });\n    }\n  }, {\n    key: 'rxeditorReady',\n    value: function rxeditorReady() {\n      this.sendMessage({\n        name: 'rxeditorReady'\n      });\n    }\n  }, {\n    key: 'commandExcuted',\n    value: function commandExcuted(canUndo, canRedo, commandSchema) {\n      this.sendMessage({\n        name: 'commandExcuted',\n        canUndo: canUndo,\n        canRedo: canRedo,\n        commandSchema: commandSchema\n      });\n    }\n  }, {\n    key: 'takeOverDraggingByWorkspace',\n    value: function takeOverDraggingByWorkspace() {\n      this.sendMessage({\n        name: 'takeOverDraggingByWorkspace'\n      });\n    }\n  }, {\n    key: 'saveCodeFiles',\n    value: function saveCodeFiles(innerHTML, json) {\n      this.sendMessage({\n        name: 'saveCodeFiles',\n        innerHTML: innerHTML,\n        json: json\n      });\n    }\n  }, {\n    key: 'handleMessage',\n    value: function handleMessage(message) {\n      //console.log('received:' + message.name + \":\" + message.rxNameId)\n      switch (message.name) {\n        case 'requestAssemble':\n          var loadedData = this.serveForRXEditor.assembleWithTheme(message.theme);\n          this.sendMessage({\n            name: 'replyAssemble',\n            toolbox: loadedData.toolbox,\n            treeViewNodes: loadedData.treeViewNodes\n          });\n          break;\n        case 'draggingFromToolbox':\n          this.serveForRXEditor.dragFromToolbox(message.item);\n          break;\n        case 'endDragFromToolbox':\n          this.serveForRXEditor.endDragFromToolbox(message.rxNameId);\n          break;\n        case 'changeCanvasState':\n          this.serveForRXEditor.changeCanvasState(message.state);\n          break;\n        case 'nodeChanged':\n          this.serveForRXEditor.nodeChanged(message.node);\n          break;\n        case 'undo':\n          this.serveForRXEditor.undo();\n          break;\n        case 'redo':\n          this.serveForRXEditor.redo();\n          break;\n        //case 'download':\n        //  this.serveForRXEditor.download()\n        //  break;\n        case 'clearCanvas':\n          this.serveForRXEditor.clearCanvas();\n          break;\n        case 'changeTheme':\n          this.serveForRXEditor.changeTheme(message.theme);\n          break;\n        case 'focusNodeFromShell':\n          this.serveForRXEditor.focusNodeFromShell(message.node);\n          break;\n        case 'duplicateNodeFromShell':\n          this.serveForRXEditor.duplicateNodeFromShell(message.id);\n          break;\n        case 'removeNodeFromShell':\n          this.serveForRXEditor.removeNodeFromShell(message.id);\n          break;\n        case 'requestHtmlCode':\n          var htmlCode = this.serveForRXEditor.requestHtmlCode();\n          this.sendMessage({\n            name: 'replyHtmlCode',\n            htmlCode: htmlCode\n          });\n          break;\n        case 'loadHtml':\n          this.serveForRXEditor.loadHtml(message.html, message.id);\n          break;\n        case 'setInlineFile':\n          this.serveForRXEditor.setInlineFile(message.file);\n          break;\n      }\n    }\n  }, {\n    key: 'sendMessage',\n    value: function sendMessage(message) {\n      message.pageId = this.pageId;\n      message.canvasHeight = document.body.scrollHeight;\n      window.parent.postMessage(message, '/');\n    }\n  }]);\n\n  return RXEditorCommandProxy;\n}();\n\n/***/ }),\n\n/***/ 235:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RXNode; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__node__ = __webpack_require__(206);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__text_node__ = __webpack_require__(236);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\nvar RXNode = function (_Node) {\n  _inherits(RXNode, _Node);\n\n  function RXNode() {\n    _classCallCheck(this, RXNode);\n\n    return _possibleConstructorReturn(this, (RXNode.__proto__ || Object.getPrototypeOf(RXNode)).call(this));\n  }\n\n  _createClass(RXNode, [{\n    key: \"clone\",\n    value: function clone() {\n      var copy = _get(RXNode.prototype.__proto__ || Object.getPrototypeOf(RXNode.prototype), \"clone\", this).call(this);\n      copy.meta = JSON.parse(JSON.stringify(this.meta));\n      copy.defaultMeta = JSON.parse(JSON.stringify(this.defaultMeta));\n      copy.label = this.label;\n\n      return copy;\n    }\n  }, {\n    key: \"setLabel\",\n    value: function setLabel(label) {\n      this.label = label;\n      this.labelToCapitalize();\n      return this;\n    }\n  }, {\n    key: \"labelToCapitalize\",\n    value: function labelToCapitalize() {\n      var label = this.label;\n      this.label = label.replace(label[0], label[0].toUpperCase());\n    }\n  }, {\n    key: \"toViewModel\",\n    value: function toViewModel() {\n      var model = _get(RXNode.prototype.__proto__ || Object.getPrototypeOf(RXNode.prototype), \"toViewModel\", this).call(this);\n      this.baseMetaToModel(model);\n\n      if (this.meta.innerHTML) {\n        model.innerHTML = this.meta.innerHTML;\n      }\n\n      return model;\n    }\n  }, {\n    key: \"toHtmlModel\",\n    value: function toHtmlModel() {\n      var model = _get(RXNode.prototype.__proto__ || Object.getPrototypeOf(RXNode.prototype), \"toHtmlModel\", this).call(this);\n      this.baseMetaToModel(model);\n      return model;\n    }\n  }, {\n    key: \"baseMetaToModel\",\n    value: function baseMetaToModel(model) {\n      var meta = this.meta;\n      model.tag = meta.tag;\n      model.innerHTML = meta.innerHTML;\n      model.classList.push.apply(model.classList, meta.classList);\n      Object.assign(model.styles, meta.styles);\n      Object.assign(model.attributes, meta.attributes);\n    }\n  }, {\n    key: \"setTag\",\n    value: function setTag(tag) {\n      return this.setField('tag', tag);\n    }\n  }, {\n    key: \"addClass\",\n    value: function addClass(className) {\n      if (!className) {\n        return this;\n      }\n      this.meta.classList.push(className);\n      return this;\n    }\n  }, {\n    key: \"setAttribute\",\n    value: function setAttribute(attrName, value) {\n      this.meta.attributes[attrName] = value;\n      return this;\n    }\n  }, {\n    key: \"changeTextnodeToCharNode\",\n    value: function changeTextnodeToCharNode() {\n      var _this2 = this;\n\n      var children = [];\n      this.children.forEach(function (child) {\n        if (child.isTextNode) {\n          children.push.apply(children, child.charNodes());\n          _this2.isCharState = true;\n        } else {\n          children.push(child);\n        }\n      });\n\n      this.children = children;\n      this.render();\n    }\n  }, {\n    key: \"changeCharNodeToTextNode\",\n    value: function changeCharNodeToTextNode() {\n      var _this3 = this;\n\n      var children = [];\n      var textNode = null;\n      this.children.forEach(function (child) {\n        if (child.isCharNode) {\n          var prev = child.previousSbiling();\n          if (!prev || !prev.isCharNode) {\n            textNode = new __WEBPACK_IMPORTED_MODULE_1__text_node__[\"a\" /* TextNode */]('');\n            textNode.parent = _this3;\n            children.push(textNode);\n          }\n\n          textNode.text += child.char;\n        } else {\n          children.push(child);\n        }\n      });\n      this.children = children;\n      this.render();\n      this.isCharState = false;\n    }\n  }, {\n    key: \"clearCharNodes\",\n    value: function clearCharNodes() {\n      if (this.isCharState) {\n        this.changeCharNodeToTextNode();\n      }\n      _get(RXNode.prototype.__proto__ || Object.getPrototypeOf(RXNode.prototype), \"clearCharNodes\", this).call(this);\n    }\n  }]);\n\n  return RXNode;\n}(__WEBPACK_IMPORTED_MODULE_0__node__[\"a\" /* Node */]);\n\n/***/ }),\n\n/***/ 236:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return TextNode; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__char_node__ = __webpack_require__(361);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar TextNode = function () {\n  function TextNode(text) {\n    _classCallCheck(this, TextNode);\n\n    this.text = text;\n    this.seedId();\n    this.isTextNode = true;\n  }\n\n  _createClass(TextNode, [{\n    key: \"seedId\",\n    value: function seedId() {\n      if (!TextNode.idSeed) TextNode.idSeed = 1;\n      TextNode.idSeed++;\n      this.id = \"text\" + TextNode.idSeed;\n    }\n  }, {\n    key: \"make\",\n    value: function make() {\n      return new TextNode(this.text);\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      var copy = this.make();\n      return copy;\n    }\n  }, {\n    key: \"getParentViewDomElement\",\n    value: function getParentViewDomElement() {\n      return this.parent.view.$dom;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      //this.view.render(this.toViewModel(), this.getParentViewDomElement())\n      var parentDom = this.getParentViewDomElement();\n      if (parentDom) {\n        parentDom.appendChild(document.createTextNode(this.text));\n      }\n    }\n  }, {\n    key: \"renderHtml\",\n    value: function renderHtml(parentDomElement) {\n      if (parentDomElement) {\n        parentDomElement.appendChild(document.createTextNode(this.text));\n      }\n    }\n  }, {\n    key: \"renderMouseFollower\",\n    value: function renderMouseFollower(parentDomElement) {\n      var mouseFollower = document.createTextNode(this.text);\n      parentDomElement.appendChild(mouseFollower);\n      return mouseFollower;\n    }\n  }, {\n    key: \"preview\",\n    value: function preview() {}\n  }, {\n    key: \"nodeChanged\",\n    value: function nodeChanged() {}\n  }, {\n    key: \"refreshState\",\n    value: function refreshState() {}\n  }, {\n    key: \"clearDraggedoverStates\",\n    value: function clearDraggedoverStates() {}\n  }, {\n    key: \"clearActiveStates\",\n    value: function clearActiveStates() {}\n  }, {\n    key: \"clearFocusAndEditStates\",\n    value: function clearFocusAndEditStates() {}\n  }, {\n    key: \"clearCharNodes\",\n    value: function clearCharNodes() {}\n  }, {\n    key: \"draggedToFoused\",\n    value: function draggedToFoused() {}\n  }, {\n    key: \"focusNode\",\n    value: function focusNode() {}\n  }, {\n    key: \"allToNormalState\",\n    value: function allToNormalState() {}\n  }, {\n    key: \"toTreeViewNode\",\n    value: function toTreeViewNode() {\n      return null;\n    }\n  }, {\n    key: \"getNodeById\",\n    value: function getNodeById() {}\n  }, {\n    key: \"charNodes\",\n    value: function charNodes() {\n      var nodes = [];\n      for (var i = 0; i < this.text.length; i++) {\n        nodes.push(new __WEBPACK_IMPORTED_MODULE_0__char_node__[\"a\" /* CharNode */](this.text[i], this.parent));\n      }\n      return nodes;\n    }\n  }]);\n\n  return TextNode;\n}();\n\n/***/ }),\n\n/***/ 237:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  dropInMargin: 10,\n  editable: true,\n  editMarginStyle: {\n    paddingX: '10px',\n    paddingY: '10px'\n  },\n  //\n  empertyMargin: false,\n  rejectChildren: ['col', 'thead', 'tbody', 'th', 'tr', 'td']\n});\n\n/***/ }),\n\n/***/ 346:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__shell_init_editor__ = __webpack_require__(347);\n\n\nwindow.creatEditorCore = function (pageId) {\n  Object(__WEBPACK_IMPORTED_MODULE_0__shell_init_editor__[\"a\" /* default */])(pageId);\n};\n\n/***/ }),\n\n/***/ 347:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = initEditor;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_rxeditor__ = __webpack_require__(348);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_rxeditor_command_proxy__ = __webpack_require__(234);\n\n\n//import loadElements from \"../elements/load-elements\"\n\nfunction initEditor(pageId) {\n  window.rxEditor = new __WEBPACK_IMPORTED_MODULE_0__core_rxeditor__[\"a\" /* RXEditor */](pageId);\n  window.RXEditorCommandProxy = __WEBPACK_IMPORTED_MODULE_1__core_rxeditor_command_proxy__[\"a\" /* RXEditorCommandProxy */];\n}\n\n/***/ }),\n\n/***/ 348:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RXEditor; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__canvas__ = __webpack_require__(349);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__canvas_state__ = __webpack_require__(352);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__basic_rxarray__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__commands__ = __webpack_require__(353);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__node_label__ = __webpack_require__(354);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__node_toolbar__ = __webpack_require__(355);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__rx_cursor__ = __webpack_require__(356);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__mouse_follower__ = __webpack_require__(357);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__mini_editbar__ = __webpack_require__(358);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__rxeditor_command_proxy__ = __webpack_require__(234);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__node_parser__ = __webpack_require__(359);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction getDefaultLang() {\n  var lang = navigator.language || navigator.userLanguage;\n  lang = lang.substr(0, 2);\n  //\n  if (lang !== 'zh') {\n    lang = 'en';\n  }\n  return lang;\n}\n\nvar enLocal = {\n  \"focus-parent\": \"Focus Parent\",\n  \"move\": \"Move\",\n  \"edit\": \"Edit\",\n  \"duplicate\": \"Duplicate\",\n  \"delete\": \"Delete\",\n  \"can-be-draged\": \"Can be draged\"\n};\n\nvar zhLocal = {\n  \"focus-parent\": \"\",\n  \"move\": \"\",\n  \"edit\": \"\",\n  \"duplicate\": \"\",\n  \"delete\": \"\",\n  \"can-be-draged\": \"\"\n};\n\nfunction getLocal(id) {\n  var local = getDefaultLang() === 'zh' ? zhLocal : enLocal;\n  return local[id] ? local[id] : id;\n}\n\nvar RXEditor = function () {\n  function RXEditor(pageId) {\n    var _this = this;\n\n    _classCallCheck(this, RXEditor);\n\n    this.pageId = pageId;\n    window.$t = getLocal;\n    this.state = new __WEBPACK_IMPORTED_MODULE_1__canvas_state__[\"a\" /* CanvasState */]();\n    this.commandManager = new __WEBPACK_IMPORTED_MODULE_3__commands__[\"a\" /* CommadManager */]();\n    this.commandManager.onCommandsChanged = function (canUndo, canRedo, commandSchema) {\n      if (!commandSchema) return;\n      if (commandSchema.parentId === _this.canvas.id) {\n        commandSchema.parentId = '';\n      }\n      if (commandSchema.oldParentId === _this.canvas.id) {\n        commandSchema.oldParentId = '';\n      }\n      _this.commandProxy.commandExcuted(canUndo, canRedo, commandSchema);\n    };\n    this.optionClasses = [];\n    Object(__WEBPACK_IMPORTED_MODULE_2__basic_rxarray__[\"a\" /* add */])('rx-_-show-outline', this.optionClasses);\n    //this.optionClasses.add('show-label')\n    this.activedLabel = new __WEBPACK_IMPORTED_MODULE_4__node_label__[\"a\" /* NodeLabel */]();\n    this.focusedLabel = new __WEBPACK_IMPORTED_MODULE_4__node_label__[\"a\" /* NodeLabel */]();\n    this.focusedLabel.cssClass('focused');\n    this.focusedLabel.domOn('mousedown', function (event) {\n      if (rxEditor.focusedNode) {\n        rxEditor.focusedNode.begindragLabel(event);\n      }\n    });\n\n    this.toolbar = new __WEBPACK_IMPORTED_MODULE_5__node_toolbar__[\"a\" /* NodeToolbar */]();\n    this.cursor = new __WEBPACK_IMPORTED_MODULE_6__rx_cursor__[\"a\" /* RxCursor */]();\n    this.mouseFollower = new __WEBPACK_IMPORTED_MODULE_7__mouse_follower__[\"a\" /* MouseFollower */]();\n    this.miniEditbar = new __WEBPACK_IMPORTED_MODULE_8__mini_editbar__[\"a\" /* MiniEditbar */]();\n    this.nodeParser = new __WEBPACK_IMPORTED_MODULE_10__node_parser__[\"a\" /* NodeParser */]();\n  }\n\n  _createClass(RXEditor, [{\n    key: \"hangOn\",\n    value: function hangOn(id) {\n      var _this2 = this;\n\n      var commandProxy = new __WEBPACK_IMPORTED_MODULE_9__rxeditor_command_proxy__[\"a\" /* RXEditorCommandProxy */](this.pageId);\n      this.workspace = document.getElementById(id);\n      this.activedLabel.render(this.workspace);\n      this.focusedLabel.render(this.workspace);\n      this.toolbar.render(this.workspace);\n      this.cursor.render(this.workspace);\n      this.mouseFollower.render(this.workspace);\n      this.miniEditbar.render(this.workspace);\n      this.canvas = new __WEBPACK_IMPORTED_MODULE_0__canvas__[\"a\" /* Canvas */](this.workspace);\n      //this.canvas.children = this.load()\n      this.canvas.render();\n      commandProxy.serveForRXEditor = this;\n      this.commandProxy = commandProxy;\n\n      this.commandProxy.rxeditorReady();\n      document.addEventListener('mouseup', function (event) {\n        _this2.dropElement(event);\n      });\n\n      this.state.watch('changed', function (state) {\n        //this.allToNormalState()\n      });\n      this.state.watch('showOutline', function (state) {\n        Object(__WEBPACK_IMPORTED_MODULE_2__basic_rxarray__[\"j\" /* tongleOnCondition */])(state.showOutline, 'rx-_-show-outline', _this2.optionClasses);\n        _this2.render();\n      });\n      this.state.watch('showMarginX', function (state) {\n        _this2.render();\n      });\n      this.state.watch('showMarginY', function (state) {\n        _this2.render();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.canvas.render();\n      this.toolbar.refreshPosition();\n      this.focusedLabel.refreshPosition();\n    }\n  }, {\n    key: \"clearDraggedoverStates\",\n    value: function clearDraggedoverStates() {\n      this.canvas.clearDraggedoverStates();\n    }\n  }, {\n    key: \"clearActiveStates\",\n    value: function clearActiveStates() {\n      this.canvas.clearActiveStates();\n    }\n  }, {\n    key: \"clearFocusAndEditStates\",\n    value: function clearFocusAndEditStates() {\n      this.canvas.clearFocusAndEditStates();\n    }\n  }, {\n    key: \"allToNormalState\",\n    value: function allToNormalState() {\n      this.canvas.allToNormalState();\n    }\n  }, {\n    key: \"dragFromToolbox\",\n    value: function dragFromToolbox(item) {\n      if (this.commandManager.movingCommand) return;\n      this.clearFocusAndEditStates();\n      var draggedNode = this.parseNode(item);\n      this.commandManager.startNew(draggedNode);\n      this.beginFollowMouse();\n      //this.clearFocusAndEditStates()\n    }\n  }, {\n    key: \"parseNode\",\n    value: function parseNode(item) {\n      var responsive = this.state.screenWidth;\n      return this.nodeParser.parse(item.code.replace('--responsive--', responsive == 'xs' ? '' : '-' + responsive))[0];\n      //return new BSContainer\n    }\n  }, {\n    key: \"dropElement\",\n    value: function dropElement(event) {\n      //this.clearDraggedoverStates()\n      this.doDrop(event);\n      this.commandManager.finishMoving();\n      this.endFollowMouse();\n      this.canvas.clearCharNodes();\n    }\n  }, {\n    key: \"doDrop\",\n    value: function doDrop(event) {\n      var position = this.cursor.position;\n      var node = this.cursor.node;\n      if (!node) {\n        this.canvas.draggedToFoused();\n        return;\n      }\n      this.canvas.clearFocusAndEditStates();\n      var command = this.commandManager.movingCommand;\n      if (command) {\n        if (position === 'in-left' || position === 'in-top') {\n          command.adoptFromToolbox(node);\n          command.moveInTop(node);\n          command.finish();\n        } else if (position === 'in-right' || position === 'in-bottom') {\n          command.adoptFromToolbox(node);\n          command.moveIn(node);\n          command.finish();\n        } else if (position === 'out-left' || position === 'out-top' || position === 'char-left') {\n          command.adoptFromToolbox(node);\n          command.moveBefore(node);\n          command.finish();\n        } else if (position === 'out-right' || position === 'out-bottom' || position === 'char-right') {\n          command.adoptFromToolbox(node);\n          command.moveAfter(node);\n          command.finish();\n        }\n      }\n    }\n  }, {\n    key: \"endDragFromToolbox\",\n    value: function endDragFromToolbox() {\n      this.commandManager.finishMoving();\n      this.endFollowMouse();\n    }\n  }, {\n    key: \"followMouse\",\n    value: function followMouse(event) {\n      var mouseFollower = this.mouseFollower;\n      if (mouseFollower.isActived) {\n        //mouseFollower.$dom.style.left =  this.followX(event)\n        //mouseFollower.$dom.style.top = this.followY(event)\n        this.mouseFollower.followMouse(event);\n        this.commandProxy.takeOverDraggingByWorkspace();\n      }\n    }\n  }, {\n    key: \"beginFollowMouse\",\n    value: function beginFollowMouse() {\n      if (this.commandManager.movingCommand) {\n        var draggedNode = this.commandManager.movingCommand.node;\n        this.mouseFollower.active(draggedNode.label);\n      }\n    }\n  }, {\n    key: \"endFollowMouse\",\n    value: function endFollowMouse() {\n      //if(this.mouseFollower && this.workspace.contains(this.mouseFollower.$dom)){\n      //  this.workspace.removeChild(this.mouseFollower.$dom)\n      //}\n      this.cursor.hide();\n      this.mouseFollower.hide();\n    }\n  }, {\n    key: \"nodeStateChanged\",\n    value: function nodeStateChanged(node, oldState, newState) {\n      if (newState === node.focusState && node.focusState !== node.normalState) {\n        node.htmlCode = this.getNodeHtml(node);\n        this.commandProxy.focusNode(node, this.pageId);\n      }\n      if (oldState === node.focusState && newState !== node.focusState) {\n        this.commandProxy.unFocusNode(node);\n      }\n    }\n  }, {\n    key: \"getNodeHtml\",\n    value: function getNodeHtml(node) {\n      var div = document.createElement('div');\n      node.renderHtml(div);\n      return div.innerHTML;\n    }\n  }, {\n    key: \"changeCanvasState\",\n    value: function changeCanvasState(state) {\n      this.state.screenWidth = state.screenWidth;\n      //this.state.preview = state.preview\n      //this.state.showEditMargin = state.showEditMargin\n      this.state.showMarginX = state.showMarginX;\n      this.state.showMarginY = state.showMarginY;\n      this.state.showOutline = state.showOutline;\n      this.state.showLabel = state.showLabel;\n    }\n  }, {\n    key: \"nodeChanged\",\n    value: function nodeChanged(node) {\n      //console.log(node)\n      this.canvas.nodeChanged(node);\n      this.render();\n    }\n  }, {\n    key: \"undo\",\n    value: function undo() {\n      this.allToNormalState();\n      this.commandManager.undo();\n      this.render();\n    }\n  }, {\n    key: \"redo\",\n    value: function redo() {\n      this.allToNormalState();\n      this.commandManager.redo();\n      this.render();\n    }\n\n    //download(){\n    //  let innerHTML = this.canvas.generateHTML()\n    //  let json = this.canvas.generateJson()\n    //  this.commandProxy.saveCodeFiles(innerHTML, json)\n    //  this.render()\n    //}\n\n  }, {\n    key: \"clearCanvas\",\n    value: function clearCanvas() {\n      this.commandManager.clearCanvas();\n      this.activedLabel.hide();\n      this.focusedLabel.hide();\n      this.toolbar.hide();\n      this.render();\n    }\n  }, {\n    key: \"focusNodeFromShell\",\n    value: function focusNodeFromShell(node) {\n      this.canvas.clearFocusAndEditStates();\n      this.canvas.focusNode(node);\n    }\n  }, {\n    key: \"duplicateNodeFromShell\",\n    value: function duplicateNodeFromShell(id) {\n      this.canvas.clearFocusAndEditStates();\n      var node = this.canvas.getNodeById(id);\n      this.commandManager.duplicate(node);\n    }\n  }, {\n    key: \"removeNodeFromShell\",\n    value: function removeNodeFromShell(id) {\n      this.canvas.clearFocusAndEditStates();\n      var node = this.canvas.getNodeById(id);\n      this.commandManager.deleteNode(node);\n    }\n  }, {\n    key: \"canvasMouseMove\",\n    value: function canvasMouseMove(event) {\n      this.commandProxy.canvasMouseMove(event);\n    }\n  }, {\n    key: \"requestHtmlCode\",\n    value: function requestHtmlCode() {\n      this.allToNormalState();\n      return this.canvas.generateHTML();\n    }\n  }, {\n    key: \"loadHtml\",\n    value: function loadHtml(html, id) {\n      var node = this.canvas.getNodeById(id);\n      if (node) {\n        this.commandManager.loadNodeHtml(node, html);\n      } else {\n        this.commandManager.loadCanvasHtml(html);\n      }\n\n      this.render();\n    }\n  }, {\n    key: \"setInlineFile\",\n    value: function setInlineFile(file) {\n      var codeId = file.name.replace('.', '-');\n      var element = document.getElementById(codeId);\n      if (element) {\n        element.innerHTML = file.code;\n        return;\n      }\n\n      if (file.fileType === 'style') {\n        var style = document.createElement('style');\n        style.type = 'text/css';\n        style.rel = 'stylesheet';\n        style.id = codeId;\n\n        style.appendChild(document.createTextNode(file.code));\n\n        var head = document.getElementsByTagName('head')[0];\n        head.appendChild(style);\n      }\n\n      if (file.fileType === 'javascript') {\n        var script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.id = codeId;\n        script.appendChild(document.createTextNode(file.code));\n        document.body.appendChild(script);\n      }\n    }\n  }]);\n\n  return RXEditor;\n}();\n\n/***/ }),\n\n/***/ 349:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Canvas; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__node__ = __webpack_require__(206);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar Canvas = function (_Node) {\n  _inherits(Canvas, _Node);\n\n  function Canvas(workspace) {\n    _classCallCheck(this, Canvas);\n\n    var _this = _possibleConstructorReturn(this, (Canvas.__proto__ || Object.getPrototypeOf(Canvas)).call(this));\n\n    _this.activeState = _this.normalState;\n    _this.focusState = _this.normalState;\n    _this.parentViewDomElement = workspace;\n    _this.padding = '30px';\n\n    _this.stateChanged = function (oldState, newState) {};\n\n    _this.rule = { dropInMargin: 0 };\n    _this.rule.acceptedChildren = '';\n    _this.rule.rejectChildren = ['col', 'thead', 'tbody', 'th', 'tr', 'td'];\n    return _this;\n  }\n\n  _createClass(Canvas, [{\n    key: 'getParentViewDomElement',\n    value: function getParentViewDomElement() {\n      return this.parentViewDomElement;\n    }\n\n    /*preview(parentDomElement){\r\n      if(parentDomElement.contains(this.view.$dom)){\r\n        parentDomElement.removeChild(this.view.$dom)\r\n      }\r\n      return super.preview(parentDomElement)\r\n    }*/\n\n  }, {\n    key: 'toViewModel',\n    value: function toViewModel() {\n      var model = _get(Canvas.prototype.__proto__ || Object.getPrototypeOf(Canvas.prototype), 'toViewModel', this).call(this);\n      model.tag = 'div';\n      model.styles.width = \"100%\";\n      model.styles['min-height'] = \"calc(100vh)\";\n      model.styles.cursor = 'default';\n      model.styles['border'] = '0';\n      model.styles['padding'] = '10px';\n      model.classList.push('canvas');\n      model.toolbar = '';\n      model.label = '';\n      return model;\n    }\n  }, {\n    key: 'toPreviewModel',\n    value: function toPreviewModel() {\n      var model = _get(Canvas.prototype.__proto__ || Object.getPrototypeOf(Canvas.prototype), 'toPreviewModel', this).call(this);\n      model.tag = 'div';\n      return model;\n    }\n  }, {\n    key: 'generateHTML',\n    value: function generateHTML() {\n      var rootDiv = document.createElement('div');\n      this.children.forEach(function (child) {\n        child.renderHtml(rootDiv);\n      });\n      return rootDiv.innerHTML;\n    }\n  }, {\n    key: 'generateJson',\n    value: function generateJson() {\n      var jsonArray = [];\n      this.children.forEach(function (child) {\n        jsonArray.push(child.toJson());\n      });\n      return jsonArray;\n    }\n  }, {\n    key: 'generateTreeViewNodes',\n    value: function generateTreeViewNodes() {\n      var viewNodes = [];\n      this.children.forEach(function (child) {\n        viewNodes.push(child.toTreeViewNode());\n      });\n      return viewNodes;\n    }\n  }]);\n\n  return Canvas;\n}(__WEBPACK_IMPORTED_MODULE_0__node__[\"a\" /* Node */]);\n\n/***/ }),\n\n/***/ 350:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return NodeView; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar NodeView = function () {\n  function NodeView() {\n    _classCallCheck(this, NodeView);\n  }\n\n  _createClass(NodeView, [{\n    key: 'render',\n    value: function render(model, parentDoment) {\n      this.parentDoment = parentDoment;\n      //this.putDown(parentDoment)//canvas\n      var oldDom = this.$dom;\n\n      this.$dom = document.createElement(model.tag);\n      this.doRender(model, parentDoment, this.$dom);\n      if (parentDoment.contains(oldDom)) {\n        parentDoment.replaceChild(this.$dom, oldDom);\n      } else {\n        parentDoment.appendChild(this.$dom);\n      }\n    }\n  }, {\n    key: 'renderHtml',\n    value: function renderHtml(model, parentDoment) {\n      //this.putDown(parentDoment)//canvas\n      var previewDom = document.createElement(model.tag);\n      this.doRender(model, parentDoment, previewDom);\n      return previewDom;\n    }\n  }, {\n    key: 'refreshState',\n    value: function refreshState(model) {\n      if (this.$dom) {\n        //let y = this.$dom.getBoundingClientRect().y\n        this.$dom.classList.remove('rx-_-mouse-overed', 'rx-_-focused', 'rx-_-dragged', 'rx-_-dragover', 'rx-_-editing');\n        this.renderStylesAndClasses(model, this.$dom);\n        this.showAttributes(model, this.$dom);\n      }\n    }\n  }, {\n    key: 'doRender',\n    value: function doRender(model, parentDoment, domElement) {\n      domElement.innerHTML = model.innerHTML ? model.innerHTML : '';\n      this.renderStylesAndClasses(model, domElement);\n      this.bindEvents(domElement, model.on);\n      this.showAttributes(model, domElement);\n      //parentDoment.appendChild(domElement);\n    }\n  }, {\n    key: 'renderStylesAndClasses',\n    value: function renderStylesAndClasses(model, domElement) {\n      if (domElement) {\n        if (model.styles) {\n          for (var styleName in model.styles) {\n            domElement.style[styleName] = model.styles[styleName];\n          }\n        }\n\n        model.classList.forEach(function (className) {\n          if (className) {\n            domElement.classList.add(className);\n          }\n        });\n      }\n    }\n  }, {\n    key: 'showAttributes',\n    value: function showAttributes(model, domElement) {\n      for (var attributeName in model.attributes) {\n        if (model.attributes[attributeName]) {\n          domElement.setAttribute(attributeName, model.attributes[attributeName]);\n        }\n      }\n    }\n  }, {\n    key: 'bindEvents',\n    value: function bindEvents(element, on) {\n      for (var eventName in on) {\n        //element.addEventListener(eventName, on[eventName])\n        element[eventName] = on[eventName];\n      }\n    }\n  }, {\n    key: 'putDown',\n    value: function putDown() {\n      if (this.$dom) {\n        if (this.parentDoment.contains(this.$dom)) {\n          this.parentDoment.removeChild(this.$dom);\n        }\n      }\n    }\n  }]);\n\n  return NodeView;\n}();\n\n/***/ }),\n\n/***/ 351:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export NodeState */\n/* unused harmony export CanDropState */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return NormalState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return DragoverState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ActiveState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return FocusState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return DisableState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return DraggedState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return EditState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return PreviewState; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar NodeState = function () {\n  function NodeState(node) {\n    _classCallCheck(this, NodeState);\n\n    this.node = node;\n    this.classList = [];\n    this.styles = {};\n    this.attributes = {/*contenteditable:'false'*/};\n    this.onMousemove = function () {/*console.log('mouse move NodeState')*/};\n    this.onBegindrag = function () {};\n    this.onMouseover = function (event) {};\n    this.onMouseout = function () {};\n    //this.onMouseup = (event)=>{\n    //\n    //}\n    this.onClick = function () {\n      rxEditor.clearFocusAndEditStates();\n    };\n    this.enter = function () {};\n    this.leave = function () {};\n  }\n\n  _createClass(NodeState, [{\n    key: 'stateModel',\n    value: function stateModel() {\n      var classList = [];\n      classList.push.apply(classList, this.classList);\n\n      var model = {\n        styles: Object.assign({}, this.styles),\n        classList: classList,\n        attributes: Object.assign({}, this.attributes)\n      };\n\n      this.addtionToModel(model);\n      return model;\n    }\n  }, {\n    key: 'addtionToModel',\n    value: function addtionToModel(model) {\n      model.classList.push.apply(model.classList, rxEditor.optionClasses);\n      var node = this.node;\n      if (rxEditor.state.showMarginX && node.rule.editMarginStyle || node.children.length === 0 && node.rule.empertyMargin) {\n        model.styles['padding-left'] = node.rule.editMarginStyle ? node.rule.editMarginStyle.paddingX : 0;\n        model.styles['padding-right'] = node.rule.editMarginStyle ? node.rule.editMarginStyle.paddingX : 0;\n      }\n      if (rxEditor.state.showMarginY && node.rule.editMarginStyle || node.children.length === 0 && node.rule.empertyMargin) {\n        model.styles['padding-top'] = node.rule.editMarginStyle ? node.rule.editMarginStyle.paddingY : 0;\n        model.styles['padding-bottom'] = node.rule.editMarginStyle ? node.rule.editMarginStyle.paddingY : 0;\n      }\n\n      //for\n      if (model.attributes.for) {\n        model.attributes.for = '';\n      }\n\n      model.attributes.draggable = \"false\";\n\n      return model;\n    }\n  }, {\n    key: 'judgePosition',\n    value: function judgePosition(event) {\n      var draggedNode = rxEditor.commandManager.movingCommand.node;\n      if (this.node.isCharNode) {\n        return this.judgeCharNodePostion(event);\n      }\n      var margin = this.node.rule.dropInMargin;\n      margin = margin ? margin : 0;\n\n      var clientWidth = event.srcElement.clientWidth;\n      var clientHeight = event.srcElement.clientHeight;\n      var offsetX = event.offsetX;\n      var offsetY = event.offsetY;\n      var ratioY = offsetY / clientHeight;\n      var ratioX = offsetX / clientWidth;\n\n      if (margin > 0 && (this.node.parent && this.node.parent.canAccept(draggedNode) || !this.node.parent)) {\n        //\n        if (offsetY < margin && offsetX < margin) {\n          return ratioY < ratioX ? 'out-top' : 'out-left';\n        }\n\n        //\n        if (offsetY < margin && clientWidth - offsetX < margin) {\n          return ratioY < 1 - ratioX ? 'out-top' : 'out-right';\n        }\n\n        //\n        if (clientHeight - offsetY < margin && clientWidth - offsetX < margin) {\n          return 1 - ratioY < 1 - ratioX ? 'out-bottom' : 'out-right';\n        }\n\n        //\n        if (clientHeight - offsetY < margin && offsetX < margin) {\n          return 1 - ratioY < ratioX ? 'out-bottom' : 'out-left';\n        }\n\n        if (offsetY < margin) {\n          return 'out-top';\n        }\n\n        if (offsetX < margin) {\n          return 'out-left';\n        }\n\n        if (clientHeight - offsetY < margin) {\n          return 'out-bottom';\n        }\n\n        if (clientWidth - offsetX < margin) {\n          return 'out-right';\n        }\n      }\n\n      if (this.node.canAccept(draggedNode)) {\n        if (this.inTop(event) && this.inLeft(event)) {\n          return ratioY < ratioX ? 'in-top' : 'in-left';\n        }\n        if (this.inTop(event) && !this.inLeft(event)) {\n          return ratioY < 1 - ratioX ? 'in-top' : 'in-right';\n        }\n        if (!this.inTop(event) && this.inLeft(event)) {\n          return 1 - ratioY < ratioX ? 'in-bottom' : 'in-left';\n        }\n        if (!this.inTop(event) && !this.inLeft(event)) {\n          return 1 - ratioY < 1 - ratioX ? 'in-bottom' : 'in-right';\n        }\n      }\n    }\n  }, {\n    key: 'judgeCharNodePostion',\n    value: function judgeCharNodePostion(event) {\n      return this.inLeft(event) ? 'char-left' : 'char-right';\n    }\n\n    //-dropInMargin \n\n  }, {\n    key: 'inTop',\n    value: function inTop(event) {\n      //\n      if (event.srcElement.clientHeight > event.offsetY * 2) {\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: 'inLeft',\n    value: function inLeft(event) {\n      //\n      if (event.srcElement.clientWidth > event.offsetX * 2) {\n        return true;\n      }\n      return false;\n    }\n  }]);\n\n  return NodeState;\n}();\n\nvar CanDropState = function (_NodeState) {\n  _inherits(CanDropState, _NodeState);\n\n  function CanDropState(node) {\n    _classCallCheck(this, CanDropState);\n\n    var _this = _possibleConstructorReturn(this, (CanDropState.__proto__ || Object.getPrototypeOf(CanDropState)).call(this, node));\n\n    _this.onMousemove = function (event) {\n      _this.doDragover(event);\n      rxEditor.followMouse(event);\n    };\n    //this.onMouseup = (event)=>{\n    //  this.doDrop(event)\n    //}\n    _this.onClick = function (event) {\n      rxEditor.clearFocusAndEditStates();\n      _this.node.changeToState('focusState');\n    };\n    return _this;\n  }\n\n  _createClass(CanDropState, [{\n    key: 'doDragover',\n    value: function doDragover(event) {\n      var command = rxEditor.commandManager.movingCommand;\n      if (command) {\n        var position = this.judgePosition(event);\n        if (position) {\n          this.node.changeToState('dragoverState');\n          rxEditor.cursor.show(this.judgePosition(event), this.node);\n        }\n      }\n    }\n  }]);\n\n  return CanDropState;\n}(NodeState);\n\nvar NormalState = function (_CanDropState) {\n  _inherits(NormalState, _CanDropState);\n\n  function NormalState(node) {\n    _classCallCheck(this, NormalState);\n\n    var _this2 = _possibleConstructorReturn(this, (NormalState.__proto__ || Object.getPrototypeOf(NormalState)).call(this, node));\n\n    _this2.onMouseover = function (event) {\n      if (!rxEditor.commandManager.movingCommand) {\n        rxEditor.clearActiveStates();\n        _this2.node.changeToState('activeState');\n      }\n    };\n    return _this2;\n  }\n\n  return NormalState;\n}(CanDropState);\n\nvar DragoverState = function (_CanDropState2) {\n  _inherits(DragoverState, _CanDropState2);\n\n  function DragoverState(node) {\n    _classCallCheck(this, DragoverState);\n\n    var _this3 = _possibleConstructorReturn(this, (DragoverState.__proto__ || Object.getPrototypeOf(DragoverState)).call(this, node));\n\n    _this3.classList.push('rx-_-dragover');\n    _this3.enter = function () {\n      node.changeTextnodeToCharNode();\n      if (!_this3.node.isCharNode) {\n        rxEditor.activedLabel.show(node.label, node, 1);\n      }\n    };\n    _this3.leave = function () {\n      rxEditor.activedLabel.hide();\n    };\n    _this3.onMouseout = function () {\n      _this3.node.changeToState('normalState');\n    };\n    return _this3;\n  }\n\n  return DragoverState;\n}(CanDropState);\n\nvar ActiveState = function (_CanDropState3) {\n  _inherits(ActiveState, _CanDropState3);\n\n  function ActiveState(node) {\n    _classCallCheck(this, ActiveState);\n\n    var _this4 = _possibleConstructorReturn(this, (ActiveState.__proto__ || Object.getPrototypeOf(ActiveState)).call(this, node));\n\n    _this4.classList.push('rx-_-mouse-overed');\n    _this4.enter = function () {\n      rxEditor.activedLabel.show(node.label, node, 1);\n    };\n    _this4.leave = function () {\n      rxEditor.activedLabel.hide();\n    };\n    _this4.onMouseout = function () {\n      //console.log('mouse out')\n      _this4.node.changeToState('normalState');\n    };\n    _this4.onMouseover = function (event) {\n      if (!rxEditor.commandManager.movingCommand) {\n        rxEditor.clearActiveStates();\n        _this4.node.changeToState('activeState');\n      }\n    };\n    return _this4;\n  }\n\n  return ActiveState;\n}(CanDropState);\n\nvar FocusState = function (_CanDropState4) {\n  _inherits(FocusState, _CanDropState4);\n\n  function FocusState(node) {\n    _classCallCheck(this, FocusState);\n\n    var _this5 = _possibleConstructorReturn(this, (FocusState.__proto__ || Object.getPrototypeOf(FocusState)).call(this, node));\n\n    _this5.classList.push('rx-_-focused');\n    _this5.enter = function () {\n      var dom = node.view.$dom;\n      rxEditor.focusedLabel.show(node.label, node, 2);\n      rxEditor.toolbar.show(node);\n      rxEditor.focusedNode = node;\n    };\n    _this5.leave = function () {\n      rxEditor.focusedLabel.hide();\n      rxEditor.toolbar.hide();\n      rxEditor.focusedNode = '';\n    };\n    _this5.onClick = function (event) {\n      event.stopPropagation();\n    };\n\n    _this5.onBegindrag = function (event) {\n      //if(this.node.draggable){\n      _this5.preventDefault;\n      rxEditor.commandManager.startMove(_this5.node);\n      rxEditor.beginFollowMouse(event);\n      _this5.node.changeToState('draggedState');\n      //}\n    };\n    return _this5;\n  }\n\n  return FocusState;\n}(CanDropState);\n\nvar DisableState = function (_NodeState2) {\n  _inherits(DisableState, _NodeState2);\n\n  function DisableState(node) {\n    _classCallCheck(this, DisableState);\n\n    var _this6 = _possibleConstructorReturn(this, (DisableState.__proto__ || Object.getPrototypeOf(DisableState)).call(this, node));\n\n    _this6.onMousemove = function (event) {\n      event.preventDefault();\n      rxEditor.followMouse(event);\n      //console.log('mouse move DisableState')\n    };\n    _this6.onMouseout = function (event) {\n      event.preventDefault();\n    };\n    return _this6;\n  }\n\n  return DisableState;\n}(NodeState);\n\nvar DraggedState = function (_DisableState) {\n  _inherits(DraggedState, _DisableState);\n\n  function DraggedState(node) {\n    _classCallCheck(this, DraggedState);\n\n    var _this7 = _possibleConstructorReturn(this, (DraggedState.__proto__ || Object.getPrototypeOf(DraggedState)).call(this, node));\n\n    _this7.classList.push('rx-_-dragged');\n    _this7.enter = function () {\n      document.body.classList.add('one-element-dragged');\n    };\n    _this7.leave = function () {\n      document.body.classList.remove('one-element-dragged');\n    };\n    return _this7;\n  }\n\n  return DraggedState;\n}(DisableState);\n\nvar EditState = function (_FocusState) {\n  _inherits(EditState, _FocusState);\n\n  function EditState(node) {\n    _classCallCheck(this, EditState);\n\n    var _this8 = _possibleConstructorReturn(this, (EditState.__proto__ || Object.getPrototypeOf(EditState)).call(this, node));\n\n    _this8.classList.push('rx-_-editing');\n    _this8.enter = function () {\n      _this8.attributes.contenteditable = 'true';\n      var dom = node.view.$dom;\n      rxEditor.focusedLabel.show(node.label, node, 2);\n      rxEditor.toolbar.show(node);\n      rxEditor.focusedNode = node;\n      rxEditor.miniEditbar.show(_this8.node.view.$dom);\n      rxEditor.commandManager.startEditText(node);\n      node.render();\n    };\n\n    _this8.leave = function () {\n      rxEditor.focusedLabel.hide();\n      rxEditor.toolbar.hide();\n      rxEditor.focusedNode = '';\n      rxEditor.miniEditbar.hide();\n\n      rxEditor.commandManager.finishEditText();\n      _this8.node.render();\n    };\n    return _this8;\n  }\n\n  return EditState;\n}(FocusState);\n\nvar PreviewState = function (_NodeState3) {\n  _inherits(PreviewState, _NodeState3);\n\n  function PreviewState(node) {\n    _classCallCheck(this, PreviewState);\n\n    var _this9 = _possibleConstructorReturn(this, (PreviewState.__proto__ || Object.getPrototypeOf(PreviewState)).call(this, node));\n\n    _this9.onClick = function () {};\n    return _this9;\n  }\n\n  _createClass(PreviewState, [{\n    key: 'addtionToModel',\n    value: function addtionToModel(model) {\n      return model;\n    }\n  }]);\n\n  return PreviewState;\n}(NodeState);\n\n/***/ }),\n\n/***/ 352:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CanvasState; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__basic_object_state__ = __webpack_require__(233);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar CanvasState = function (_ObjectState) {\n  _inherits(CanvasState, _ObjectState);\n\n  function CanvasState() {\n    _classCallCheck(this, CanvasState);\n\n    var _this = _possibleConstructorReturn(this, (CanvasState.__proto__ || Object.getPrototypeOf(CanvasState)).call(this));\n\n    _this.__screenWidth = 'md';\n    _this.__preview = false;\n    _this.__showMarginX = true;\n    _this.__showMarginY = true;\n    _this.__showOutline = true;\n    _this.__showLabel = true;\n\n    return _this;\n  }\n\n  _createClass(CanvasState, [{\n    key: 'screenWidth',\n    get: function get() {\n      return this.__screenWidth;\n    },\n    set: function set(screenWidth) {\n      if (this.__screenWidth == screenWidth) {\n        return;\n      }\n      this.__screenWidth = screenWidth;\n      this.distributeEvent('screenWidth');\n    }\n  }, {\n    key: 'preview',\n    get: function get() {\n      return this.__preview;\n    },\n    set: function set(preview) {\n      if (this.__preview == preview) {\n        return;\n      }\n      this.__preview = preview;\n      this.distributeEvent('preview');\n    }\n  }, {\n    key: 'showMarginX',\n    get: function get() {\n      return this.__showMarginX;\n    },\n    set: function set(showMarginX) {\n      if (this.__showMarginX == showMarginX) {\n        return;\n      }\n      this.__showMarginX = showMarginX;\n      this.distributeEvent('showMarginX');\n    }\n  }, {\n    key: 'showMarginY',\n    get: function get() {\n      return this.__showMarginY;\n    },\n    set: function set(showMarginY) {\n      if (this.__showMarginY == showMarginY) {\n        return;\n      }\n      this.__showMarginY = showMarginY;\n      this.distributeEvent('showMarginY');\n    }\n  }, {\n    key: 'showOutline',\n    get: function get() {\n      return this.__showOutline;\n    },\n    set: function set(showOutline) {\n      if (this.__showOutline == showOutline) {\n        return;\n      }\n      this.__showOutline = showOutline;\n      this.distributeEvent('showOutline');\n    }\n  }, {\n    key: 'showLabel',\n    get: function get() {\n      return this.__showLabel;\n    },\n    set: function set(showLabel) {\n      if (this.__showLabel == showLabel) {\n        return;\n      }\n      this.__showLabel = showLabel;\n      this.distributeEvent('showLabel');\n    }\n  }]);\n\n  return CanvasState;\n}(__WEBPACK_IMPORTED_MODULE_0__basic_object_state__[\"a\" /* ObjectState */]);\n\n/***/ }),\n\n/***/ 353:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CommadManager; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction insterAfter(newElement, targetElement) {\n  var parent = targetElement.parentNode;\n  if (parent.lastChild == targetElement) {\n    parent.appendChild(newElement);\n  } else {\n    parent.insertBefore(newElement, targetElement.nextSibling);\n  }\n}\n\nvar CommandMovable = function () {\n  function CommandMovable(node) {\n    _classCallCheck(this, CommandMovable);\n\n    this.node = node;\n    this.oldParent = node.parent;\n    this.oldnNextSbiling = node.nextSbiling();\n  }\n\n  _createClass(CommandMovable, [{\n    key: 'moveInTop',\n    value: function moveInTop(targetParent) {\n      this.node.moveInTop(targetParent);\n      this.storeNewInfo();\n    }\n  }, {\n    key: 'moveBefore',\n    value: function moveBefore(brother) {\n      this.node.moveBefore(brother);\n      this.storeNewInfo();\n    }\n  }, {\n    key: 'moveAfter',\n    value: function moveAfter(brother) {\n      this.node.moveAfter(brother);\n      this.storeNewInfo();\n    }\n  }, {\n    key: 'moveIn',\n    value: function moveIn(targetParent) {\n      this.node.moveIn(targetParent);\n      this.storeNewInfo();\n    }\n  }, {\n    key: 'storeNewInfo',\n    value: function storeNewInfo() {\n      this.newParent = this.node.parent;\n      this.newNextSbiling = this.node.nextSbiling();\n    }\n  }, {\n    key: 'adoptFromToolbox',\n    value: function adoptFromToolbox(parent) {\n      var draggedNode = this.node;\n      if (draggedNode && !draggedNode.parent && parent.canAccept(draggedNode)) {\n        draggedNode.parent = parent;\n        draggedNode.render();\n        draggedNode.changeToState('draggedState');\n      }\n    }\n  }, {\n    key: 'finish',\n    value: function finish() {\n      var draggedNode = this.node;\n      if (draggedNode.parent) {\n        draggedNode.parent.changeToState('normalState');\n      }\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'excute',\n    value: function excute() {\n      this.node.removeFromParent();\n      if (this.newNextSbiling) {\n        this.node.moveBefore(this.newNextSbiling);\n      } else if (this.newParent) {\n        this.newParent.pushChild(this.node);\n      }\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      this.node.removeFromParent();\n      if (this.oldnNextSbiling) {\n        this.node.moveBefore(this.oldnNextSbiling);\n      } else if (this.oldParent) {\n        this.oldParent.pushChild(this.node);\n      }\n\n      this.makeUndoSchema();\n    }\n  }]);\n\n  return CommandMovable;\n}();\n\nvar CommandNew = function (_CommandMovable) {\n  _inherits(CommandNew, _CommandMovable);\n\n  function CommandNew(node) {\n    _classCallCheck(this, CommandNew);\n\n    return _possibleConstructorReturn(this, (CommandNew.__proto__ || Object.getPrototypeOf(CommandNew)).call(this, node));\n  }\n\n  _createClass(CommandNew, [{\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'new',\n        node: this.node.toTreeViewNode(),\n        parentId: this.node.parent ? this.node.parent.id : '',\n        nextSblilingId: this.node.nextSbiling() ? this.node.nextSbiling().id : ''\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'delete',\n        nodeId: this.node.id\n      };\n    }\n  }]);\n\n  return CommandNew;\n}(CommandMovable);\n\nvar CommandMove = function (_CommandMovable2) {\n  _inherits(CommandMove, _CommandMovable2);\n\n  function CommandMove(node) {\n    _classCallCheck(this, CommandMove);\n\n    return _possibleConstructorReturn(this, (CommandMove.__proto__ || Object.getPrototypeOf(CommandMove)).call(this, node));\n  }\n\n  _createClass(CommandMove, [{\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'move',\n        nodeId: this.node.id,\n        oldParentId: this.oldParent ? this.oldParent.id : '',\n        parentId: this.node.parent ? this.node.parent.id : '',\n        nextSblilingId: this.node.nextSbiling() ? this.node.nextSbiling().id : ''\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'move',\n        nodeId: this.node.id,\n        oldParentId: this.newParent ? this.newParent.id : '',\n        parentId: this.node.parent ? this.node.parent.id : '',\n        nextSblilingId: this.node.nextSbiling() ? this.node.nextSbiling().id : ''\n      };\n    }\n  }]);\n\n  return CommandMove;\n}(CommandMovable);\n\nvar CommandDelete = function () {\n  function CommandDelete(node) {\n    _classCallCheck(this, CommandDelete);\n\n    this.node = node;\n    this.oldParent = node.parent;\n    this.oldnNextSbiling = this.node.nextSbiling();\n  }\n\n  _createClass(CommandDelete, [{\n    key: 'excute',\n    value: function excute() {\n      this.node.removeFromParent();\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      if (this.oldnNextSbiling) {\n        this.node.moveBefore(this.oldnNextSbiling);\n      } else {\n        this.oldParent.pushChild(this.node);\n      }\n      this.makeUndoSchema();\n    }\n  }, {\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'delete',\n        nodeId: this.node.id\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'new',\n        node: this.node.toTreeViewNode(),\n        parentId: this.node.parent ? this.node.parent.id : '',\n        nextSblilingId: this.node.nextSbiling() ? this.node.nextSbiling().id : ''\n      };\n    }\n  }]);\n\n  return CommandDelete;\n}();\n\nvar CommandClone = function () {\n  function CommandClone(node) {\n    _classCallCheck(this, CommandClone);\n\n    this.node = node;\n    this.copy = node.clone();\n  }\n\n  _createClass(CommandClone, [{\n    key: 'excute',\n    value: function excute() {\n      this.copy.moveAfter(this.node);\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      this.copy.removeFromParent();\n      this.makeUndoSchema();\n    }\n  }, {\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'new',\n        node: this.copy.toTreeViewNode(),\n        parentId: this.copy.parent ? this.copy.parent.id : '',\n        nextSblilingId: this.copy.nextSbiling() ? this.copy.nextSbiling().id : ''\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'delete',\n        nodeId: this.copy.id\n      };\n    }\n  }]);\n\n  return CommandClone;\n}();\n\nvar CommandChangeNode = function () {\n  function CommandChangeNode(node, newMeta) {\n    _classCallCheck(this, CommandChangeNode);\n\n    this.node = node;\n    this.oldMeta = JSON.parse(JSON.stringify(node.meta));\n    this.newMeta = JSON.parse(JSON.stringify(newMeta));\n  }\n\n  _createClass(CommandChangeNode, [{\n    key: 'excute',\n    value: function excute() {\n      this.node.meta = JSON.parse(JSON.stringify(this.newMeta));\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      this.node.meta = JSON.parse(JSON.stringify(this.oldMeta));\n      this.makeUndoSchema();\n    }\n  }, {\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'change',\n        nodeId: this.node.id,\n        meta: this.node.meta\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'change',\n        nodeId: this.node.id,\n        meta: this.node.meta\n      };\n    }\n  }]);\n\n  return CommandChangeNode;\n}();\n\nvar CommandTextEdit = function () {\n  function CommandTextEdit(node) {\n    _classCallCheck(this, CommandTextEdit);\n\n    this.node = node;\n    this.oldChildren = this.node.children;\n\n    this.node.children.forEach(function (chilid) {\n      chilid.preview();\n    });\n  }\n\n  _createClass(CommandTextEdit, [{\n    key: 'finish',\n    value: function finish() {\n      var _this3 = this;\n\n      this.node.children = rxEditor.nodeParser.parse(this.node.view.$dom.innerHTML);\n\n      this.node.children.forEach(function (child) {\n        child.parent = _this3.node;\n      });\n      this.newChildren = this.node.children;\n    }\n  }, {\n    key: 'excute',\n    value: function excute() {\n      this.node.children = this.newChildren;\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      this.node.children = this.oldChildren;\n      this.makeUndoSchema();\n    }\n  }, {\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'textEdit',\n        nodeId: this.node.id,\n        node: this.node.toTreeViewNode()\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'textEdit',\n        nodeId: this.node.id,\n        node: this.node.toTreeViewNode()\n      };\n    }\n  }]);\n\n  return CommandTextEdit;\n}();\n\nvar CommandLoadCanvasHtml = function () {\n  function CommandLoadCanvasHtml(newHtml) {\n    var _this4 = this;\n\n    _classCallCheck(this, CommandLoadCanvasHtml);\n\n    this.node = rxEditor.canvas;\n    this.oldChildren = this.node.children;\n    this.node.children = rxEditor.nodeParser.parse(newHtml);\n    this.node.children.forEach(function (child) {\n      child.parent = _this4.node;\n    });\n    this.newChildren = this.node.children;\n  }\n\n  _createClass(CommandLoadCanvasHtml, [{\n    key: 'excute',\n    value: function excute() {\n      this.node.children = this.newChildren;\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      this.node.children = this.oldChildren;\n      this.makeUndoSchema();\n    }\n  }, {\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'loadCanvasNodes',\n        nodes: this.node.toTreeViewNode().children\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'loadCanvasNodes',\n        nodes: this.node.toTreeViewNode().children\n      };\n    }\n  }]);\n\n  return CommandLoadCanvasHtml;\n}();\n\nvar CommandClearCanvas = function () {\n  function CommandClearCanvas() {\n    _classCallCheck(this, CommandClearCanvas);\n\n    this.node = rxEditor.canvas;\n    this.oldChildren = this.node.children;\n    this.node.children = [];\n    this.newChildren = this.node.children;\n  }\n\n  _createClass(CommandClearCanvas, [{\n    key: 'excute',\n    value: function excute() {\n      this.node.children = this.newChildren;\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      this.node.children = this.oldChildren;\n      this.makeUndoSchema();\n    }\n  }, {\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'loadCanvasNodes',\n        nodes: this.node.toTreeViewNode().children\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'loadCanvasNodes',\n        nodes: this.node.toTreeViewNode().children\n      };\n    }\n  }]);\n\n  return CommandClearCanvas;\n}();\n\nvar CommandLoadNodeHtml = function () {\n  function CommandLoadNodeHtml(node, newHtml) {\n    var _this5 = this;\n\n    _classCallCheck(this, CommandLoadNodeHtml);\n\n    this.node = node;\n    this.oldChildren = this.node.children;\n    this.oldMeta = this.node.meta;\n    this.node.children = [];\n    var nodes = rxEditor.nodeParser.parse(newHtml);\n    if (nodes.length > 0) {\n      var newNode = nodes[0];\n      newNode.children.forEach(function (child) {\n        child.parent = _this5.node;\n        _this5.node.children.push(child);\n      });\n      this.node.meta = newNode.meta;\n    }\n    this.newMeta = this.node.meta;\n    this.newChildren = this.node.children;\n  }\n\n  _createClass(CommandLoadNodeHtml, [{\n    key: 'excute',\n    value: function excute() {\n      this.node.children = this.newChildren;\n      this.node.meta = this.newMeta;\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      this.node.children = this.oldChildren;\n      this.node.meta = this.oldMeta;\n      this.makeUndoSchema();\n    }\n  }, {\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'loadNode',\n        nodeId: this.node.id,\n        node: this.node.toTreeViewNode()\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'loadNode',\n        nodeId: this.node.id,\n        node: this.node.toTreeViewNode()\n      };\n    }\n  }]);\n\n  return CommandLoadNodeHtml;\n}();\n\nvar CommadManager = function () {\n  function CommadManager() {\n    _classCallCheck(this, CommadManager);\n\n    this.undoCommands = [];\n    this.redoCommands = [];\n    this.onCommandsChanged = function (canUndo, canRedo) {};\n  }\n\n  _createClass(CommadManager, [{\n    key: 'getDraggedNode',\n    value: function getDraggedNode() {\n      if (this.movingCommand) {\n        return this.movingCommand.node;\n      }\n    }\n  }, {\n    key: 'startNew',\n    value: function startNew(node) {\n      var cmd = new CommandNew(node);\n      this.startCommand(cmd);\n    }\n  }, {\n    key: 'startMove',\n    value: function startMove(node) {\n      var cmd = new CommandMove(node);\n      this.startCommand(cmd);\n    }\n  }, {\n    key: 'duplicate',\n    value: function duplicate(node) {\n      var cmd = new CommandClone(node);\n      cmd.excute();\n      this.finished(cmd);\n      cmd.node.changeToState('normalState');\n      cmd.copy.changeToState('focusState');\n    }\n  }, {\n    key: 'changeNode',\n    value: function changeNode(node, newNodeData) {\n      //node.meta = newNodeData.meta\n      var cmd = new CommandChangeNode(node, newNodeData.meta);\n      cmd.excute();\n      this.finished(cmd);\n    }\n  }, {\n    key: 'deleteNode',\n    value: function deleteNode(node) {\n      var cmd = new CommandDelete(node);\n      cmd.excute();\n      this.finished(cmd);\n      rxEditor.toolbar.hide();\n      rxEditor.focusedLabel.hide();\n    }\n  }, {\n    key: 'loadNodeHtml',\n    value: function loadNodeHtml(node, html) {\n      var cmd = new CommandLoadNodeHtml(node, html);\n      cmd.excute();\n      this.finished(cmd);\n    }\n  }, {\n    key: 'loadCanvasHtml',\n    value: function loadCanvasHtml(html) {\n      var cmd = new CommandLoadCanvasHtml(html);\n      cmd.excute();\n      this.finished(cmd);\n    }\n  }, {\n    key: 'clearCanvas',\n    value: function clearCanvas() {\n      var cmd = new CommandClearCanvas();\n      cmd.excute();\n      this.finished(cmd);\n    }\n  }, {\n    key: 'startCommand',\n    value: function startCommand(command) {\n      this.movingCommand = command;\n    }\n  }, {\n    key: 'finishMoving',\n    value: function finishMoving() {\n\n      if (this.movingCommand && this.movingCommand.node.parent) {\n        //this.movingCommand.finish()\n        this.finished(this.movingCommand);\n        this.movingCommand.node.changeToState('focusState');\n      }\n      this.movingCommand = '';\n    }\n  }, {\n    key: 'startEditText',\n    value: function startEditText(node) {\n      this.textCommand = new CommandTextEdit(node);\n    }\n  }, {\n    key: 'finishEditText',\n    value: function finishEditText() {\n      this.textCommand.finish();\n      this.finished(this.textCommand);\n      this.textCommand = '';\n    }\n  }, {\n    key: 'finished',\n    value: function finished(command) {\n      this.undoCommands.push(command);\n      this.redoCommands.length = 0;\n      this.submitChanged(command);\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      var command = this.undoCommands.pop();\n      command.undo();\n      this.redoCommands.push(command);\n      this.submitChanged(command);\n    }\n  }, {\n    key: 'redo',\n    value: function redo() {\n      var command = this.redoCommands.pop();\n      command.excute();\n      this.undoCommands.push(command);\n      this.submitChanged(command);\n    }\n  }, {\n    key: 'submitChanged',\n    value: function submitChanged(command) {\n      this.onCommandsChanged(this.undoCommands.length > 0, this.redoCommands.length > 0, command.commandSchema);\n    }\n  }]);\n\n  return CommadManager;\n}();\n\n/***/ }),\n\n/***/ 354:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return NodeLabel; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__ = __webpack_require__(42);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar NodeLabel = function (_RXComponent) {\n  _inherits(NodeLabel, _RXComponent);\n\n  function NodeLabel() {\n    _classCallCheck(this, NodeLabel);\n\n    var _this = _possibleConstructorReturn(this, (NodeLabel.__proto__ || Object.getPrototypeOf(NodeLabel)).call(this));\n\n    _this.cssClass('node-label');\n    _this.domAttr('title', $t('can-be-draged'));\n    _this.hide();\n    document.addEventListener('scroll', function (event) {\n      _this.refreshPosition();\n    });\n    window.addEventListener('resize', function (event) {\n      _this.refreshPosition();\n    });\n    return _this;\n  }\n\n  _createClass(NodeLabel, [{\n    key: 'refreshPosition',\n    value: function refreshPosition() {\n      this.followElement(this.node, this.offset);\n    }\n  }, {\n    key: 'show',\n    value: function show(label, node, offset) {\n      this.node = node;\n      this.offset = offset;\n      if (!node || !node.view.$dom) return;\n      _get(NodeLabel.prototype.__proto__ || Object.getPrototypeOf(NodeLabel.prototype), 'setInnerHTML', this).call(this, label);\n      this.followElement(node, offset);\n      return _get(NodeLabel.prototype.__proto__ || Object.getPrototypeOf(NodeLabel.prototype), 'show', this).call(this);\n    }\n  }, {\n    key: 'followElement',\n    value: function followElement(node, offset) {\n      if (!node || !node.view || !node.view.$dom) return;\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.x + 'px';\n        if (rect.y < 20) {\n          this.$dom.style.top = rect.y + rect.height + offset + 'px';\n        } else {\n          this.$dom.style.top = rect.y - 15 - offset + 'px';\n        }\n      }\n    }\n  }]);\n\n  return NodeLabel;\n}(__WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__[\"a\" /* RXComponent */]);\n\n/***/ }),\n\n/***/ 355:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return NodeToolbar; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__ = __webpack_require__(42);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar SvgButton = function (_RXComponent) {\n  _inherits(SvgButton, _RXComponent);\n\n  function SvgButton(title, svg, on, callback) {\n    _classCallCheck(this, SvgButton);\n\n    var _this = _possibleConstructorReturn(this, (SvgButton.__proto__ || Object.getPrototypeOf(SvgButton)).call(this));\n\n    _this.cssClass('rx-button');\n    _this.domAttr('title', title);\n    _this.innerHTML = svg;\n    _this.domOn(on, callback);\n    return _this;\n  }\n\n  return SvgButton;\n}(__WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__[\"a\" /* RXComponent */]);\n\nvar svgArrowUp = '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"arrow-up\" class=\"svg-inline--fa fa-arrow-up fa-w-14\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"currentColor\" d=\"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z\"></path></svg>';\n\nvar svgMove = '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"arrows-alt\" class=\"svg-inline--fa fa-arrows-alt fa-w-16\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"currentColor\" d=\"M352.201 425.775l-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z\"></path></svg>';\n\nvar svgEdit = '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"edit\" class=\"svg-inline--fa fa-edit fa-w-18\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path fill=\"currentColor\" d=\"M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z\"></path></svg>';\n\nvar svgClone = '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"clone\" class=\"svg-inline--fa fa-clone fa-w-16\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"currentColor\" d=\"M464 0H144c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h320c26.51 0 48-21.49 48-48v-48h48c26.51 0 48-21.49 48-48V48c0-26.51-21.49-48-48-48zM362 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h42v224c0 26.51 21.49 48 48 48h224v42a6 6 0 0 1-6 6zm96-96H150a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h308a6 6 0 0 1 6 6v308a6 6 0 0 1-6 6z\"></path></svg>';\n\nvar svgRemove = '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"trash-alt\" class=\"svg-inline--fa fa-trash-alt fa-w-14\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"currentColor\" d=\"M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z\"></path></svg>';\n\nvar NodeToolbar = function (_RXComponent2) {\n  _inherits(NodeToolbar, _RXComponent2);\n\n  function NodeToolbar() {\n    _classCallCheck(this, NodeToolbar);\n\n    var _this2 = _possibleConstructorReturn(this, (NodeToolbar.__proto__ || Object.getPrototypeOf(NodeToolbar)).call(this));\n\n    _this2.cssClass('node-toolbar');\n    _this2.hide();\n\n    _this2.duplicateBtn = new SvgButton($t('duplicate'), svgClone, 'click', function () {\n      if (rxEditor.focusedNode) {\n        rxEditor.focusedNode.duplicate(event);\n      }\n    });\n\n    _this2.pushChild(new SvgButton($t('focus-parent'), svgArrowUp, 'click', function () {\n      if (rxEditor.focusedNode) {\n        rxEditor.focusedNode.up(event);\n      }\n    }));\n    _this2.pushChild(new SvgButton($t('move'), svgMove, 'mousedown', function (event) {\n      if (rxEditor.focusedNode) {\n        rxEditor.focusedNode.begindragIcon(event);\n      }\n    })\n    //.cssStyle('cursor', 'move')\n    );\n    _this2.editButton = new SvgButton($t('edit'), svgEdit, 'mousedown', function (event) {\n      rxEditor.focusedNode.changeToState('editState');\n    });\n\n    _this2.editButton.domOn('mouseup', function (event) {\n      //move cusor to end\n      var el = rxEditor.focusedNode.view.$dom;\n      var sel = window.getSelection();\n      if (el.childNodes.length > 0) {\n        sel.collapse(el, 1);\n      }\n      el.focus();\n    });\n    _this2.pushChild(_this2.editButton);\n    _this2.pushChild(_this2.duplicateBtn);\n    _this2.pushChild(new SvgButton($t('delete'), svgRemove, 'click', function () {\n      if (rxEditor.focusedNode) {\n        rxEditor.focusedNode.delete(event);\n      }\n    }));\n\n    document.addEventListener('scroll', function (event) {\n      _this2.refreshPosition();\n    });\n    window.addEventListener('resize', function (event) {\n      _this2.refreshPosition();\n    });\n    return _this2;\n  }\n\n  _createClass(NodeToolbar, [{\n    key: 'refreshPosition',\n    value: function refreshPosition() {\n      this.followElement(this.node);\n    }\n  }, {\n    key: 'show',\n    value: function show(node) {\n      this.node = node;\n      if (!node || !node.view.$dom) return;\n      this.followElement(node);\n      if (this.node.rule.editable) {\n        this.editButton.show();\n      } else {\n        this.editButton.hide();\n      }\n      //if(this.node.forbidDuplicate){\n      //  this.duplicateBtn.hide()\n      //}\n      //else{\n      //  this.duplicateBtn.show()\n      //}\n      return _get(NodeToolbar.prototype.__proto__ || Object.getPrototypeOf(NodeToolbar.prototype), 'show', this).call(this);\n    }\n  }, {\n    key: 'followElement',\n    value: function followElement(node) {\n      if (!node || !node.view || !node.view.$dom) return;\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      var offsetX = this.node.rule.editable ? 0 : 25;\n      if (this.$dom) {\n        var x = rect.x + rect.width - 120;\n        x = x < 0 ? 0 : x;\n        this.$dom.style.left = x + offsetX + 'px';\n        if (rect.y < 26) {\n          this.$dom.style.top = rect.y + rect.height + 'px';\n        } else {\n          this.$dom.style.top = rect.y - 26 + 'px';\n        }\n      }\n    }\n  }]);\n\n  return NodeToolbar;\n}(__WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__[\"a\" /* RXComponent */]);\n\n/***/ }),\n\n/***/ 356:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RxCursor; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__ = __webpack_require__(42);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar RxCursor = function (_RXComponent) {\n  _inherits(RxCursor, _RXComponent);\n\n  function RxCursor() {\n    _classCallCheck(this, RxCursor);\n\n    var _this = _possibleConstructorReturn(this, (RxCursor.__proto__ || Object.getPrototypeOf(RxCursor)).call(this));\n\n    _this.cssClass('rx-cursor');\n    _this.cssClass('out');\n    _this.hide();\n    return _this;\n  }\n\n  _createClass(RxCursor, [{\n    key: 'hide',\n    value: function hide() {\n      this.position = '';\n      this.node = null;\n      _get(RxCursor.prototype.__proto__ || Object.getPrototypeOf(RxCursor.prototype), 'hide', this).call(this);\n    }\n  }, {\n    key: 'show',\n    value: function show(position, node) {\n      this.position = position;\n      this.node = node;\n      if (!node || !node.view.$dom) return;\n      this.classClasses();\n      this.cssClass('rx-cursor');\n      this.cssClass(position);\n      this.node = node;\n      if (position === 'in-top') {\n        this.inTop(node);\n      }\n\n      if (position === 'in-right') {\n        this.inRight(node);\n      }\n\n      if (position === 'in-bottom') {\n        this.inBottom(node);\n      }\n\n      if (position === 'in-left') {\n        this.inLeft(node);\n      }\n\n      if (position === 'out-top') {\n        this.outTop(node);\n      }\n\n      if (position === 'out-right') {\n        this.outRight(node);\n      }\n\n      if (position === 'out-bottom') {\n        this.outBottom(node);\n      }\n\n      if (position === 'out-left') {\n        this.outLeft(node);\n      }\n\n      if (position === 'char-left') {\n        this.charLeft(node);\n      }\n\n      if (position === 'char-right') {\n        this.charRight(node);\n      }\n\n      return _get(RxCursor.prototype.__proto__ || Object.getPrototypeOf(RxCursor.prototype), 'show', this).call(this);\n    }\n  }, {\n    key: 'outTop',\n    value: function outTop(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.left + 'px';\n        this.$dom.style.top = rect.top - 2 + 'px';\n        this.$dom.style.width = rect.width + 'px';\n        this.$dom.style.height = '4px';\n      }\n    }\n  }, {\n    key: 'outRight',\n    value: function outRight(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.right - 2 + 'px';\n        this.$dom.style.right = \"auto\";\n        this.$dom.style.top = rect.top + 'px';\n        this.$dom.style.width = '4px';\n        this.$dom.style.height = rect.height + 'px';\n      }\n    }\n  }, {\n    key: 'outBottom',\n    value: function outBottom(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.x + 'px';\n        this.$dom.style.top = rect.bottom - 2 + 'px';\n        this.$dom.style.bottom = 'auto';\n        this.$dom.style.width = rect.width + 'px';\n        this.$dom.style.height = '4px';\n      }\n    }\n  }, {\n    key: 'outLeft',\n    value: function outLeft(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.left - 2 + 'px';\n        this.$dom.style.right = 'auto';\n        this.$dom.style.top = rect.top + 'px';\n        this.$dom.style.width = '4px';\n        this.$dom.style.height = rect.height + 'px';\n      }\n    }\n  }, {\n    key: 'charRight',\n    value: function charRight(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.right - 2 + 'px';\n        this.$dom.style.right = \"auto\";\n        this.$dom.style.top = rect.top + 'px';\n        this.$dom.style.width = '4px';\n        this.$dom.style.height = rect.height + 'px';\n      }\n    }\n  }, {\n    key: 'charLeft',\n    value: function charLeft(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.left - 2 + 'px';\n        this.$dom.style.right = 'auto';\n        this.$dom.style.top = rect.top + 'px';\n        this.$dom.style.width = '4px';\n        this.$dom.style.height = rect.height + 'px';\n      }\n    }\n\n    /**/\n\n  }, {\n    key: 'inTop',\n    value: function inTop(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.left + 'px';\n        this.$dom.style.top = rect.top + 1 + 'px';\n        this.$dom.style.width = rect.width + 'px';\n        this.$dom.style.height = '4px';\n      }\n    }\n  }, {\n    key: 'inRight',\n    value: function inRight(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.right - 4 + 'px';\n        this.$dom.style.right = \"auto\";\n        this.$dom.style.top = rect.top + 'px';\n        this.$dom.style.width = '4px';\n        this.$dom.style.height = rect.height + 'px';\n      }\n    }\n  }, {\n    key: 'inBottom',\n    value: function inBottom(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.x + 'px';\n        this.$dom.style.top = rect.bottom - 4 + 'px';\n        this.$dom.style.bottom = 'auto';\n        this.$dom.style.width = rect.width + 'px';\n        this.$dom.style.height = '4px';\n      }\n    }\n  }, {\n    key: 'inLeft',\n    value: function inLeft(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.left + 'px';\n        this.$dom.style.right = 'auto';\n        this.$dom.style.top = rect.top + 'px';\n        this.$dom.style.width = '4px';\n        this.$dom.style.height = rect.height + 'px';\n      }\n    }\n  }, {\n    key: 'followElement',\n    value: function followElement(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.x + 'px';\n        this.$dom.style.top = rect.height / 2 + 'px';\n        //if(rect.y < 20){\n        //  this.$dom.style.top = (rect.y + rect.height) + 'px'\n        //}\n        //else{\n        //  this.$dom.style.top = (rect.y - 15 - offset) + 'px'\n        //}\n\n        this.$dom.style.width = rect.width + 'px';\n      }\n    }\n  }]);\n\n  return RxCursor;\n}(__WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__[\"a\" /* RXComponent */]);\n\n/***/ }),\n\n/***/ 357:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return MouseFollower; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__ = __webpack_require__(42);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar MouseFollower = function (_RXComponent) {\n  _inherits(MouseFollower, _RXComponent);\n\n  function MouseFollower() {\n    _classCallCheck(this, MouseFollower);\n\n    var _this = _possibleConstructorReturn(this, (MouseFollower.__proto__ || Object.getPrototypeOf(MouseFollower)).call(this));\n\n    _this.cssClass('mouse-follower');\n    _this.hide();\n    return _this;\n  }\n\n  _createClass(MouseFollower, [{\n    key: \"active\",\n    value: function active(text) {\n      _get(MouseFollower.prototype.__proto__ || Object.getPrototypeOf(MouseFollower.prototype), \"setInnerHTML\", this).call(this, text);\n      this.isActived = true;\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.isActived = false;\n      _get(MouseFollower.prototype.__proto__ || Object.getPrototypeOf(MouseFollower.prototype), \"hide\", this).call(this);\n    }\n  }, {\n    key: \"followMouse\",\n    value: function followMouse(event) {\n      this.$dom.style.left = event.clientX;\n      this.$dom.style.top = event.clientY;\n      _get(MouseFollower.prototype.__proto__ || Object.getPrototypeOf(MouseFollower.prototype), \"show\", this).call(this);\n    }\n  }]);\n\n  return MouseFollower;\n}(__WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__[\"a\" /* RXComponent */]);\n\n/***/ }),\n\n/***/ 358:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return MiniEditbar; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__basic_object_state__ = __webpack_require__(233);\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\nvar EditorState = function (_ObjectState) {\n  _inherits(EditorState, _ObjectState);\n\n  function EditorState() {\n    _classCallCheck(this, EditorState);\n\n    var _this = _possibleConstructorReturn(this, (EditorState.__proto__ || Object.getPrototypeOf(EditorState)).call(this));\n\n    _this.__bold = false;\n    _this.__italic = false;\n    _this.__underline = false;\n    _this.__strikeThrough = false;\n    _this.__isLink = false;\n    return _this;\n  }\n\n  _createClass(EditorState, [{\n    key: \"bold\",\n    get: function get() {\n      return this.__bold;\n    },\n    set: function set(bold) {\n      if (this.__bold == bold) {\n        return;\n      }\n      this.__bold = bold;\n      this.distributeEvent('bold');\n    }\n  }, {\n    key: \"italic\",\n    get: function get() {\n      return this.__italic;\n    },\n    set: function set(italic) {\n      if (this.__italic == italic) {\n        return;\n      }\n      this.__italic = italic;\n      this.distributeEvent('italic');\n    }\n  }, {\n    key: \"underline\",\n    get: function get() {\n      return this.__underline;\n    },\n    set: function set(underline) {\n      if (this.__underline == underline) {\n        return;\n      }\n      this.__underline = underline;\n      this.distributeEvent('underline');\n    }\n  }, {\n    key: \"strikeThrough\",\n    get: function get() {\n      return this.__strikeThrough;\n    },\n    set: function set(strikeThrough) {\n      if (this.__strikeThrough == strikeThrough) {\n        return;\n      }\n      this.__strikeThrough = strikeThrough;\n      this.distributeEvent('strikeThrough');\n    }\n  }, {\n    key: \"isLink\",\n    get: function get() {\n      return this.__isLink;\n    },\n    set: function set(isLink) {\n      if (this.__isLink == isLink) {\n        return;\n      }\n      this.__isLink = isLink;\n      this.distributeEvent('isLink');\n    }\n  }]);\n\n  return EditorState;\n}(__WEBPACK_IMPORTED_MODULE_1__basic_object_state__[\"a\" /* ObjectState */]);\n\nvar BarButton = function (_RXComponent) {\n  _inherits(BarButton, _RXComponent);\n\n  function BarButton(title, callback) {\n    _classCallCheck(this, BarButton);\n\n    var _this2 = _possibleConstructorReturn(this, (BarButton.__proto__ || Object.getPrototypeOf(BarButton)).call(this));\n\n    _this2.cssClass('mini-button');\n    _this2.domAttr('title', title);\n    _this2.domOn('click', callback);\n    return _this2;\n  }\n\n  return BarButton;\n}(__WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__[\"a\" /* RXComponent */]);\n\nvar isLink = function isLink() {\n  if (window.getSelection().toString !== '') {\n    var selection = window.getSelection();\n    selection = selection.rangeCount > 0 ? selection.getRangeAt(0) : '';\n    if (selection) {\n      if (selection.startContainer.parentNode.tagName === 'A' || selection.endContainer.parentNode.tagName === 'A') {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  }\n};\n\nvar MiniEditbar = function (_RXComponent2) {\n  _inherits(MiniEditbar, _RXComponent2);\n\n  function MiniEditbar() {\n    _classCallCheck(this, MiniEditbar);\n\n    var _this3 = _possibleConstructorReturn(this, (MiniEditbar.__proto__ || Object.getPrototypeOf(MiniEditbar)).call(this));\n\n    _this3.cssClass('mini-editbar');\n    _this3.hide();\n    _this3.state = new EditorState();\n\n    _this3.domOn('mousedown', function (event) {\n      event.preventDefault();\n    });\n\n    var boldBtn = new BarButton('Bold', function () {\n      document.execCommand('bold', false, null);\n      _this3.updateButtonsState();\n    }).cssClass('icon-button').setInnerHTML('<b>B</b>');\n\n    _this3.pushChild(boldBtn);\n\n    var italicBtn = new BarButton('Italic', function () {\n      document.execCommand('italic', false, null);\n      _this3.state.italic = !_this3.state.italic;\n    }).cssClass('icon-button').setInnerHTML('<i>I</i>');\n    _this3.pushChild(italicBtn);\n\n    var underlineBtn = new BarButton('Underline', function () {\n      document.execCommand('underline', false, null);\n      _this3.updateButtonsState();\n    }).cssClass('icon-button').setInnerHTML('<u>U</u>');\n    _this3.pushChild(underlineBtn);\n\n    var strikeBtn = new BarButton('Strike', function () {\n      document.execCommand('strikeThrough', false, null);\n      _this3.updateButtonsState();\n    }).cssClass('icon-button').setInnerHTML('<strike>S</strike>');\n    _this3.pushChild(strikeBtn);\n\n    var linkBtn = new BarButton('Link', function () {\n      if (_this3.state.isLink) {\n        document.execCommand('unlink', false, null);\n      } else {\n        document.execCommand('createLink', false, '#');\n      }\n      _this3.updateButtonsState();\n    }).cssClass('icon-button').setInnerHTML('<div style=\"transform:rotate(45deg)\"></div>');\n    _this3.pushChild(linkBtn);\n\n    document.onpaste = function (event) {\n      var plainText = event.clipboardData.getData('text/plain').replace(/[\\r\\n]/g, \"<br>\");\n      document.execCommand('insertHTML', false, plainText);\n      return false;\n    };\n\n    document.addEventListener('keydown', function (event) {\n      if (event.keyCode === 13) {\n        document.execCommand('insertHTML', false, '<br>');\n        event.preventDefault();\n        return false;\n      }\n    });\n\n    /*let codeBtn = new BarButton('Switch Code Editor', ()=>{\r\n        this.updateButtonsState()\r\n      })\r\n      .cssClass('icon-button')\r\n      .setInnerHTML('<div\"><></div>')\r\n    this.pushChild( codeBtn )\r\n    let btnInsert = new BarButton('Bootstrap Styles', ()=>{\r\n      })\r\n      .cssClass('mini-styles')\r\n      .setInnerHTML('Insert <span></span>')\r\n    this.pushChild( btnInsert )*/\n\n    _this3.watchOne('bold', boldBtn);\n    _this3.watchOne('italic', italicBtn);\n    _this3.watchOne('underline', underlineBtn);\n    _this3.watchOne('strikeThrough', strikeBtn);\n    _this3.watchOne('isLink', linkBtn);\n    document.addEventListener('scroll', function (event) {\n      _this3.followElement(_this3.domElement);\n    });\n    window.addEventListener('resize', function (event) {\n      _this3.followElement(_this3.domElement);\n    });\n    return _this3;\n  }\n\n  _createClass(MiniEditbar, [{\n    key: \"watchOne\",\n    value: function watchOne(stateName, btn) {\n      var _this4 = this;\n\n      this.state.watch(stateName, function () {\n        if (_this4.state[stateName]) {\n          btn.cssClass('active');\n        } else {\n          btn.removeCssClass('active');\n        }\n      });\n    }\n  }, {\n    key: \"show\",\n    value: function show(followElement) {\n      var _this5 = this;\n\n      if (!followElement) return;\n      this.followElement(followElement);\n      this.updateButtonsState();\n      document.addEventListener(\"selectionchange\", function (event) {\n        _this5.updateButtonsState();\n      });\n      return _get(MiniEditbar.prototype.__proto__ || Object.getPrototypeOf(MiniEditbar.prototype), \"show\", this).call(this);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      var _this6 = this;\n\n      document.removeEventListener(\"selectionchange\", function (event) {\n        _this6.updateButtonsState();\n      });\n      return _get(MiniEditbar.prototype.__proto__ || Object.getPrototypeOf(MiniEditbar.prototype), \"hide\", this).call(this);\n    }\n  }, {\n    key: \"updateButtonsState\",\n    value: function updateButtonsState() {\n      if (!this.isShow()) {\n        return;\n      }\n      this.state.bold = document.queryCommandState('bold');\n      this.state.italic = document.queryCommandState('italic');\n      this.state.underline = document.queryCommandState('underline');\n      this.state.strikeThrough = document.queryCommandState('strikeThrough');\n      this.state.isLink = isLink();\n    }\n  }, {\n    key: \"followElement\",\n    value: function followElement(domElement) {\n      if (!domElement) return;\n      this.domElement = domElement;\n      var rect = domElement.getBoundingClientRect();\n      var height = 32;\n      if (this.$dom) {\n        this.$dom.style.left = rect.x - 1 + 'px';\n        if (rect.y < height) {\n          this.$dom.style.top = rect.y + rect.height + 'px';\n        } else {\n          this.$dom.style.top = rect.y - height + 'px';\n        }\n      }\n    }\n  }]);\n\n  return MiniEditbar;\n}(__WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__[\"a\" /* RXComponent */]);\n\n/***/ }),\n\n/***/ 359:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return NodeParser; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__nodes_class_node_js__ = __webpack_require__(360);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__nodes_tag_node_js__ = __webpack_require__(362);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__nodes_text_node_js__ = __webpack_require__(236);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__rules__ = __webpack_require__(363);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__rules_common_rule__ = __webpack_require__(237);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n\nvar NodeParser = function () {\n  function NodeParser() {\n    _classCallCheck(this, NodeParser);\n\n    this.$dom = document.createElement('div');\n  }\n\n  _createClass(NodeParser, [{\n    key: 'parse',\n    value: function parse(html) {\n      this.$dom.innerHTML = html;\n\n      //console.log(this.$dom.childNodes)\n      var nodes = [];\n      for (var i = 0; i < this.$dom.childNodes.length; i++) {\n        var node = this.paraseNode(this.$dom.childNodes[i]);\n        if (node) {\n          nodes.push(node);\n        }\n      }\n      return nodes;\n    }\n  }, {\n    key: 'paraseNode',\n    value: function paraseNode(element, parent) {\n      var node;\n      if (element.nodeType === 3) {\n        var text = element.textContent; //.trim()\n        if (!text) {\n          return '';\n        }\n        var _node = new __WEBPACK_IMPORTED_MODULE_2__nodes_text_node_js__[\"a\" /* TextNode */](text);\n        _node.parent = parent;\n        return _node;\n      }\n\n      //\n      if (element.nodeType === 8) {\n        return '';\n      }\n\n      if (element.classList.contains('container')) {\n        node = new __WEBPACK_IMPORTED_MODULE_0__nodes_class_node_js__[\"a\" /* ClassNode */]('container');\n      }\n\n      var clssNode = this.parseClassNode(element);\n      node = clssNode ? clssNode : this.parseTagNode(element);\n\n      this.copyClassList(element.classList, node.meta.classList);\n      for (var i = 0; i < element.childNodes.length; i++) {\n        var child = element.childNodes[i];\n\n        var childNode = this.paraseNode(child, node);\n        if (childNode) {\n          node.children.push(childNode);\n        }\n      }\n\n      this.parseAttributes(node, element);\n      node.markDefaultMeta();\n\n      node.parent = parent;\n\n      return node;\n    }\n  }, {\n    key: 'parseAttributes',\n    value: function parseAttributes(node, element) {\n      var attrs = element.attributes;\n      for (var i = 0; i < attrs.length; i++) {\n        var attrName = attrs[i]['nodeName'];\n        var attrValue = attrs[i]['nodeValue'];\n        if (attrName.toLowerCase() !== \"class\") {\n          node.meta.attributes[attrName] = attrValue;\n        }\n      }\n    }\n  }, {\n    key: 'parseClassNode',\n    value: function parseClassNode(element) {\n      for (var ruleName in __WEBPACK_IMPORTED_MODULE_3__rules__[\"a\" /* default */].classRules) {\n        var rule = __WEBPACK_IMPORTED_MODULE_3__rules__[\"a\" /* default */].classRules[ruleName];\n        rule.classes = rule.classes ? rule.classes : [ruleName];\n\n        for (var i = 0; i < rule.classes.length; i++) {\n          var cssClass = rule.classes[i].toLowerCase();\n          if (element.classList.contains(cssClass)) {\n            var node = new __WEBPACK_IMPORTED_MODULE_0__nodes_class_node_js__[\"a\" /* ClassNode */](cssClass);\n            node.meta.tag = element.tagName.toLowerCase();\n            node.setLabel(rule.label ? rule.label : ruleName);\n            node.ruleName = ruleName;\n            node.rule = rule;\n            return node;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'parseTagNode',\n    value: function parseTagNode(element) {\n      var node;\n      var elTag = element.tagName.toLowerCase();\n      for (var ruleName in __WEBPACK_IMPORTED_MODULE_3__rules__[\"a\" /* default */].tagRules) {\n        var rule = __WEBPACK_IMPORTED_MODULE_3__rules__[\"a\" /* default */].tagRules[ruleName];\n        rule.tags = rule.tags ? rule.tags : [ruleName];\n        for (var i = 0; i < rule.tags.length; i++) {\n          var tag = rule.tags[i];\n          if (elTag === tag.toLowerCase()) {\n            node = new __WEBPACK_IMPORTED_MODULE_1__nodes_tag_node_js__[\"a\" /* TagNode */](tag);\n            node.setLabel(rule.label ? rule.label : ruleName);\n            node.ruleName = ruleName;\n            node.rule = rule;\n            return node;\n          }\n        }\n      }\n      node = new __WEBPACK_IMPORTED_MODULE_1__nodes_tag_node_js__[\"a\" /* TagNode */](elTag);\n      node.ruleName = elTag;\n      node.rule = Object.assign({}, __WEBPACK_IMPORTED_MODULE_4__rules_common_rule__[\"a\" /* default */]);\n      return node;\n    }\n  }, {\n    key: 'copyClassList',\n    value: function copyClassList(from, to) {\n      from.forEach(function (cssClass) {\n        if (cssClass.indexOf('rx-_-') !== 0) {\n          to.push(cssClass);\n        }\n      });\n    }\n  }]);\n\n  return NodeParser;\n}();\n\n/***/ }),\n\n/***/ 360:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ClassNode; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__rxnode_js__ = __webpack_require__(235);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__basic_rxarray__ = __webpack_require__(5);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\nvar ClassNode = function (_RXNode) {\n  _inherits(ClassNode, _RXNode);\n\n  function ClassNode(cssClass) {\n    _classCallCheck(this, ClassNode);\n\n    //add(cssClass, this.meta.classList)\n    var _this = _possibleConstructorReturn(this, (ClassNode.__proto__ || Object.getPrototypeOf(ClassNode)).call(this));\n\n    _this.cssClass = cssClass;\n    return _this;\n  }\n\n  _createClass(ClassNode, [{\n    key: \"make\",\n    value: function make() {\n      return new ClassNode(this.cssClass);\n    }\n  }]);\n\n  return ClassNode;\n}(__WEBPACK_IMPORTED_MODULE_0__rxnode_js__[\"a\" /* RXNode */]);\n\n/***/ }),\n\n/***/ 361:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CharNode; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__node_js__ = __webpack_require__(206);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__basic_rxarray__ = __webpack_require__(5);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\nvar CharNode = function (_Node) {\n  _inherits(CharNode, _Node);\n\n  function CharNode(char, parent) {\n    _classCallCheck(this, CharNode);\n\n    var _this = _possibleConstructorReturn(this, (CharNode.__proto__ || Object.getPrototypeOf(CharNode)).call(this));\n\n    _this.parent = parent;\n    _this.char = char;\n    _this.isCharNode = true;\n    _this.rule = {};\n    _this.rule.acceptedChildren = [];\n    _this.rule.editMarginStyle = {};\n    _this.rule.dropInMargin = 5;\n    return _this;\n  }\n\n  _createClass(CharNode, [{\n    key: 'make',\n    value: function make() {\n      return new CharNode();\n    }\n  }, {\n    key: 'changeTextnodeToCharNode',\n    value: function changeTextnodeToCharNode() {}\n  }, {\n    key: 'toViewModel',\n    value: function toViewModel() {\n      return {\n        styles: {},\n        classList: ['char-node'],\n        attributes: {},\n        innerHTML: this.char,\n        tag: 'span',\n        on: {\n          onmousemove: this.mousemove,\n          onmouseover: this.mouseover,\n          onmouseout: this.mouseout\n          //onclick:this.onclick,\n        }\n      };\n    }\n  }]);\n\n  return CharNode;\n}(__WEBPACK_IMPORTED_MODULE_0__node_js__[\"a\" /* Node */]);\n\n/***/ }),\n\n/***/ 362:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return TagNode; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__rxnode_js__ = __webpack_require__(235);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar TagNode = function (_RXNode) {\n  _inherits(TagNode, _RXNode);\n\n  function TagNode(tag) {\n    _classCallCheck(this, TagNode);\n\n    var _this = _possibleConstructorReturn(this, (TagNode.__proto__ || Object.getPrototypeOf(TagNode)).call(this));\n\n    _this.meta.tag = tag;\n    _this.label = tag;\n    _this.labelToCapitalize();\n    return _this;\n  }\n\n  _createClass(TagNode, [{\n    key: 'make',\n    value: function make() {\n      var node = new TagNode(this.meta.tag);\n      node.label = this.label;\n      return node;\n    }\n  }]);\n\n  return TagNode;\n}(__WEBPACK_IMPORTED_MODULE_0__rxnode_js__[\"a\" /* RXNode */]);\n\n/***/ }),\n\n/***/ 363:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__container__ = __webpack_require__(364);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__row__ = __webpack_require__(365);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__col__ = __webpack_require__(366);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__heading__ = __webpack_require__(367);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__common_rule__ = __webpack_require__(237);\n\n\n\n\n\n\n//ruleName:\n// -container\n// -row\n// -col\n// -heading\n\n//token \n//Labellabel\n//- label:''\n//\n//- acceptedChildren : '',\n//\n//- rejectChildren : '',\n//\n//  '--responsive--'  '','-sm', '-md', '-lg', '-xl'\n//classes ID\n//tags tagID\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  classRules: {\n    \"container\": __WEBPACK_IMPORTED_MODULE_0__container__[\"a\" /* default */],\n    \"row\": __WEBPACK_IMPORTED_MODULE_1__row__[\"a\" /* default */],\n    \"col\": __WEBPACK_IMPORTED_MODULE_2__col__[\"a\" /* default */],\n    \"w-100\": Object.assign({}, __WEBPACK_IMPORTED_MODULE_4__common_rule__[\"a\" /* default */]),\n    \"alert\": Object.assign({}, __WEBPACK_IMPORTED_MODULE_4__common_rule__[\"a\" /* default */])\n  },\n\n  tagRules: {\n    heading: __WEBPACK_IMPORTED_MODULE_3__heading__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ 364:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  dropInMargin: 10,\n  editable: false,\n  editMarginStyle: {\n    paddingX: '30px',\n    paddingY: '30px'\n  },\n  //\n  empertyMargin: true,\n\n  rejectChildren: ['col', 'thead', 'tbody', 'th', 'tr', 'td']\n});\n\n/***/ }),\n\n/***/ 365:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  dropInMargin: 10,\n  editable: false,\n  editMarginStyle: {\n    paddingX: '20px',\n    paddingY: '20px'\n  },\n  //\n  empertyMargin: true,\n  acceptChildren: ['col', 'w-100']\n});\n\n/***/ }),\n\n/***/ 366:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  label: 'column',\n  dropInMargin: 10,\n  editable: true,\n  editMarginStyle: {\n    paddingX: '20px',\n    paddingY: '20px'\n  },\n  //\n  empertyMargin: true,\n  classes: ['col', 'col-1', 'col-2', 'col-3', 'col-4', 'col-5', 'col-6', 'col-7', 'col-8', 'col-9', 'col-10', 'col-11', 'col-12', 'col-sm', 'col-sm-1', 'col-sm-2', 'col-sm-3', 'col-sm-4', 'col-sm-5', 'col-sm-6', 'col-sm-7', 'col-sm-8', 'col-sm-9', 'col-sm-10', 'col-sm-11', 'col-sm-12', 'col-md', 'col-md-1', 'col-md-2', 'col-md-3', 'col-md-4', 'col-md-5', 'col-md-6', 'col-md-7', 'col-md-8', 'col-md-9', 'col-md-10', 'col-md-11', 'col-md-12', 'col-lg', 'col-lg-1', 'col-lg-2', 'col-lg-3', 'col-lg-4', 'col-lg-5', 'col-lg-6', 'col-lg-7', 'col-lg-8', 'col-lg-9', 'col-lg-10', 'col-lg-11', 'col-lg-12', 'col-xl', 'col-xl-1', 'col-xl-2', 'col-xl-3', 'col-xl-4', 'col-xl-5', 'col-xl-6', 'col-xl-7', 'col-xl-8', 'col-xl-9', 'col-xl-10', 'col-xl-11', 'col-xl-12'],\n  rejectChildren: ['col', 'thead', 'tbody', 'th', 'tr', 'td']\n});\n\n/***/ }),\n\n/***/ 367:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  label: \"Heading\",\n  tags: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'],\n  editable: true,\n  editMarginStyle: {\n    paddingX: '5px',\n    paddingY: '5px'\n  }\n});\n\n/***/ }),\n\n/***/ 42:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RXComponent; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__rxarray__ = __webpack_require__(5);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar RXComponent = function () {\n  function RXComponent() {\n    var elementName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'div';\n\n    _classCallCheck(this, RXComponent);\n\n    this.children = [];\n    this.classList = [];\n    this.style = {};\n    this.attrs = {};\n    this.domOns = {};\n    this.elementName = elementName;\n  }\n\n  _createClass(RXComponent, [{\n    key: 'on',\n    value: function on(eventName, callback) {\n      this[eventName] = callback;\n      return this;\n    }\n  }, {\n    key: 'off',\n    value: function off(eventName) {\n      delete this[eventName];\n      return this;\n    }\n  }, {\n    key: 'domOn',\n    value: function domOn(name, callback) {\n      if (this.$dom) {\n        this.$dom.addEventListener(name, callback);\n      }\n      this.domOns[name] = callback;\n      return this;\n    }\n  }, {\n    key: 'domOff',\n    value: function domOff(name, callback) {\n      if (this.$dom) {\n        this.$dom.removeEventListener(name, callback);\n      }\n      delete this.domOns[name];\n      return this;\n    }\n  }, {\n    key: 'pushChild',\n    value: function pushChild(child) {\n      this.children.push(child);\n      return this;\n    }\n  }, {\n    key: 'unshiftChild',\n    value: function unshiftChild(child) {\n      this.children.unshift(child);\n      return this;\n    }\n  }, {\n    key: 'cssClass',\n    value: function cssClass(className) {\n      Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"a\" /* add */])(className, this.classList);\n      if (this.$dom) {\n        this.$dom.classList.add(className);\n      }\n      return this;\n    }\n  }, {\n    key: 'removeCssClass',\n    value: function removeCssClass(className) {\n      if (Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"d\" /* contains */])(className, this.classList)) {\n        Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"i\" /* remove */])(className, this.classList);\n        if (this.$dom && this.$dom.classList.contains(className)) {\n          this.$dom.classList.remove(className);\n        }\n      }\n      return this;\n    }\n  }, {\n    key: 'cssStyle',\n    value: function cssStyle(name, value) {\n      this.style[name] = value;\n      return this;\n    }\n  }, {\n    key: 'removeCssStyle',\n    value: function removeCssStyle(name) {\n      delete this.style[name];\n    }\n  }, {\n    key: 'domAttr',\n    value: function domAttr(name, value) {\n      this.attrs[name] = value;\n      return this;\n    }\n  }, {\n    key: 'removeDomAttr',\n    value: function removeDomAttr(name) {\n      delete this.attrs[name];\n      return this;\n    }\n  }, {\n    key: 'tongle',\n    value: function tongle(cssClass) {\n      if (Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"d\" /* contains */])(cssClass, this.classList)) {\n        Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"i\" /* remove */])(cssClass, this.classList);\n        if (this.$dom) {\n          Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"i\" /* remove */])(cssClass, this.$dom.classList);\n        }\n      } else {\n        Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"a\" /* add */])(cssClass, this.classList);\n        if (this.$dom) {\n          Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"a\" /* add */])(cssClass, this.$dom.classList);\n        }\n      }\n    }\n    //setInnerHTML(innerHTML){\n    //  this.innerHTML = innerHTML\n    //  return this\n    //}\n\n  }, {\n    key: 'render',\n    value: function render(parentElement) {\n      var _this = this;\n\n      this.$dom = document.createElement(this.elementName);\n      parentElement.appendChild(this.$dom);\n\n      if (this.innerHTML) {\n        this.$dom.innerHTML = this.innerHTML;\n      }\n\n      for (var styleName in this.style) {\n        this.$dom.style[styleName] = this.style[styleName];\n      }\n\n      this.classList.forEach(function (className) {\n        _this.$dom.classList.add(className);\n      });\n\n      for (var attrName in this.attrs) {\n        this.$dom[attrName] = this.attrs[attrName];\n      }\n\n      for (var eventName in this.domOns) {\n        this.$dom.addEventListener(eventName, this.domOns[eventName]);\n      }\n\n      this.children.forEach(function (child) {\n        child.render(_this.$dom);\n      });\n      return this;\n    }\n  }, {\n    key: 'refresh',\n    value: function refresh() {\n      if (this.$dom) {\n        var parentDomElement = this.$dom.parentNode;\n        this.destory();\n        this.render(parentDomElement);\n      }\n    }\n  }, {\n    key: 'setInnerHTML',\n    value: function setInnerHTML(innerHTML) {\n      this.innerHTML = innerHTML;\n      if (this.$dom) {\n        this.$dom.innerHTML = innerHTML;\n      }\n      return this;\n    }\n  }, {\n    key: 'destory',\n    value: function destory() {\n      this.$dom.parentNode.removeChild(this.$dom);\n      this.$dom = '';\n    }\n  }, {\n    key: 'removeChild',\n    value: function removeChild(node) {\n      Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"i\" /* remove */])(node, this.children);\n      if (this.$dom && node.$dom && this.$dom.contains(node.$dom)) {\n        this.$dom.removeChild(node.$dom);\n      }\n    }\n  }, {\n    key: 'clearChild',\n    value: function clearChild() {\n      this.children = new RXArray();\n    }\n  }, {\n    key: 'classClasses',\n    value: function classClasses() {\n      var dom = this.$dom;\n      if (dom) {\n        this.classList.forEach(function (cssClass) {\n          //console.log(cssClass)\n          dom.classList.remove(cssClass);\n        });\n      }\n      this.classList.length = 0;\n    }\n  }, {\n    key: 'show',\n    value: function show() {\n      this.style.display = 'flex';\n      if (this.$dom) {\n        this.$dom.style.display = 'flex';\n      }\n      return this;\n    }\n  }, {\n    key: 'isShow',\n    value: function isShow() {\n      return this.style.display !== 'none';\n    }\n  }, {\n    key: 'hide',\n    value: function hide() {\n      this.style.display = 'none';\n      if (this.$dom) {\n        this.$dom.style.display = 'none';\n      }\n      return this;\n    }\n  }, {\n    key: 'insertBefore',\n    value: function insertBefore(child, refence) {\n      Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"g\" /* insertBefore */])(child, refence, this.children);\n    }\n  }]);\n\n  return RXComponent;\n}();\n\n/***/ }),\n\n/***/ 5:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = first;\n/* harmony export (immutable) */ __webpack_exports__[\"h\"] = last;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = before;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = after;\n/* harmony export (immutable) */ __webpack_exports__[\"g\"] = insertBefore;\n/* harmony export (immutable) */ __webpack_exports__[\"f\"] = insertAfter;\n/* harmony export (immutable) */ __webpack_exports__[\"i\"] = remove;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = add;\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = contains;\n/* harmony export (immutable) */ __webpack_exports__[\"j\"] = tongleOnCondition;\n/* unused harmony export clear */\nfunction first(array) {\n  if (array.length > 0) {\n    return array[0];\n  }\n}\n\nfunction last(array) {\n  if (array.length > 0) {\n    return array[array.length - 1];\n  }\n}\n\nfunction before(refence, array) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === refence && i > 0) {\n      return array[i - 1];\n    }\n  }\n}\n\nfunction after(refence, array) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === refence && i < array.length) {\n      return array[i + 1];\n    }\n  }\n}\n\nfunction insertBefore(child, refence, array) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === refence) {\n      array.splice(i, 0, child);\n      return;\n    }\n  }\n\n  array.push(child);\n}\n\nfunction insertAfter(child, refence, array) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === refence) {\n      array.splice(i + 1, 0, child);\n      return;\n    }\n  }\n}\n\nfunction remove(node, array) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === node) {\n      array.splice(i, 1);\n      break;\n    }\n  }\n}\n\nfunction add(node, array) {\n  if (!contains(node, array)) {\n    array.push(node);\n  }\n}\n\nfunction contains(node, array) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === node) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction tongleOnCondition(condition, node, array) {\n  if (condition) {\n    add(node, array);\n  } else {\n    remove(node, array);\n  }\n}\n\nfunction clear(array) {\n  array.length = 0;\n}\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// core.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 346);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1690dc0d4c2d9d8cc7e1","import {NodeView} from \"./node-view\"\r\nimport {add, remove, first, last, insertBefore,insertAfter, contains, after, before} from \"../basic/rxarray\"\r\nimport {NormalState, ActiveState, FocusState, DragoverState, DisableState, DraggedState, EditState, PreviewState} from \"./node-state\"\r\n\r\nfunction insterAfterDom(newElement,targetElement){\r\n  var parent = targetElement.parentNode;\r\n  if(parent.lastChild == targetElement){\r\n    parent.appendChild(newElement);\r\n  }\r\n  else{\r\n    parent.insertBefore(newElement,targetElement.nextSibling);\r\n  }              \r\n}\r\n\r\nexport class Node{\r\n  constructor() {\r\n    this.seedId()\r\n    //this.mouseFollowerWidth =  '200px'\r\n  \tthis.children = []\r\n  \tthis.view = new NodeView()\r\n\r\n    //\r\n    this.meta = {\r\n      tag : 'div',\r\n      classList : [],\r\n      styles : {},\r\n      attributes : {},\r\n    }\r\n\r\n    this.defaultMeta = {\r\n      tag : 'div',\r\n      classList : [],\r\n      styles : {},\r\n      attributes : {},\r\n    }\r\n    \r\n    this.initStates()\r\n\r\n    this.mouseFollower = {\r\n      offsetX:10,\r\n      offsetY:0\r\n    }\r\n\r\n    this.begindrag = (event)=>{\r\n      event.stopPropagation()\r\n      this.state.onBegindrag(event)\r\n    }\r\n\r\n    this.begindragLabel = (event)=>{\r\n      if(this.view.$dom){\r\n        this.mouseFollower.offsetX = event.offsetX\r\n        this.mouseFollower.offsetY = -18 + event.offsetY\r\n      }\r\n      this.begindrag(event)\r\n    }\r\n\r\n    this.begindragIcon = (event)=>{\r\n      if(this.view.$dom){\r\n        this.mouseFollower.offsetX = this.view.$dom.clientWidth - 96 + event.offsetX\r\n        this.mouseFollower.offsetY = -24 + event.offsetY\r\n      }\r\n      this.begindrag(event)\r\n    }\r\n\r\n    this.mousemove = (event)=>{\r\n      event.stopPropagation()\r\n      this.state.onMousemove(event)\r\n      rxEditor.canvasMouseMove(event)\r\n    }\r\n    this.mouseover = (event)=>{\r\n      event.stopPropagation()\r\n      this.state.onMouseover(event)\r\n    }\r\n    this.mouseout = (event)=>{\r\n      event.stopPropagation()\r\n      this.state.onMouseout(event)\r\n    }\r\n\r\n    this.onclick = (event)=>{\r\n      event.stopPropagation()\r\n      this.state.onClick(event)\r\n    }\r\n\r\n    this.duplicate = ()=>{\r\n      this.changeToState('normalState')\r\n      rxEditor.commandManager.duplicate(this)\r\n      rxEditor.render()\r\n    }\r\n\r\n    this.up = (event)=>{\r\n      if(this.parent){\r\n        this.changeToState('normalState')\r\n        this.parent.changeToState('focusState')\r\n        event.stopPropagation()\r\n      }\r\n    }\r\n\r\n    this.delete =()=>{\r\n      //if(confirm(\"Are you sure to delete?\")){\r\n        this.changeToState('normalState')\r\n        rxEditor.commandManager.deleteNode(this)\r\n        rxEditor.render()\r\n      //}\r\n    }\r\n\r\n    this.stateChanged = (oldState, newState)=>{\r\n      oldState.leave()\r\n      newState.enter()\r\n      rxEditor.nodeStateChanged(this, oldState, newState)\r\n    }\r\n\r\n  }\r\n\r\n  seedId(){\r\n    if(!Node.idSeed) Node.idSeed = 1\r\n    Node.idSeed ++\r\n    this.id = Node.idSeed\r\n  }\r\n\r\n  initStates(){\r\n    this.normalState = new NormalState(this)\r\n    this.activeState = new ActiveState(this)\r\n    this.focusState = new FocusState(this)\r\n    this.dragoverState = new DragoverState(this)\r\n    this.draggedState = new DraggedState(this)\r\n    this.disableState = new DisableState(this)\r\n    this.editState = new EditState(this)\r\n    this.previewState = new PreviewState(this)\r\n    this.state = this.normalState\r\n  }\r\n\r\n  markDefaultMeta(){\r\n    this.defaultMeta.tag = this.meta.tag\r\n    this.defaultMeta.classList = this.meta.classList.concat()\r\n    this.defaultMeta.attributes = Object.assign({}, this.meta.attributes) \r\n    this.defaultMeta.styles = Object.assign({}, this.meta.styles) \r\n  }\r\n\r\n  changeToState(stateName){\r\n    if(this.state === this[stateName]) return\r\n    let oldState = this.state\r\n    this.state = this[stateName]\r\n    this.refreshState()\r\n    this.stateChanged(oldState, this[stateName])\r\n  }\r\n\r\n  render(){\r\n    this.view.render(this.toViewModel(), this.getParentViewDomElement())\r\n    this.children.forEach(function(child){  \r\n      child.render()\r\n    })\r\n  }\r\n\r\n  renderHtml(parentDomElement){\r\n    let dom = this.view.renderHtml(this.toHtmlModel(), parentDomElement)\r\n    this.children.forEach((child)=>{  \r\n      child.renderHtml(dom)\r\n    })\r\n\r\n    parentDomElement.appendChild(dom)\r\n    return dom\r\n  }\r\n\r\n  refreshState(){\r\n    this.view.refreshState(this.toViewModel())\r\n    this.children.forEach(function(child){  \r\n      child.refreshState()\r\n    })\r\n  }\r\n\r\n  clearDraggedoverStates(){\r\n    if(this.state === this.dragoverState){\r\n      this.changeToState('normalState')\r\n    }\r\n    this.children.forEach(function(child){  \r\n      child.clearDraggedoverStates()\r\n    })\r\n  }\r\n\r\n  clearActiveStates(){\r\n    if(this.state === this.activeState){\r\n      this.changeToState('normalState')\r\n    }\r\n    this.children.forEach(function(child){  \r\n      child.clearActiveStates()\r\n    })\r\n  }\r\n\r\n  clearFocusAndEditStates(){\r\n    if(this.state === this.focusState || this.state === this.editState){\r\n      this.changeToState('normalState')\r\n    }\r\n    this.children.forEach(function(child){  \r\n      child.clearFocusAndEditStates()\r\n    })\r\n  }\r\n\r\n  allToNormalState(){\r\n    this.changeToState('normalState')\r\n    this.children.forEach((child)=>{  \r\n      child.allToNormalState()\r\n    })\r\n  }\r\n\r\n  draggedToFoused(){\r\n    if(this.state === this.draggedState){\r\n      this.changeToState('focusState')\r\n    }\r\n    this.children.forEach(function(child){  \r\n      child.draggedToFoused()\r\n    })\r\n  }\r\n\r\n  getParentViewDomElement(){\r\n    return this.parent.view.$dom\r\n  }\r\n\r\n  firstChild(){\r\n    return first(this.children)\r\n  }\r\n\r\n  nextSbiling(){\r\n    if(this.parent){\r\n      return after(this, this.parent.children) \r\n    }\r\n  }\r\n\r\n  previousSbiling(){\r\n    if(this.parent){\r\n      return before(this, this.parent.children) \r\n    }\r\n  }\r\n\r\n  moveInTop(targetParent){\r\n    if(first(targetParent.children) !== this){\r\n      this.removeFromParent()\r\n      targetParent.unshiftChild(this)\r\n      targetParent.render()\r\n    }\r\n  }\r\n\r\n  moveIn(targetParent){\r\n    if(last(targetParent.children) !== this){\r\n      this.removeFromParent()\r\n      targetParent.pushChild(this)\r\n      targetParent.render()\r\n    }\r\n  }\r\n\r\n  moveBefore(brother){\r\n    if(before(brother, this.children) !== this){\r\n      this.removeFromParent()\r\n      this.parent = brother.parent\r\n      insertBefore(this, brother, brother.parent.children);\r\n      this.parent.render()\r\n    }\r\n  }\r\n\r\n  moveAfter(brother){\r\n    if(after(brother, this.children) !== this){\r\n      this.removeFromParent()\r\n      this.parent = brother.parent\r\n      insertAfter(this, brother, brother.parent.children);\r\n      this.parent.render()\r\n    }\r\n  }\r\n\r\n  removeFromParent(){\r\n    if(this.parent){\r\n      remove(this, this.parent.children)\r\n      this.parent.render()\r\n    }\r\n  }\r\n\r\n  unshiftChild(child){\r\n    child.parent = this\r\n    this.children.unshift(child) \r\n    return this\r\n  }\r\n\r\n  pushChild(child){\r\n    child.parent = this\r\n    add(child, this.children) \r\n    return this\r\n  }\r\n\r\n  insertAfterSelf(brother){\r\n    brother.parent = this.parent\r\n    insertAfter(brother, this, this.parent.children);\r\n    return this\r\n  }\r\n\r\n  clone(){\r\n    let copy = this.make()\r\n    // /console.log(copy)\r\n    copy.rule = JSON.parse(JSON.stringify(this.rule))\r\n    copy.ruleName = this.ruleName\r\n    this.children.forEach((child)=>{  \r\n      copy.pushChild(child.clone())\r\n    })\r\n    return copy\r\n  }\r\n\r\n  canAccept(child){\r\n    let acceptedChildren = this.rule ? this.rule.acceptedChildren : ''\r\n    if(acceptedChildren  && acceptedChildren.length == 0){\r\n      return false\r\n    }\r\n\r\n    if(acceptedChildren && !this.containsInAccepted(child)){\r\n      return false\r\n    }\r\n\r\n    if(!acceptedChildren && this.containsInExcept(child)){\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n\r\n  containsInAccepted(child){\r\n    let childRuleName = child.ruleName\r\n    let acceptedChildren = this.rule ? this.rule.acceptedChildren : ''\r\n    for(var i = 0; i < acceptedChildren.length; i++){\r\n      if(acceptedChildren[i] === childRuleName){\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  containsInExcept(child){\r\n    let childRuleName = child.ruleName\r\n    let rejectChildren = this.rule ? this.rule.rejectChildren : ''\r\n    if(rejectChildren){\r\n      for(var i = 0; i < rejectChildren.length; i++){\r\n        if(rejectChildren[i] === childRuleName){\r\n          return true\r\n        }\r\n      }\r\n    }\r\n\r\n    return false    \r\n  }\r\n\r\n  toViewModel(){\r\n    let model = this.state.stateModel()\r\n\r\n    model.on = {\r\n      onmousemove:this.mousemove,\r\n      onmouseover:this.mouseover,\r\n      onmouseout:this.mouseout,\r\n      //onmouseup:this.mouseup,\r\n      onclick:this.onclick,\r\n    }\r\n\r\n    return model\r\n  }\r\n\r\n  toHtmlModel(){\r\n    return {      \r\n      styles:{},\r\n      classList:[],//new RXArray,\r\n      attributes:{},\r\n    }\r\n  }\r\n\r\n  toTreeViewNode(){\r\n    let view = {\r\n      label: this.label,\r\n      tag:this.meta.tag,\r\n      id: this.id,\r\n      state:this.getStateName(),\r\n      children: [],\r\n    }\r\n\r\n    this.children.forEach((child)=>{\r\n      let childView = child.toTreeViewNode()\r\n      if(childView){\r\n        view.children.push(childView)\r\n      }\r\n    })\r\n\r\n    return view\r\n  }\r\n\r\n  getStateName(){\r\n    if(this.state === this.normalState){\r\n      return 'normalState'\r\n    }\r\n    if(this.state === this.activeState){\r\n      return 'activeState'\r\n    }\r\n    if(this.state === this.focusState){\r\n      return 'focusState'\r\n    }\r\n    if(this.state === this.dragoverState){\r\n      return 'dragoverState'\r\n    }\r\n    if(this.state === this.draggedState){\r\n      return 'draggedState'\r\n    }\r\n    if(this.state === this.disableState){\r\n      return 'disableState'\r\n    }\r\n  }\r\n\r\n  nodeChanged(node){\r\n    if(this.id === node.id){\r\n      rxEditor.commandManager.changeNode(this, node)\r\n      return;\r\n    }\r\n\r\n    this.children.forEach((child)=>{\r\n      child.nodeChanged(node)\r\n    })\r\n  }\r\n\r\n  focusNode(node){\r\n    if(node.id === this.id){\r\n      this.changeToState('focusState')\r\n    }\r\n    else{\r\n      this.changeToState('normalState')\r\n    }\r\n    this.children.forEach((child)=>{\r\n      child.focusNode(node)\r\n    })\r\n  }\r\n\r\n  clearCharNodes(){\r\n    this.children.forEach(child=>{\r\n      child.clearCharNodes()\r\n    })\r\n  }\r\n\r\n  getNodeById(id){\r\n    if(id === this.id){\r\n      return this\r\n    }\r\n\r\n    for(var i in this.children){\r\n      let node = this.children[i].getNodeById(id)\r\n      if(node){\r\n        return node\r\n      }\r\n    }\r\n  }\r\n\r\n  preview(){\r\n    this.changeToState('previewState')\r\n    this.children.forEach(child=>{\r\n      child.preview()\r\n    })\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/node.js","import {contains, remove} from \"./rxarray\"\r\n\r\nexport class ObjectState{\r\n  constructor(){\r\n    this.envetHandlers = {}\r\n  }\r\n\r\n  watch(attribute, callbackFunction){\r\n    if(!this.envetHandlers[attribute]){\r\n      this.envetHandlers[attribute] = []\r\n    }\r\n    if(!contains(callbackFunction, this.envetHandlers[attribute])){\r\n      this.envetHandlers[attribute].push(callbackFunction)\r\n    }\r\n  }\r\n\r\n  cancelWatch(attribute, callbackFunction){\r\n    console.assert(this.envetHandlers[attribute], 'EditorState: did not register this event handler')\r\n    remove(callbackFunction, this.envetHandlers[attribute])\r\n  }\r\n\r\n  distributeEvent(attribute){\r\n    this.distributeEventWithoutGlobal(attribute)\r\n    this.distributeEventWithoutGlobal('changed')//\r\n  }\r\n\r\n  distributeEventWithoutGlobal(attribute){\r\n    let handlers = this.envetHandlers[attribute];\r\n    if(handlers){\r\n      handlers.forEach((handler)=>{\r\n        handler(this)\r\n      })\r\n    }\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/basic/object-state.js","export class RXEditorCommandProxy{\r\n  constructor(pageId){\r\n    this.pageId = pageId\r\n    window.addEventListener(\"message\", (event)=>{\r\n      if(this.pageId === event.data.pageId){\r\n        this.handleMessage(event.data)\r\n      }\r\n    });\r\n\r\n    this.focusNode = (node, pageId)=>{\r\n      this.sendMessage({\r\n        name: 'focusNode',\r\n        pageId: pageId,\r\n        node:{\r\n          id:node.id,\r\n          ruleName:node.ruleName,\r\n          meta:node.meta,\r\n          defaultMeta:node.defaultMeta,\r\n          optionsSchema:node.rule.optionsSchema,\r\n          htmlCode:node.htmlCode,\r\n        }\r\n      })\r\n    }\r\n\r\n    this.unFocusNode = (node)=>{\r\n      this.sendMessage({\r\n        name: 'unFocusNode',\r\n        id: node.id,\r\n      })\r\n    }\r\n\r\n    document.addEventListener('mouseup', (event)=>{\r\n      this.sendMessage({\r\n        name: 'canvasMouseup',\r\n      })\r\n    })\r\n\r\n    document.addEventListener('mousemove', (event)=>{\r\n      this.canvasMouseMove(event)\r\n    })\r\n\r\n  }\r\n\r\n  canvasMouseMove(event){\r\n    this.sendMessage({\r\n      name: 'canvasMouseMove',\r\n      event: {\r\n        screenX: event.screenX,\r\n        screenY: event.screenY,\r\n      },\r\n    })\r\n  }\r\n\r\n  rxeditorReady(){\r\n    this.sendMessage({\r\n      name: 'rxeditorReady'\r\n    })\r\n  }\r\n\r\n  commandExcuted(canUndo, canRedo, commandSchema){\r\n    this.sendMessage({\r\n      name: 'commandExcuted',\r\n      canUndo: canUndo,\r\n      canRedo:canRedo,\r\n      commandSchema: commandSchema,\r\n    })\r\n  }\r\n\r\n  takeOverDraggingByWorkspace(){\r\n    this.sendMessage({\r\n      name: 'takeOverDraggingByWorkspace'\r\n    })\r\n  }\r\n\r\n  saveCodeFiles(innerHTML, json){\r\n    this.sendMessage({\r\n      name: 'saveCodeFiles',\r\n      innerHTML:innerHTML,\r\n      json:json,\r\n    })\r\n  }\r\n\r\n\r\n  handleMessage(message){\r\n    //console.log('received:' + message.name + \":\" + message.rxNameId)\r\n    switch (message.name) {\r\n      case 'requestAssemble':\r\n        let loadedData = this.serveForRXEditor.assembleWithTheme(message.theme)\r\n        this.sendMessage({\r\n          name: 'replyAssemble',\r\n          toolbox: loadedData.toolbox,\r\n          treeViewNodes: loadedData.treeViewNodes,\r\n        })\r\n        break;\r\n      case 'draggingFromToolbox':\r\n        this.serveForRXEditor.dragFromToolbox(message.item)\r\n        break;\r\n      case 'endDragFromToolbox':\r\n        this.serveForRXEditor.endDragFromToolbox(message.rxNameId)\r\n        break;\r\n      case 'changeCanvasState':\r\n        this.serveForRXEditor.changeCanvasState(message.state)\r\n        break;\r\n      case 'nodeChanged':\r\n        this.serveForRXEditor.nodeChanged(message.node)\r\n        break;\r\n      case 'undo':\r\n        this.serveForRXEditor.undo()\r\n        break;\r\n      case 'redo':\r\n        this.serveForRXEditor.redo()\r\n        break;\r\n      //case 'download':\r\n      //  this.serveForRXEditor.download()\r\n      //  break;\r\n      case 'clearCanvas':\r\n        this.serveForRXEditor.clearCanvas()\r\n        break;\r\n      case 'changeTheme':\r\n        this.serveForRXEditor.changeTheme(message.theme)\r\n        break;\r\n      case 'focusNodeFromShell':\r\n        this.serveForRXEditor.focusNodeFromShell(message.node)\r\n        break;\r\n      case 'duplicateNodeFromShell':\r\n        this.serveForRXEditor.duplicateNodeFromShell(message.id)\r\n        break;\r\n      case 'removeNodeFromShell':\r\n        this.serveForRXEditor.removeNodeFromShell(message.id)\r\n        break;\r\n      case 'requestHtmlCode':\r\n        let htmlCode = this.serveForRXEditor.requestHtmlCode()\r\n        this.sendMessage({\r\n          name: 'replyHtmlCode',\r\n          htmlCode: htmlCode,\r\n        })\r\n        break;\r\n      case 'loadHtml':\r\n        this.serveForRXEditor.loadHtml(message.html, message.id)\r\n        break;\r\n      case 'setInlineFile':\r\n        this.serveForRXEditor.setInlineFile(message.file)\r\n        break;\r\n    }\r\n  }\r\n\r\n\r\n  sendMessage(message){\r\n    message.pageId = this.pageId\r\n    message.canvasHeight = document.body.scrollHeight\r\n    window.parent.postMessage(message, '/');    \r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/rxeditor-command-proxy.js","import {Node} from \"../node\"\r\nimport {TextNode} from \"./text-node\"\r\n\r\nexport class RXNode extends Node{\r\n  constructor() {\r\n    super()\r\n\r\n  }\r\n\r\n\r\n  clone(){\r\n    let copy = super.clone()\r\n    copy.meta = JSON.parse(JSON.stringify(this.meta))\r\n    copy.defaultMeta = JSON.parse(JSON.stringify(this.defaultMeta))\r\n    copy.label = this.label\r\n\r\n    return copy\r\n  }\r\n\r\n  setLabel(label){\r\n    this.label = label\r\n    this.labelToCapitalize()\r\n    return this\r\n  }\r\n\r\n  labelToCapitalize(){\r\n    let label = this.label\r\n    this.label = label.replace(label[0], label[0].toUpperCase())\r\n  }\r\n\r\n\r\n  toViewModel(){\r\n    let model = super.toViewModel()\r\n    this.baseMetaToModel(model)\r\n\r\n\r\n    if(this.meta.innerHTML){\r\n      model.innerHTML = this.meta.innerHTML\r\n    }\r\n\r\n    return model\r\n  }\r\n\r\n  toHtmlModel(){\r\n    let model = super.toHtmlModel()\r\n    this.baseMetaToModel(model)\r\n    return model\r\n  }\r\n\r\n  baseMetaToModel(model){\r\n    let meta = this.meta\r\n    model.tag = meta.tag\r\n    model.innerHTML = meta.innerHTML\r\n    model.classList.push.apply(model.classList, meta.classList)\r\n    Object.assign(model.styles, meta.styles)\r\n    Object.assign(model.attributes, meta.attributes)\r\n  }\r\n\r\n  setTag(tag){\r\n    return this.setField('tag', tag)\r\n  }\r\n\r\n  addClass(className){\r\n    if(!className){\r\n      return this\r\n    }\r\n    this.meta.classList.push(className)\r\n    return this\r\n  }\r\n\r\n  setAttribute(attrName, value){\r\n    this.meta.attributes[attrName] = value\r\n    return this\r\n  }\r\n\r\n  changeTextnodeToCharNode(){\r\n    let children = []\r\n    this.children.forEach(child=>{\r\n      if(child.isTextNode){\r\n        children.push.apply(children, child.charNodes())\r\n        this.isCharState = true\r\n      }\r\n      else{\r\n        children.push(child)\r\n      }\r\n    })\r\n\r\n    this.children = children\r\n    this.render()\r\n  }\r\n\r\n  changeCharNodeToTextNode(){\r\n    let children = []\r\n    var textNode = null\r\n    this.children.forEach(child=>{\r\n      if(child.isCharNode){\r\n        let prev = child.previousSbiling()\r\n        if(!prev || !prev.isCharNode){\r\n          textNode = new TextNode('')\r\n          textNode.parent = this\r\n          children.push(textNode)\r\n        }\r\n\r\n        textNode.text += child.char\r\n      }\r\n      else{\r\n        children.push(child)\r\n      }\r\n    })    \r\n    this.children = children\r\n    this.render()\r\n    this.isCharState = false\r\n  }\r\n\r\n  clearCharNodes(){\r\n    if(this.isCharState){\r\n      this.changeCharNodeToTextNode()\r\n    }\r\n    super.clearCharNodes()\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/nodes/rxnode.js","import {CharNode} from \"./char-node\"\r\n\r\nexport class TextNode{\r\n  constructor(text) {\r\n  \tthis.text = text\r\n    this.seedId()\r\n    this.isTextNode = true\r\n\t}\r\n  seedId(){\r\n    if(!TextNode.idSeed) TextNode.idSeed = 1\r\n    TextNode.idSeed ++\r\n    this.id = \"text\" + TextNode.idSeed\r\n  }\r\n\r\n  make(){\r\n    return new TextNode(this.text)\r\n  }\r\n\r\n  clone(){\r\n    let copy = this.make()\r\n    return copy\r\n  }\r\n\r\n  getParentViewDomElement(){\r\n    return this.parent.view.$dom\r\n  }\r\n\r\n  render(){\r\n    //this.view.render(this.toViewModel(), this.getParentViewDomElement())\r\n    let parentDom = this.getParentViewDomElement()\r\n    if(parentDom){\r\n    \tparentDom.appendChild(document.createTextNode(this.text))\r\n    }\r\n  }\r\n\r\n  renderHtml(parentDomElement){\r\n    if(parentDomElement){\r\n      parentDomElement.appendChild(document.createTextNode(this.text))\r\n    }\r\n  }\r\n\r\n\r\n  renderMouseFollower(parentDomElement){\r\n    let mouseFollower = document.createTextNode(this.text)\r\n    parentDomElement.appendChild(mouseFollower)\r\n    return mouseFollower\r\n  }\r\n\r\n  preview(){}\r\n\r\n  nodeChanged(){}\r\n\r\n  refreshState(){}\r\n\r\n  clearDraggedoverStates(){}\r\n\r\n  clearActiveStates(){}\r\n\r\n  clearFocusAndEditStates(){}\r\n\r\n  clearCharNodes(){}\r\n  \r\n  draggedToFoused(){}\r\n\r\n  focusNode(){}\r\n\r\n  allToNormalState(){}\r\n\r\n  toTreeViewNode(){\r\n    return null\r\n  }\r\n\r\n  getNodeById(){}\r\n\r\n  charNodes(){\r\n    let nodes = []\r\n    for(var i = 0; i < this.text.length; i++){\r\n      nodes.push(new CharNode(this.text[i], this.parent))\r\n    }\r\n    return nodes\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/nodes/text-node.js","export default {\r\n  dropInMargin : 10,\r\n  editable: true,\r\n  editMarginStyle : {\r\n    paddingX:'10px',\r\n    paddingY:'10px',\r\n  },\r\n  //\r\n  empertyMargin:false,\r\n  rejectChildren : ['col','thead', 'tbody', \r\n                           'th', 'tr', 'td']\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/rules/common-rule.js","import initEditor from \"./shell/init-editor\"\r\n\r\nwindow.creatEditorCore = (pageId)=>{\r\n  initEditor(pageId)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core.js","import {RXEditor} from \"../core/rxeditor\"\r\nimport {RXEditorCommandProxy} from \"../core/rxeditor-command-proxy\"\r\n//import loadElements from \"../elements/load-elements\"\r\n\r\nexport default function initEditor(pageId){\r\n  window.rxEditor = new RXEditor(pageId)\r\n  window.RXEditorCommandProxy = RXEditorCommandProxy\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shell/init-editor.js","import {Canvas} from \"./canvas\"\r\nimport {CanvasState} from \"./canvas-state\"\r\nimport {add, tongleOnCondition} from \"../basic/rxarray\"\r\nimport {CommadManager} from \"./commands\"\r\nimport {NodeLabel} from \"./node-label\"\r\nimport {NodeToolbar} from \"./node-toolbar\"\r\nimport {RxCursor} from \"./rx-cursor\"\r\nimport {MouseFollower} from \"./mouse-follower\"\r\nimport {MiniEditbar} from \"./mini-editbar\"\r\nimport {RXEditorCommandProxy} from \"./rxeditor-command-proxy\"\r\n\r\nimport {NodeParser} from \"./node-parser\"\r\n\r\nfunction getDefaultLang(){\r\n  let lang = navigator.language || navigator.userLanguage\r\n  lang = lang.substr(0, 2)\r\n  //\r\n  if(lang !== 'zh'){\r\n    lang = 'en'\r\n  }\r\n  return lang\r\n}\r\n\r\nvar enLocal = {\r\n  \"focus-parent\" : \"Focus Parent\",\r\n  \"move\" : \"Move\",\r\n  \"edit\" : \"Edit\",\r\n  \"duplicate\" : \"Duplicate\",\r\n  \"delete\" : \"Delete\",\r\n  \"can-be-draged\" : \"Can be draged\",\r\n}\r\n\r\nvar zhLocal = {\r\n  \"focus-parent\" : \"\",\r\n  \"move\" : \"\",\r\n  \"edit\" : \"\",\r\n  \"duplicate\" : \"\",\r\n  \"delete\" : \"\",\r\n  \"can-be-draged\" : \"\",\r\n}\r\n\r\nfunction getLocal(id){\r\n  let local = getDefaultLang() === 'zh' ? zhLocal : enLocal\r\n  return local[id] ? local[id] : id\r\n}\r\n\r\nexport class RXEditor{\r\n  constructor(pageId) {\r\n    this.pageId = pageId\r\n    window.$t = getLocal\r\n    this.state = new CanvasState\r\n    this.commandManager = new CommadManager\r\n    this.commandManager.onCommandsChanged = (canUndo, canRedo, commandSchema)=>{\r\n      if(!commandSchema) return\r\n      if(commandSchema.parentId === this.canvas.id){\r\n        commandSchema.parentId = ''\r\n      }\r\n      if(commandSchema.oldParentId === this.canvas.id){\r\n        commandSchema.oldParentId = ''\r\n      }\r\n      this.commandProxy.commandExcuted(canUndo, canRedo, commandSchema)\r\n    }\r\n    this.optionClasses = []\r\n    add('rx-_-show-outline', this.optionClasses)\r\n    //this.optionClasses.add('show-label')\r\n    this.activedLabel = new NodeLabel\r\n    this.focusedLabel = new NodeLabel\r\n    this.focusedLabel.cssClass('focused')\r\n    this.focusedLabel.domOn('mousedown', (event)=>{\r\n      if(rxEditor.focusedNode){\r\n        rxEditor.focusedNode.begindragLabel(event)\r\n      }\r\n    })\r\n\r\n    this.toolbar = new NodeToolbar\r\n    this.cursor = new RxCursor\r\n    this.mouseFollower = new MouseFollower\r\n    this.miniEditbar = new MiniEditbar\r\n    this.nodeParser = new NodeParser\r\n  }\r\n\r\n  hangOn(id){\r\n    let commandProxy = new RXEditorCommandProxy(this.pageId)\r\n    this.workspace = document.getElementById(id)\r\n    this.activedLabel.render(this.workspace)\r\n    this.focusedLabel.render(this.workspace)\r\n    this.toolbar.render(this.workspace)\r\n    this.cursor.render(this.workspace)\r\n    this.mouseFollower.render(this.workspace)\r\n    this.miniEditbar.render(this.workspace)\r\n    this.canvas = new Canvas(this.workspace)\r\n    //this.canvas.children = this.load()\r\n    this.canvas.render();\r\n    commandProxy.serveForRXEditor = this\r\n    this.commandProxy = commandProxy\r\n\r\n    this.commandProxy.rxeditorReady()\r\n    document.addEventListener('mouseup', (event)=>{\r\n      this.dropElement(event)\r\n    })\r\n\r\n    this.state.watch('changed', (state)=>{\r\n      //this.allToNormalState()\r\n    })\r\n    this.state.watch('showOutline', (state)=>{\r\n      tongleOnCondition(state.showOutline, 'rx-_-show-outline', this.optionClasses)\r\n      this.render()\r\n    })\r\n    this.state.watch('showMarginX', (state)=>{\r\n      this.render()\r\n    })\r\n    this.state.watch('showMarginY', (state)=>{\r\n      this.render()\r\n    })\r\n\r\n  }\r\n\r\n  render(){\r\n    this.canvas.render()\r\n    this.toolbar.refreshPosition()\r\n    this.focusedLabel.refreshPosition()\r\n  }\r\n\r\n\r\n  clearDraggedoverStates(){\r\n    this.canvas.clearDraggedoverStates()\r\n  }\r\n  clearActiveStates(){\r\n    this.canvas.clearActiveStates()\r\n  }\r\n  clearFocusAndEditStates(){\r\n    this.canvas.clearFocusAndEditStates()\r\n  }\r\n\r\n  allToNormalState(){\r\n    this.canvas.allToNormalState()\r\n  }\r\n\r\n  dragFromToolbox(item){\r\n    if(this.commandManager.movingCommand) return\r\n    this.clearFocusAndEditStates()\r\n    let draggedNode = this.parseNode(item)\r\n    this.commandManager.startNew(draggedNode)\r\n    this.beginFollowMouse()\r\n    //this.clearFocusAndEditStates()\r\n  }\r\n\r\n  parseNode(item){\r\n    let responsive = this.state.screenWidth\r\n    return this.nodeParser.parse(\r\n      item.code.replace('--responsive--', responsive == 'xs' ? '' : '-'+ responsive)\r\n      )[0]\r\n    //return new BSContainer\r\n  }\r\n\r\n  dropElement(event){\r\n    //this.clearDraggedoverStates()\r\n    this.doDrop(event)\r\n    this.commandManager.finishMoving()\r\n    this.endFollowMouse()\r\n    this.canvas.clearCharNodes()\r\n  }\r\n\r\n  doDrop(event){\r\n    let position = this.cursor.position\r\n    let node = this.cursor.node\r\n    if(!node){\r\n      this.canvas.draggedToFoused()\r\n      return\r\n    }\r\n    this.canvas.clearFocusAndEditStates()\r\n    let command = this.commandManager.movingCommand\r\n    if(command){\r\n      if(position === 'in-left' || position === 'in-top'){\r\n        command.adoptFromToolbox(node)\r\n        command.moveInTop(node)\r\n        command.finish()\r\n      }\r\n      else if(position === 'in-right' || position === 'in-bottom'){\r\n        command.adoptFromToolbox(node)\r\n        command.moveIn(node)\r\n        command.finish()\r\n      }\r\n      else if(position === 'out-left' \r\n        || position === 'out-top'\r\n        || position === 'char-left'){\r\n        command.adoptFromToolbox(node)\r\n        command.moveBefore(node)\r\n        command.finish()\r\n      }\r\n      else if(position === 'out-right' \r\n        || position === 'out-bottom' \r\n        || position === 'char-right' ){\r\n        command.adoptFromToolbox(node)\r\n        command.moveAfter(node)\r\n        command.finish()\r\n      }\r\n    }\r\n}\r\n\r\n  endDragFromToolbox(){\r\n    this.commandManager.finishMoving()\r\n    this.endFollowMouse()\r\n  }\r\n\r\n  followMouse(event){\r\n    let mouseFollower = this.mouseFollower\r\n    if(mouseFollower.isActived){\r\n      //mouseFollower.$dom.style.left =  this.followX(event)\r\n      //mouseFollower.$dom.style.top = this.followY(event)\r\n      this.mouseFollower.followMouse(event)\r\n      this.commandProxy.takeOverDraggingByWorkspace()\r\n    }\r\n  }\r\n\r\n  beginFollowMouse(){\r\n    if(this.commandManager.movingCommand){\r\n      let draggedNode = this.commandManager.movingCommand.node\r\n      this.mouseFollower.active(draggedNode.label)\r\n    }\r\n  }\r\n\r\n  endFollowMouse(){\r\n    //if(this.mouseFollower && this.workspace.contains(this.mouseFollower.$dom)){\r\n    //  this.workspace.removeChild(this.mouseFollower.$dom)\r\n    //}\r\n    this.cursor.hide()\r\n    this.mouseFollower.hide()\r\n  }\r\n\r\n  nodeStateChanged(node, oldState, newState){\r\n    if(newState === node.focusState && node.focusState !== node.normalState){\r\n      node.htmlCode = this.getNodeHtml(node)\r\n      this.commandProxy.focusNode(node, this.pageId)\r\n    }\r\n    if(oldState === node.focusState && newState !== node.focusState){\r\n      this.commandProxy.unFocusNode(node)\r\n    }\r\n  }\r\n\r\n  getNodeHtml(node){\r\n    let div = document.createElement('div')\r\n    node.renderHtml(div)\r\n    return div.innerHTML;\r\n  }\r\n\r\n  changeCanvasState(state){\r\n    this.state.screenWidth = state.screenWidth\r\n    //this.state.preview = state.preview\r\n    //this.state.showEditMargin = state.showEditMargin\r\n    this.state.showMarginX = state.showMarginX\r\n    this.state.showMarginY = state.showMarginY\r\n    this.state.showOutline = state.showOutline\r\n    this.state.showLabel = state.showLabel\r\n  }\r\n\r\n  nodeChanged(node){\r\n    //console.log(node)\r\n    this.canvas.nodeChanged(node)\r\n    this.render()\r\n  }\r\n\r\n\r\n  undo(){\r\n    this.allToNormalState()\r\n    this.commandManager.undo()\r\n    this.render()\r\n  }\r\n\r\n  redo(){\r\n    this.allToNormalState()\r\n    this.commandManager.redo()\r\n    this.render()\r\n  }\r\n\r\n  //download(){\r\n  //  let innerHTML = this.canvas.generateHTML()\r\n  //  let json = this.canvas.generateJson()\r\n  //  this.commandProxy.saveCodeFiles(innerHTML, json)\r\n  //  this.render()\r\n  //}\r\n\r\n  clearCanvas(){\r\n    this.commandManager.clearCanvas()\r\n    this.activedLabel.hide()\r\n    this.focusedLabel.hide()\r\n    this.toolbar.hide()\r\n    this.render()\r\n  }\r\n\r\n\r\n  focusNodeFromShell(node){\r\n    this.canvas.clearFocusAndEditStates()\r\n    this.canvas.focusNode(node)\r\n  }\r\n\r\n  duplicateNodeFromShell(id){\r\n    this.canvas.clearFocusAndEditStates()\r\n    let node = this.canvas.getNodeById(id)\r\n    this.commandManager.duplicate(node)\r\n  }\r\n\r\n  removeNodeFromShell(id){\r\n    this.canvas.clearFocusAndEditStates()\r\n    let node = this.canvas.getNodeById(id)\r\n    this.commandManager.deleteNode(node)\r\n  }\r\n\r\n  canvasMouseMove(event){\r\n    this.commandProxy.canvasMouseMove(event)\r\n  }\r\n\r\n  requestHtmlCode(){\r\n    this.allToNormalState()\r\n    return this.canvas.generateHTML()\r\n  }\r\n\r\n  loadHtml(html, id){\r\n    let node = this.canvas.getNodeById(id)\r\n    if(node){\r\n      this.commandManager.loadNodeHtml(node, html)\r\n    }\r\n    else{\r\n      this.commandManager.loadCanvasHtml(html)\r\n    }\r\n\r\n    this.render()\r\n  }\r\n\r\n  setInlineFile(file){\r\n    let codeId = file.name.replace('.', '-')\r\n    let element = document.getElementById(codeId)\r\n    if(element){\r\n      element.innerHTML = file.code\r\n      return\r\n    }\r\n\r\n    if(file.fileType === 'style'){\r\n      let style = document.createElement('style');\r\n      style.type = 'text/css';\r\n      style.rel = 'stylesheet';\r\n      style.id = codeId\r\n\r\n      style.appendChild(document.createTextNode(file.code));\r\n\r\n      let head = document.getElementsByTagName('head')[0];\r\n      head.appendChild(style);\r\n    }\r\n\r\n    if(file.fileType === 'javascript'){\r\n      var script = document.createElement('script');\r\n      script.type = 'text/javascript';\r\n      script.id = codeId\r\n      script.appendChild(document.createTextNode(file.code));\r\n      document.body.appendChild(script);\r\n    }\r\n    \r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/rxeditor.js","import {Node} from \"./node\"\r\n\r\nexport class Canvas extends Node{\r\n  constructor(workspace) {\r\n    super()\r\n    this.activeState = this.normalState\r\n    this.focusState = this.normalState\r\n    this.parentViewDomElement = workspace;\r\n    this.padding = '30px';\r\n\r\n    this.stateChanged = (oldState, newState)=>{}\r\n\r\n    this.rule = {dropInMargin : 0}\r\n    this.rule.acceptedChildren=''\r\n    this.rule.rejectChildren = ['col','thead', 'tbody', \r\n                           'th', 'tr', 'td']\r\n  }\r\n\r\n  getParentViewDomElement(){\r\n    return this.parentViewDomElement\r\n  }\r\n\r\n  /*preview(parentDomElement){\r\n    if(parentDomElement.contains(this.view.$dom)){\r\n      parentDomElement.removeChild(this.view.$dom)\r\n    }\r\n    return super.preview(parentDomElement)\r\n  }*/\r\n\r\n  toViewModel(){\r\n    let model = super.toViewModel()\r\n    model.tag = 'div'\r\n    model.styles.width = \"100%\"\r\n    model.styles['min-height'] = \"calc(100vh)\"\r\n    model.styles.cursor = 'default'\r\n    model.styles['border'] = '0'\r\n    model.styles['padding'] = '10px'\r\n    model.classList.push('canvas')\r\n    model.toolbar = ''\r\n    model.label = ''\r\n   return model\r\n  }\r\n\r\n  toPreviewModel(){\r\n    let model = super.toPreviewModel()\r\n    model.tag = 'div'\r\n    return model\r\n  }\r\n\r\n  generateHTML(){\r\n    let rootDiv = document.createElement('div')\r\n    this.children.forEach(child=>{\r\n      child.renderHtml(rootDiv)\r\n    })\r\n    return rootDiv.innerHTML\r\n\r\n  }\r\n\r\n  generateJson(){\r\n    let jsonArray = []\r\n    this.children.forEach((child)=>{\r\n      jsonArray.push(child.toJson())\r\n    })\r\n    return jsonArray\r\n  }\r\n\r\n  generateTreeViewNodes(){\r\n    let viewNodes = []\r\n    this.children.forEach((child)=>{\r\n      viewNodes.push(child.toTreeViewNode())\r\n    })\r\n    return viewNodes\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/canvas.js","export class NodeView{\r\n  constructor() {\r\n  }\r\n\r\n  render(model, parentDoment){\r\n    this.parentDoment = parentDoment\r\n    //this.putDown(parentDoment)//canvas\r\n    let oldDom = this.$dom\r\n    \r\n    this.$dom = document.createElement(model.tag)\r\n    this.doRender(model, parentDoment, this.$dom)\r\n    if(parentDoment.contains(oldDom)){\r\n      parentDoment.replaceChild(this.$dom, oldDom)\r\n    }\r\n    else{\r\n      parentDoment.appendChild(this.$dom)\r\n    }\r\n  }\r\n\r\n  renderHtml(model, parentDoment){\r\n    //this.putDown(parentDoment)//canvas\r\n    let previewDom = document.createElement(model.tag)\r\n    this.doRender(model, parentDoment, previewDom)\r\n    return previewDom\r\n  }\r\n\r\n  refreshState(model){\r\n    if(this.$dom){\r\n      //let y = this.$dom.getBoundingClientRect().y\r\n      this.$dom.classList.remove('rx-_-mouse-overed','rx-_-focused','rx-_-dragged', 'rx-_-dragover', 'rx-_-editing')\r\n      this.renderStylesAndClasses(model, this.$dom)\r\n      this.showAttributes(model,this.$dom)\r\n    }\r\n  }\r\n\r\n  doRender(model, parentDoment, domElement){\r\n    domElement.innerHTML = model.innerHTML ? model.innerHTML : ''\r\n    this.renderStylesAndClasses(model, domElement)\r\n    this.bindEvents(domElement, model.on)\r\n    this.showAttributes(model,domElement)\r\n    //parentDoment.appendChild(domElement);\r\n  }\r\n\r\n\r\n  renderStylesAndClasses(model, domElement){\r\n    if(domElement){\r\n      if(model.styles){\r\n        for(var styleName in model.styles){\r\n          domElement.style[styleName] = model.styles[styleName]\r\n        }\r\n      }\r\n\r\n      model.classList.forEach((className)=>{\r\n        if(className){\r\n          domElement.classList.add(className)\r\n        }\r\n      })\r\n      \r\n    }\r\n  }\r\n\r\n  showAttributes(model, domElement){\r\n    for(var attributeName in model.attributes){\r\n      if(model.attributes[attributeName]){\r\n        domElement.setAttribute(attributeName, model.attributes[attributeName])\r\n      }\r\n    }\r\n  }\r\n\r\n  bindEvents(element, on){\r\n    for(var eventName in on){\r\n      //element.addEventListener(eventName, on[eventName])\r\n      element[eventName] = on[eventName]\r\n    }\r\n  }\r\n\r\n  putDown(){\r\n    if(this.$dom){\r\n      if(this.parentDoment.contains(this.$dom)){\r\n        this.parentDoment.removeChild(this.$dom);\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/node-view.js","export class NodeState {\r\n  constructor(node) {\r\n    this.node = node\r\n    this.classList = []\r\n    this.styles = {}\r\n    this.attributes = {/*contenteditable:'false'*/}\r\n    this.onMousemove = ()=>{/*console.log('mouse move NodeState')*/};\r\n    this.onBegindrag = ()=>{};\r\n    this.onMouseover = (event)=>{};\r\n    this.onMouseout = ()=>{};\r\n    //this.onMouseup = (event)=>{\r\n      //\r\n    //}\r\n    this.onClick = ()=>{\r\n      rxEditor.clearFocusAndEditStates()\r\n    }\r\n    this.enter = ()=>{}\r\n    this.leave = ()=>{\r\n    }\r\n  }\r\n\r\n  stateModel(){\r\n    let classList = []\r\n    classList.push.apply(classList, this.classList)\r\n   \r\n    let model = {\r\n      styles:Object.assign({}, this.styles),\r\n      classList:classList,\r\n      attributes: Object.assign({}, this.attributes),\r\n    }\r\n\r\n    this.addtionToModel(model)\r\n    return model\r\n  }\r\n\r\n  addtionToModel(model){\r\n    model.classList.push.apply(model.classList, rxEditor.optionClasses)\r\n    let node = this.node\r\n    if((rxEditor.state.showMarginX && node.rule.editMarginStyle)\r\n      || (node.children.length === 0 && node.rule.empertyMargin)\r\n      ){\r\n      model.styles['padding-left'] = node.rule.editMarginStyle ? node.rule.editMarginStyle.paddingX : 0\r\n      model.styles['padding-right'] = node.rule.editMarginStyle ? node.rule.editMarginStyle.paddingX : 0\r\n    }\r\n    if((rxEditor.state.showMarginY && node.rule.editMarginStyle)\r\n      || (node.children.length === 0 && node.rule.empertyMargin)\r\n      ){\r\n      model.styles['padding-top'] = node.rule.editMarginStyle ? node.rule.editMarginStyle.paddingY : 0\r\n      model.styles['padding-bottom'] = node.rule.editMarginStyle ? node.rule.editMarginStyle.paddingY : 0\r\n    }\r\n\r\n    //for\r\n    if(model.attributes.for){\r\n      model.attributes.for = ''\r\n    }\r\n\r\n    model.attributes.draggable = \"false\"\r\n\r\n    return model\r\n  }\r\n\r\n  judgePosition(event){\r\n    let draggedNode = rxEditor.commandManager.movingCommand.node\r\n    if(this.node.isCharNode){\r\n      return this.judgeCharNodePostion(event)\r\n    }\r\n    let margin = this.node.rule.dropInMargin\r\n    margin = margin ? margin : 0\r\n\r\n    let clientWidth = event.srcElement.clientWidth\r\n    let clientHeight = event.srcElement.clientHeight\r\n    let offsetX = event.offsetX\r\n    let offsetY = event.offsetY\r\n    let ratioY = offsetY/clientHeight\r\n    let ratioX = offsetX/clientWidth\r\n\r\n    if(margin > 0 && \r\n      ((this.node.parent && this.node.parent.canAccept(draggedNode)) || !this.node.parent)\r\n      ){\r\n      //\r\n      if(offsetY < margin && offsetX < margin){\r\n        return ratioY < ratioX ? 'out-top' :'out-left'\r\n      }\r\n\r\n      //\r\n      if(offsetY < margin \r\n        && clientWidth - offsetX < margin){\r\n        return ratioY < (1 - ratioX) ? 'out-top' :'out-right'\r\n      }\r\n\r\n      //\r\n      if(clientHeight - offsetY < margin \r\n        && clientWidth - offsetX < margin){\r\n        return (1 - ratioY) < (1 - ratioX) ? 'out-bottom' :'out-right'\r\n      }\r\n\r\n      //\r\n      if(clientHeight - offsetY < margin \r\n        && offsetX < margin){\r\n        return (1 - ratioY) <  ratioX ? 'out-bottom' :'out-left'\r\n      }\r\n\r\n      if(offsetY < margin){\r\n        return 'out-top'\r\n      }\r\n\r\n      if(offsetX < margin){\r\n        return 'out-left'\r\n      }\r\n\r\n      if(clientHeight - offsetY < margin){\r\n        return 'out-bottom'\r\n      }\r\n\r\n      if(clientWidth - offsetX < margin){\r\n        return 'out-right'\r\n      }\r\n    }\r\n\r\n    if(this.node.canAccept(draggedNode)){\r\n      if(this.inTop(event) && this.inLeft(event)){\r\n        return ratioY < ratioX ? 'in-top' :'in-left'\r\n      }\r\n      if(this.inTop(event) && !this.inLeft(event)){\r\n        return ratioY < (1 - ratioX) ? 'in-top' :'in-right'\r\n      }\r\n      if(!this.inTop(event) && this.inLeft(event)){\r\n        return (1 - ratioY) < ratioX ? 'in-bottom' :'in-left'\r\n      }\r\n      if(!this.inTop(event) && !this.inLeft(event)){\r\n        return (1 - ratioY) < (1 - ratioX) ? 'in-bottom' :'in-right'\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  judgeCharNodePostion(event){\r\n    return this.inLeft(event) ? 'char-left' : 'char-right'\r\n  }\r\n\r\n  //-dropInMargin \r\n  inTop(event){\r\n    //\r\n    if(event.srcElement.clientHeight > event.offsetY*2){\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  inLeft(event){\r\n    //\r\n    if(event.srcElement.clientWidth > event.offsetX*2){\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n}\r\n\r\nexport class CanDropState extends NodeState{\r\n  constructor(node) {\r\n    super(node)\r\n    this.onMousemove = (event)=>{\r\n      this.doDragover(event)\r\n      rxEditor.followMouse(event)\r\n    }\r\n    //this.onMouseup = (event)=>{\r\n    //  this.doDrop(event)\r\n    //}\r\n    this.onClick = (event)=>{\r\n      rxEditor.clearFocusAndEditStates()\r\n      this.node.changeToState('focusState')\r\n    }\r\n  }\r\n\r\n  doDragover(event){\r\n    let command = rxEditor.commandManager.movingCommand\r\n    if(command){\r\n      let position =this.judgePosition(event)\r\n      if(position){\r\n        this.node.changeToState('dragoverState')\r\n        rxEditor.cursor.show(this.judgePosition(event), this.node)\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n}\r\n\r\nexport class NormalState extends CanDropState{\r\n  constructor(node) {\r\n    super(node)\r\n    this.onMouseover = (event)=>{\r\n      if(!rxEditor.commandManager.movingCommand){\r\n        rxEditor.clearActiveStates()\r\n        this.node.changeToState('activeState')\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\nexport class DragoverState extends CanDropState{\r\n  constructor(node) {\r\n    super(node)\r\n    this.classList.push('rx-_-dragover')\r\n    this.enter = ()=>{\r\n      node.changeTextnodeToCharNode()\r\n      if(!this.node.isCharNode){\r\n        rxEditor.activedLabel.show(node.label, node, 1)\r\n      }\r\n    }\r\n    this.leave = ()=>{\r\n      rxEditor.activedLabel.hide()\r\n    }\r\n    this.onMouseout = ()=>{\r\n      this.node.changeToState('normalState')\r\n    }\r\n  }\r\n}\r\n\r\nexport class ActiveState extends CanDropState{\r\n  constructor(node) {\r\n    super(node)\r\n    this.classList.push('rx-_-mouse-overed')\r\n    this.enter = ()=>{\r\n      rxEditor.activedLabel.show(node.label, node, 1)\r\n    }\r\n    this.leave = ()=>{\r\n      rxEditor.activedLabel.hide()\r\n    }\r\n    this.onMouseout = ()=>{\r\n      //console.log('mouse out')\r\n      this.node.changeToState('normalState')\r\n    };\r\n    this.onMouseover = (event)=>{\r\n      if(!rxEditor.commandManager.movingCommand){\r\n        rxEditor.clearActiveStates()\r\n        this.node.changeToState('activeState')\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\nexport class FocusState extends CanDropState{\r\n  constructor(node) {\r\n    super(node)\r\n    this.classList.push('rx-_-focused')\r\n    this.enter = ()=>{\r\n      let dom = node.view.$dom\r\n      rxEditor.focusedLabel.show(node.label, node, 2)\r\n      rxEditor.toolbar.show(node)\r\n      rxEditor.focusedNode = node\r\n    }\r\n    this.leave = ()=>{\r\n      rxEditor.focusedLabel.hide()\r\n      rxEditor.toolbar.hide()\r\n      rxEditor.focusedNode = ''\r\n    }\r\n    this.onClick = (event)=>{\r\n      event.stopPropagation()\r\n    }\r\n\r\n    this.onBegindrag = (event)=>{\r\n      //if(this.node.draggable){\r\n      this.preventDefault\r\n      rxEditor.commandManager.startMove(this.node)\r\n      rxEditor.beginFollowMouse(event)\r\n      this.node.changeToState('draggedState')\r\n      //}\r\n    };\r\n  }\r\n}\r\n\r\nexport class DisableState extends NodeState{\r\n  constructor(node) {\r\n    super(node)\r\n    this.onMousemove = (event)=>{\r\n      event.preventDefault()\r\n      rxEditor.followMouse(event) \r\n      //console.log('mouse move DisableState')\r\n    };\r\n    this.onMouseout = (event)=>{event.preventDefault()};\r\n  }\r\n}\r\n\r\nexport class DraggedState extends DisableState{\r\n  constructor(node) {\r\n    super(node)\r\n    this.classList.push('rx-_-dragged')\r\n    this.enter = ()=>{\r\n      document.body.classList.add('one-element-dragged')\r\n    }\r\n    this.leave = ()=>{\r\n      document.body.classList.remove('one-element-dragged')\r\n    }\r\n  }\r\n}\r\n\r\nexport class EditState extends FocusState{\r\n  constructor(node) {\r\n    super(node)\r\n    this.classList.push('rx-_-editing')\r\n    this.enter = ()=>{\r\n      this.attributes.contenteditable = 'true'\r\n      let dom = node.view.$dom\r\n      rxEditor.focusedLabel.show(node.label, node, 2)\r\n      rxEditor.toolbar.show(node)\r\n      rxEditor.focusedNode = node\r\n      rxEditor.miniEditbar.show(this.node.view.$dom)\r\n      rxEditor.commandManager.startEditText(node)\r\n      node.render()\r\n    }\r\n\r\n    this.leave = ()=>{\r\n      rxEditor.focusedLabel.hide()\r\n      rxEditor.toolbar.hide()\r\n      rxEditor.focusedNode = ''\r\n      rxEditor.miniEditbar.hide()\r\n\r\n      rxEditor.commandManager.finishEditText()\r\n      this.node.render()\r\n    }\r\n  }\r\n}\r\n\r\nexport class PreviewState extends NodeState{\r\n  constructor(node) {\r\n    super(node)\r\n    this.onClick = ()=>{};\r\n  }\r\n\r\n  addtionToModel(model){\r\n    return model\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/node-state.js","import {ObjectState} from \"../basic/object-state\"\r\n\r\nexport class CanvasState extends ObjectState{\r\n  constructor(){\r\n    super()\r\n    this.__screenWidth = 'md'\r\n    this.__preview = false\r\n    this.__showMarginX = true\r\n    this.__showMarginY = true\r\n    this.__showOutline = true\r\n    this.__showLabel = true\r\n\r\n  }\r\n\r\n  get screenWidth(){\r\n    return this.__screenWidth\r\n  }\r\n\r\n  set screenWidth(screenWidth){\r\n    if(this.__screenWidth == screenWidth){return} \r\n    this.__screenWidth = screenWidth\r\n    this.distributeEvent('screenWidth')\r\n  }\r\n\r\n\r\n  get preview(){\r\n    return this.__preview\r\n  }\r\n\r\n  set preview(preview){\r\n    if(this.__preview == preview){return} \r\n    this.__preview = preview\r\n    this.distributeEvent('preview')\r\n  }\r\n\r\n  get showMarginX(){\r\n    return this.__showMarginX\r\n  }\r\n\r\n  set showMarginX(showMarginX){\r\n    if(this.__showMarginX == showMarginX){return} \r\n    this.__showMarginX = showMarginX\r\n    this.distributeEvent('showMarginX')\r\n  }\r\n\r\n  get showMarginY(){\r\n    return this.__showMarginY\r\n  }\r\n\r\n  set showMarginY(showMarginY){\r\n    if(this.__showMarginY == showMarginY){return} \r\n    this.__showMarginY = showMarginY\r\n    this.distributeEvent('showMarginY')\r\n  }\r\n\r\n  get showOutline(){\r\n    return this.__showOutline\r\n  }\r\n\r\n  set showOutline(showOutline){\r\n    if(this.__showOutline == showOutline){return} \r\n    this.__showOutline = showOutline\r\n    this.distributeEvent('showOutline')\r\n  }\r\n\r\n  get showLabel(){\r\n    return this.__showLabel\r\n  }\r\n\r\n  set showLabel(showLabel){\r\n    if(this.__showLabel == showLabel){return} \r\n    this.__showLabel = showLabel\r\n    this.distributeEvent('showLabel')\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/canvas-state.js","function insterAfter(newElement,targetElement){\r\n  var parent = targetElement.parentNode;\r\n  if(parent.lastChild == targetElement){\r\n    parent.appendChild(newElement);\r\n  }\r\n  else{\r\n    parent.insertBefore(newElement,targetElement.nextSibling);\r\n  }              \r\n}\r\n\r\nclass CommandMovable{\r\n  constructor(node){\r\n    this.node = node\r\n    this.oldParent = node.parent\r\n    this.oldnNextSbiling = node.nextSbiling()\r\n  }\r\n\r\n  moveInTop(targetParent){\r\n    this.node.moveInTop(targetParent)\r\n    this.storeNewInfo()\r\n  }\r\n\r\n\r\n  moveBefore(brother){\r\n    this.node.moveBefore(brother)\r\n    this.storeNewInfo()\r\n  }\r\n\r\n  moveAfter(brother){\r\n    this.node.moveAfter(brother)\r\n    this.storeNewInfo()\r\n  }\r\n\r\n\r\n  moveIn(targetParent){\r\n    this.node.moveIn(targetParent)\r\n    this.storeNewInfo()\r\n  }\r\n\r\n  storeNewInfo(){\r\n    this.newParent = this.node.parent\r\n    this.newNextSbiling = this.node.nextSbiling()\r\n  }\r\n\r\n  adoptFromToolbox(parent){\r\n    let draggedNode = this.node\r\n    if(draggedNode && !draggedNode.parent && parent.canAccept(draggedNode)){\r\n      draggedNode.parent = parent\r\n      draggedNode.render()\r\n      draggedNode.changeToState('draggedState')\r\n    }\r\n  }\r\n\r\n  finish(){\r\n    let draggedNode = this.node\r\n    if(draggedNode.parent){\r\n      draggedNode.parent.changeToState('normalState')\r\n    }\r\n    this.makeExcuteSchema()\r\n  }\r\n\r\n  excute(){\r\n    this.node.removeFromParent()\r\n    if(this.newNextSbiling){\r\n      this.node.moveBefore(this.newNextSbiling)\r\n    }\r\n    else if(this.newParent){\r\n      this.newParent.pushChild(this.node)\r\n    }\r\n    this.makeExcuteSchema()\r\n  }\r\n\r\n  undo(){\r\n    this.node.removeFromParent()\r\n    if(this.oldnNextSbiling){\r\n      this.node.moveBefore(this.oldnNextSbiling)\r\n    }\r\n    else if(this.oldParent)\r\n    {\r\n      this.oldParent.pushChild(this.node)\r\n    }\r\n\r\n    this.makeUndoSchema()\r\n  }\r\n\r\n\r\n}\r\n\r\nclass CommandNew extends CommandMovable{\r\n  constructor(node) {\r\n    super(node)\r\n  }\r\n\r\n  makeExcuteSchema(){\r\n    this.commandSchema = {\r\n      command : 'new',\r\n      node : this.node.toTreeViewNode(),\r\n      parentId : this.node.parent ? this.node.parent.id : '',\r\n      nextSblilingId : this.node.nextSbiling() ? this.node.nextSbiling().id : '',\r\n    }\r\n  }\r\n  \r\n  makeUndoSchema(){\r\n    this.commandSchema = {\r\n      command : 'delete',\r\n      nodeId : this.node.id,\r\n    }\r\n  }\r\n}\r\n\r\nclass CommandMove extends CommandMovable{\r\n  constructor(node) {\r\n   super(node)\r\n  }\r\n\r\n  makeExcuteSchema(){\r\n    this.commandSchema = {\r\n      command : 'move',\r\n      nodeId : this.node.id,\r\n      oldParentId : this.oldParent ? this.oldParent.id : '',\r\n      parentId : this.node.parent ? this.node.parent.id : '',\r\n      nextSblilingId : this.node.nextSbiling() ? this.node.nextSbiling().id : '',\r\n    }\r\n  }\r\n  \r\n  makeUndoSchema(){\r\n    this.commandSchema = {\r\n      command : 'move',\r\n      nodeId : this.node.id,\r\n      oldParentId : this.newParent ? this.newParent.id : '',\r\n      parentId : this.node.parent ? this.node.parent.id : '',\r\n      nextSblilingId : this.node.nextSbiling() ? this.node.nextSbiling().id : '',\r\n    }\r\n  }\r\n}\r\n\r\nclass CommandDelete{\r\n  constructor(node) {\r\n    this.node = node\r\n    this.oldParent = node.parent\r\n    this.oldnNextSbiling = this.node.nextSbiling()\r\n  }\r\n\r\n  excute(){\r\n    this.node.removeFromParent()\r\n    this.makeExcuteSchema()\r\n  }\r\n\r\n  undo(){\r\n    if(this.oldnNextSbiling){\r\n      this.node.moveBefore(this.oldnNextSbiling)\r\n    }\r\n    else{\r\n      this.oldParent.pushChild(this.node)\r\n    }\r\n    this.makeUndoSchema()\r\n  }\r\n\r\n  makeExcuteSchema(){\r\n    this.commandSchema = {\r\n      command : 'delete',\r\n      nodeId : this.node.id,\r\n    }\r\n  }\r\n  \r\n  makeUndoSchema(){\r\n    this.commandSchema = {\r\n      command : 'new',\r\n      node : this.node.toTreeViewNode(),\r\n      parentId : this.node.parent ? this.node.parent.id : '',\r\n      nextSblilingId : this.node.nextSbiling() ? this.node.nextSbiling().id : '',\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass CommandClone{\r\n  constructor(node) {\r\n    this.node = node\r\n    this.copy = node.clone()\r\n  }\r\n\r\n  excute(){\r\n    this.copy.moveAfter(this.node)\r\n    this.makeExcuteSchema()\r\n  }\r\n\r\n  undo(){\r\n    this.copy.removeFromParent()\r\n    this.makeUndoSchema()\r\n  }\r\n\r\n  makeExcuteSchema(){\r\n    this.commandSchema = {\r\n      command : 'new',\r\n      node : this.copy.toTreeViewNode(),\r\n      parentId : this.copy.parent ? this.copy.parent.id : '',\r\n      nextSblilingId : this.copy.nextSbiling() ? this.copy.nextSbiling().id : '',\r\n    }\r\n  }\r\n  \r\n  makeUndoSchema(){\r\n    this.commandSchema = {\r\n      command : 'delete',\r\n      nodeId : this.copy.id,\r\n    }\r\n  }\r\n}\r\n\r\nclass CommandChangeNode{\r\n  constructor(node, newMeta) {\r\n    this.node = node\r\n    this.oldMeta = JSON.parse(JSON.stringify(node.meta))\r\n    this.newMeta = JSON.parse(JSON.stringify(newMeta))\r\n  }\r\n\r\n  excute(){\r\n    this.node.meta = JSON.parse(JSON.stringify(this.newMeta))\r\n    this.makeExcuteSchema()\r\n  }\r\n\r\n  undo(){\r\n    this.node.meta = JSON.parse(JSON.stringify(this.oldMeta))\r\n    this.makeUndoSchema()\r\n  }\r\n\r\n  makeExcuteSchema(){\r\n    this.commandSchema = {\r\n      command : 'change',\r\n      nodeId : this.node.id,\r\n      meta: this.node.meta\r\n    }\r\n  }\r\n  \r\n  makeUndoSchema(){\r\n    this.commandSchema = {\r\n      command : 'change',\r\n      nodeId : this.node.id,\r\n      meta: this.node.meta,\r\n    }\r\n  }\r\n}\r\n\r\n\r\nclass CommandTextEdit{\r\n  constructor(node) {\r\n    this.node = node\r\n    this.oldChildren = this.node.children\r\n\r\n    this.node.children.forEach(chilid=>{\r\n      chilid.preview()\r\n    })\r\n  }\r\n\r\n  finish(){\r\n    this.node.children = rxEditor.nodeParser.parse(this.node.view.$dom.innerHTML)\r\n\r\n    this.node.children.forEach(child=>{\r\n      child.parent = this.node\r\n    })\r\n    this.newChildren = this.node.children\r\n  } \r\n\r\n  excute(){\r\n    this.node.children = this.newChildren\r\n    this.makeExcuteSchema()\r\n  }\r\n\r\n  undo(){\r\n    this.node.children = this.oldChildren\r\n    this.makeUndoSchema()\r\n  }\r\n\r\n  makeExcuteSchema(){\r\n    this.commandSchema = {\r\n      command : 'textEdit',\r\n      nodeId : this.node.id,\r\n      node : this.node.toTreeViewNode(),\r\n    }\r\n  }\r\n  \r\n  makeUndoSchema(){\r\n    this.commandSchema = {\r\n      command : 'textEdit',\r\n      nodeId : this.node.id,\r\n      node : this.node.toTreeViewNode(),\r\n    }\r\n  }\r\n}\r\n\r\nclass CommandLoadCanvasHtml{\r\n  constructor(newHtml) {\r\n    this.node = rxEditor.canvas\r\n    this.oldChildren = this.node.children\r\n    this.node.children = rxEditor.nodeParser.parse(newHtml)\r\n    this.node.children.forEach(child=>{\r\n      child.parent = this.node\r\n    })\r\n    this.newChildren = this.node.children\r\n  }\r\n\r\n  excute(){\r\n    this.node.children = this.newChildren\r\n    this.makeExcuteSchema()\r\n  }\r\n\r\n  undo(){\r\n    this.node.children = this.oldChildren\r\n    this.makeUndoSchema()\r\n  }\r\n\r\n  makeExcuteSchema(){\r\n    this.commandSchema = {\r\n      command : 'loadCanvasNodes',\r\n      nodes : this.node.toTreeViewNode().children,\r\n    }\r\n  }\r\n  \r\n  makeUndoSchema(){\r\n    this.commandSchema = {\r\n      command : 'loadCanvasNodes',\r\n      nodes : this.node.toTreeViewNode().children,\r\n    }\r\n  }\r\n}\r\n\r\nclass CommandClearCanvas{\r\n  constructor() {\r\n    this.node = rxEditor.canvas\r\n    this.oldChildren = this.node.children\r\n    this.node.children = []\r\n    this.newChildren = this.node.children\r\n  }\r\n\r\n  excute(){\r\n    this.node.children = this.newChildren\r\n    this.makeExcuteSchema()\r\n  }\r\n\r\n  undo(){\r\n    this.node.children = this.oldChildren\r\n    this.makeUndoSchema()\r\n  }\r\n\r\n  makeExcuteSchema(){\r\n    this.commandSchema = {\r\n      command : 'loadCanvasNodes',\r\n      nodes : this.node.toTreeViewNode().children,\r\n    }\r\n  }\r\n  \r\n  makeUndoSchema(){\r\n    this.commandSchema = {\r\n      command : 'loadCanvasNodes',\r\n      nodes : this.node.toTreeViewNode().children,\r\n    }\r\n  }\r\n}\r\n\r\nclass CommandLoadNodeHtml{\r\n  constructor(node, newHtml) {\r\n    this.node = node\r\n    this.oldChildren = this.node.children\r\n    this.oldMeta = this.node.meta\r\n    this.node.children = []\r\n    let nodes = rxEditor.nodeParser.parse(newHtml)\r\n    if(nodes.length > 0){\r\n      let newNode = nodes[0]\r\n      newNode.children.forEach(child=>{\r\n        child.parent = this.node\r\n        this.node.children.push(child)\r\n      })\r\n      this.node.meta = newNode.meta\r\n    }\r\n    this.newMeta = this.node.meta\r\n    this.newChildren = this.node.children\r\n  }\r\n\r\n  excute(){\r\n    this.node.children = this.newChildren\r\n    this.node.meta = this.newMeta\r\n    this.makeExcuteSchema()\r\n  }\r\n\r\n  undo(){\r\n    this.node.children = this.oldChildren\r\n    this.node.meta = this.oldMeta\r\n    this.makeUndoSchema()\r\n  }\r\n\r\n  makeExcuteSchema(){\r\n    this.commandSchema = {\r\n      command : 'loadNode',\r\n      nodeId : this.node.id,\r\n      node : this.node.toTreeViewNode(),\r\n    }\r\n  }\r\n  \r\n  makeUndoSchema(){\r\n    this.commandSchema = {\r\n      command : 'loadNode',\r\n      nodeId : this.node.id,\r\n      node : this.node.toTreeViewNode(),\r\n    }\r\n  }\r\n}\r\n\r\nexport class CommadManager{\r\n  constructor() {\r\n    this.undoCommands = []\r\n    this.redoCommands = []\r\n    this.onCommandsChanged = (canUndo, canRedo)=>{\r\n    }\r\n  }\r\n\r\n  getDraggedNode(){\r\n    if(this.movingCommand){\r\n      return this.movingCommand.node\r\n    }\r\n  }\r\n  startNew(node){\r\n    let cmd = new CommandNew(node)\r\n    this.startCommand(cmd)\r\n  }\r\n\r\n  startMove(node){\r\n    let cmd = new CommandMove(node)\r\n    this.startCommand(cmd)\r\n  }\r\n\r\n  duplicate(node){\r\n    let cmd = new CommandClone(node)\r\n    cmd.excute()\r\n    this.finished(cmd)\r\n    cmd.node.changeToState('normalState')\r\n    cmd.copy.changeToState('focusState')\r\n  }\r\n\r\n  changeNode(node, newNodeData){\r\n    //node.meta = newNodeData.meta\r\n    let cmd = new CommandChangeNode(node, newNodeData.meta)\r\n    cmd.excute()\r\n    this.finished(cmd)\r\n  }\r\n\r\n  deleteNode(node){\r\n    let cmd = new CommandDelete(node)\r\n    cmd.excute()\r\n    this.finished(cmd)\r\n    rxEditor.toolbar.hide()\r\n    rxEditor.focusedLabel.hide()\r\n  }\r\n\r\n  loadNodeHtml(node, html){\r\n    let cmd = new CommandLoadNodeHtml(node, html)\r\n    cmd.excute()\r\n    this.finished(cmd)\r\n  }\r\n\r\n  loadCanvasHtml(html){\r\n    let cmd = new CommandLoadCanvasHtml(html)\r\n    cmd.excute()\r\n    this.finished(cmd)\r\n  }\r\n\r\n  clearCanvas(){\r\n    let cmd = new CommandClearCanvas()\r\n    cmd.excute()\r\n    this.finished(cmd)\r\n  }\r\n\r\n\r\n  startCommand(command){\r\n    this.movingCommand = command\r\n  }\r\n\r\n  finishMoving(){\r\n\r\n    if(this.movingCommand && this.movingCommand.node.parent){\r\n      //this.movingCommand.finish()\r\n      this.finished(this.movingCommand)\r\n      this.movingCommand.node.changeToState('focusState')\r\n    }\r\n    this.movingCommand = ''\r\n  }\r\n\r\n  startEditText(node){\r\n    this.textCommand = new CommandTextEdit(node)\r\n  }\r\n\r\n  finishEditText(){\r\n    this.textCommand.finish()\r\n    this.finished(this.textCommand)\r\n    this.textCommand = ''\r\n  }\r\n\r\n  finished(command){\r\n    this.undoCommands.push(command)\r\n    this.redoCommands.length = 0\r\n    this.submitChanged(command)\r\n  }\r\n\r\n  undo(){\r\n    let command = this.undoCommands.pop()\r\n    command.undo()\r\n    this.redoCommands.push(command)\r\n    this.submitChanged(command)\r\n  }\r\n\r\n  redo(){\r\n    let command = this.redoCommands.pop()\r\n    command.excute()\r\n    this.undoCommands.push(command)\r\n    this.submitChanged(command)\r\n  }\r\n\r\n  submitChanged(command){\r\n    this.onCommandsChanged(this.undoCommands.length > 0, this.redoCommands.length > 0, command.commandSchema)\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/commands.js","import {RXComponent} from \"../basic/rxcomponent\"\r\n\r\nexport class NodeLabel extends RXComponent{\r\n  constructor(){\r\n    super()\r\n    this.cssClass('node-label')\r\n    this.domAttr('title', $t('can-be-draged'))\r\n    this.hide()\r\n    document.addEventListener('scroll', (event)=>{\r\n      this.refreshPosition()\r\n    })\r\n    window.addEventListener('resize', (event)=>{\r\n      this.refreshPosition()\r\n    })\r\n  }\r\n\r\n  refreshPosition(){\r\n    this.followElement(this.node, this.offset)\r\n  }\r\n\r\n  show(label, node, offset){\r\n    this.node = node\r\n    this.offset = offset\r\n    if(!node || !node.view.$dom) return\r\n    super.setInnerHTML(label)\r\n    this.followElement(node, offset)\r\n    return super.show()\r\n  }\r\n\r\n  followElement(node, offset){\r\n    if(!node || !node.view || !node.view.$dom) return\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = rect.x + 'px'\r\n      if(rect.y < 20){\r\n        this.$dom.style.top = (rect.y + rect.height + offset) + 'px'\r\n      }\r\n      else{\r\n        this.$dom.style.top = (rect.y - 15 - offset) + 'px'\r\n      }\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/node-label.js","import {RXComponent} from \"../basic/rxcomponent\"\r\n\r\nclass SvgButton extends RXComponent{\r\n  constructor(title, svg, on, callback){\r\n    super()\r\n    this.cssClass('rx-button')\r\n    this.domAttr('title', title)  \r\n    this.innerHTML = svg\r\n    this.domOn(on, callback)\r\n  }  \r\n}\r\n\r\nvar svgArrowUp = `<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"arrow-up\" class=\"svg-inline--fa fa-arrow-up fa-w-14\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"currentColor\" d=\"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z\"></path></svg>`\r\n\r\nvar svgMove = `<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"arrows-alt\" class=\"svg-inline--fa fa-arrows-alt fa-w-16\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"currentColor\" d=\"M352.201 425.775l-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z\"></path></svg>`\r\n\r\nvar svgEdit = `<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"edit\" class=\"svg-inline--fa fa-edit fa-w-18\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path fill=\"currentColor\" d=\"M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z\"></path></svg>`\r\n\r\nvar svgClone = `<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"clone\" class=\"svg-inline--fa fa-clone fa-w-16\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"currentColor\" d=\"M464 0H144c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h320c26.51 0 48-21.49 48-48v-48h48c26.51 0 48-21.49 48-48V48c0-26.51-21.49-48-48-48zM362 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h42v224c0 26.51 21.49 48 48 48h224v42a6 6 0 0 1-6 6zm96-96H150a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h308a6 6 0 0 1 6 6v308a6 6 0 0 1-6 6z\"></path></svg>`\r\n\r\nvar svgRemove = `<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"trash-alt\" class=\"svg-inline--fa fa-trash-alt fa-w-14\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"currentColor\" d=\"M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z\"></path></svg>`\r\n\r\nexport class NodeToolbar extends RXComponent{\r\n  constructor(){\r\n    super()\r\n    this.cssClass('node-toolbar')\r\n    this.hide()\r\n\r\n    this.duplicateBtn = new SvgButton($t('duplicate'), svgClone, 'click', ()=>{\r\n      if(rxEditor.focusedNode){\r\n        rxEditor.focusedNode.duplicate(event)\r\n      }\r\n    })\r\n\r\n    this.pushChild(new SvgButton($t('focus-parent'), svgArrowUp, 'click' , ()=>{\r\n      if(rxEditor.focusedNode){\r\n        rxEditor.focusedNode.up(event)\r\n      }\r\n    }))\r\n    this.pushChild(new SvgButton($t('move'), svgMove,'mousedown', (event)=>{\r\n        if(rxEditor.focusedNode){\r\n          rxEditor.focusedNode.begindragIcon(event)\r\n        }\r\n      })\r\n      //.cssStyle('cursor', 'move')\r\n    )\r\n    this.editButton = new SvgButton($t('edit'), svgEdit,'mousedown', (event)=>{\r\n      rxEditor.focusedNode.changeToState('editState')\r\n    })\r\n\r\n    this.editButton.domOn('mouseup',(event)=>{\r\n      //move cusor to end\r\n      let el = rxEditor.focusedNode.view.$dom\r\n      let sel = window.getSelection();\r\n      if(el.childNodes.length > 0){\r\n        sel.collapse(el, 1);\r\n      }\r\n      el.focus();      \r\n    })\r\n    this.pushChild(this.editButton)\r\n    this.pushChild(this.duplicateBtn)\r\n    this.pushChild(new SvgButton($t('delete'), svgRemove, 'click', ()=>{\r\n      if(rxEditor.focusedNode){\r\n        rxEditor.focusedNode.delete(event)\r\n      }\r\n    }))\r\n\r\n    document.addEventListener('scroll', (event)=>{\r\n      this.refreshPosition()\r\n    })\r\n    window.addEventListener('resize', (event)=>{\r\n      this.refreshPosition()\r\n    })\r\n  }\r\n\r\n  refreshPosition(){\r\n    this.followElement(this.node)\r\n  }\r\n\r\n  show(node){\r\n    this.node = node\r\n    if(!node || !node.view.$dom) return\r\n    this.followElement(node)\r\n    if(this.node.rule.editable){\r\n      this.editButton.show()\r\n    }\r\n    else{\r\n      this.editButton.hide()\r\n    }\r\n    //if(this.node.forbidDuplicate){\r\n    //  this.duplicateBtn.hide()\r\n    //}\r\n    //else{\r\n    //  this.duplicateBtn.show()\r\n    //}\r\n    return super.show()\r\n  }\r\n\r\n  followElement(node){\r\n    if(!node || !node.view || !node.view.$dom) return\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    let offsetX = this.node.rule.editable ? 0 : 25\r\n    if(this.$dom){\r\n      let x = (rect.x + rect.width - 120)\r\n      x = x < 0 ? 0 : x\r\n      this.$dom.style.left = x + offsetX + 'px'\r\n      if(rect.y < 26){\r\n        this.$dom.style.top = (rect.y + rect.height) + 'px'\r\n      }\r\n      else{\r\n        this.$dom.style.top = (rect.y - 26) + 'px'\r\n      }\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/node-toolbar.js","import {RXComponent} from \"../basic/rxcomponent\"\r\n\r\nexport class RxCursor extends RXComponent{\r\n  constructor(){\r\n    super()\r\n    this.cssClass('rx-cursor')\r\n    this.cssClass('out')\r\n    this.hide()\r\n  }\r\n\r\n  hide(){\r\n    this.position = ''\r\n    this.node = null\r\n    super.hide()\r\n  }\r\n  \r\n  show(position, node){\r\n    this.position = position\r\n    this.node = node\r\n    if(!node || !node.view.$dom) return\r\n    this.classClasses()\r\n    this.cssClass('rx-cursor')\r\n    this.cssClass(position)\r\n    this.node = node\r\n    if(position === 'in-top'){\r\n      this.inTop(node)\r\n    }\r\n\r\n    if(position === 'in-right'){\r\n      this.inRight(node)\r\n    }\r\n\r\n    if(position === 'in-bottom'){\r\n      this.inBottom(node)\r\n    }\r\n\r\n    if(position === 'in-left'){\r\n      this.inLeft(node)\r\n    }\r\n\r\n    if(position === 'out-top'){\r\n      this.outTop(node)\r\n    }\r\n\r\n    if(position === 'out-right'){\r\n      this.outRight(node)\r\n    }\r\n\r\n    if(position === 'out-bottom'){\r\n      this.outBottom(node)\r\n    }\r\n\r\n    if(position === 'out-left'){\r\n      this.outLeft(node)\r\n    }\r\n\r\n    if(position === 'char-left'){\r\n      this.charLeft(node)\r\n    }\r\n\r\n    if(position === 'char-right'){\r\n      this.charRight(node)\r\n    }\r\n\r\n    return super.show()\r\n  }\r\n\r\n  outTop(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = rect.left + 'px'\r\n      this.$dom.style.top = (rect.top - 2) + 'px'\r\n      this.$dom.style.width = rect.width + 'px'\r\n      this.$dom.style.height = '4px'\r\n    }\r\n  }\r\n\r\n  outRight(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = (rect.right -2) + 'px'\r\n      this.$dom.style.right = \"auto\"\r\n      this.$dom.style.top = rect.top + 'px'\r\n      this.$dom.style.width = '4px'\r\n      this.$dom.style.height = rect.height + 'px'\r\n    }\r\n  }\r\n\r\n  outBottom(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = rect.x + 'px'\r\n      this.$dom.style.top = (rect.bottom - 2) + 'px'\r\n      this.$dom.style.bottom = 'auto'\r\n      this.$dom.style.width = rect.width + 'px'\r\n      this.$dom.style.height = '4px'\r\n    }\r\n  }\r\n\r\n  outLeft(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = (rect.left - 2) + 'px'\r\n      this.$dom.style.right = 'auto'\r\n      this.$dom.style.top = rect.top + 'px'\r\n      this.$dom.style.width = '4px'\r\n      this.$dom.style.height = rect.height + 'px'\r\n    }\r\n  }\r\n\r\n  charRight(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = (rect.right -2) + 'px'\r\n      this.$dom.style.right = \"auto\"\r\n      this.$dom.style.top = rect.top + 'px'\r\n      this.$dom.style.width = '4px'\r\n      this.$dom.style.height = rect.height + 'px'\r\n    }\r\n  }\r\n\r\n  charLeft(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = (rect.left - 2) + 'px'\r\n      this.$dom.style.right = 'auto'\r\n      this.$dom.style.top = rect.top + 'px'\r\n      this.$dom.style.width = '4px'\r\n      this.$dom.style.height = rect.height + 'px'\r\n    }\r\n  }\r\n\r\n/**/\r\n  inTop(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = rect.left + 'px'\r\n      this.$dom.style.top = (rect.top + 1) + 'px'\r\n      this.$dom.style.width = rect.width + 'px'\r\n      this.$dom.style.height = '4px'\r\n    }\r\n  }\r\n\r\n  inRight(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = (rect.right -4) + 'px'\r\n      this.$dom.style.right = \"auto\"\r\n      this.$dom.style.top = rect.top + 'px'\r\n      this.$dom.style.width = '4px'\r\n      this.$dom.style.height = rect.height + 'px'\r\n    }\r\n  }\r\n\r\n  inBottom(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = rect.x + 'px'\r\n      this.$dom.style.top = (rect.bottom - 4) + 'px'\r\n      this.$dom.style.bottom = 'auto'\r\n      this.$dom.style.width = rect.width + 'px'\r\n      this.$dom.style.height = '4px'\r\n    }\r\n  }\r\n\r\n  inLeft(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = rect.left + 'px'\r\n      this.$dom.style.right = 'auto'\r\n      this.$dom.style.top = rect.top + 'px'\r\n      this.$dom.style.width = '4px'\r\n      this.$dom.style.height = rect.height + 'px'\r\n    }\r\n  }\r\n\r\n  followElement(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = rect.x + 'px'\r\n      this.$dom.style.top = rect.height/2 + 'px'\r\n      //if(rect.y < 20){\r\n      //  this.$dom.style.top = (rect.y + rect.height) + 'px'\r\n      //}\r\n      //else{\r\n      //  this.$dom.style.top = (rect.y - 15 - offset) + 'px'\r\n      //}\r\n\r\n      this.$dom.style.width = rect.width + 'px'\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/rx-cursor.js","import {RXComponent} from \"../basic/rxcomponent\"\r\n\r\nexport class MouseFollower extends RXComponent{\r\n  constructor(){\r\n    super()\r\n    this.cssClass('mouse-follower')\r\n    this.hide()\r\n  }\r\n\r\n  active(text){\r\n    super.setInnerHTML(text)\r\n    this.isActived = true\r\n  }\r\n\r\n  hide(){\r\n    this.isActived = false\r\n    super.hide()\r\n  }\r\n\r\n  followMouse(event){\r\n    this.$dom.style.left =  event.clientX\r\n    this.$dom.style.top =  event.clientY\r\n    super.show()\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/mouse-follower.js","import {RXComponent} from \"../basic/rxcomponent\"\r\nimport {ObjectState} from \"../basic/object-state\"\r\n\r\nclass EditorState extends ObjectState{\r\n  constructor(){\r\n    super()\r\n    this.__bold = false\r\n    this.__italic = false\r\n    this.__underline = false\r\n    this.__strikeThrough = false\r\n    this.__isLink = false\r\n  }\r\n\r\n  get bold(){\r\n    return this.__bold\r\n  }\r\n\r\n  set bold(bold){\r\n    if(this.__bold == bold){return} \r\n    this.__bold = bold\r\n    this.distributeEvent('bold')\r\n  }\r\n\r\n  get italic(){\r\n    return this.__italic\r\n  }\r\n\r\n  set italic(italic){\r\n    if(this.__italic == italic){return} \r\n    this.__italic = italic\r\n    this.distributeEvent('italic')\r\n  }\r\n\r\n  get underline(){\r\n    return this.__underline\r\n  }\r\n\r\n  set underline(underline){\r\n    if(this.__underline == underline){return} \r\n    this.__underline = underline\r\n    this.distributeEvent('underline')\r\n  }\r\n  get strikeThrough(){\r\n    return this.__strikeThrough\r\n  }\r\n\r\n  set strikeThrough(strikeThrough){\r\n    if(this.__strikeThrough == strikeThrough){return} \r\n    this.__strikeThrough = strikeThrough\r\n    this.distributeEvent('strikeThrough')\r\n  }\r\n\r\n  get isLink(){\r\n    return this.__isLink\r\n  }\r\n\r\n  set isLink(isLink){\r\n    if(this.__isLink == isLink){return} \r\n    this.__isLink = isLink\r\n    this.distributeEvent('isLink')\r\n  }\r\n\r\n}\r\n\r\nclass BarButton extends RXComponent{\r\n  constructor(title, callback){\r\n    super()\r\n    this.cssClass('mini-button')\r\n    this.domAttr('title', title)  \r\n    this.domOn('click', callback)\r\n  }  \r\n}\r\n\r\nconst isLink = () => {\r\n  if (window.getSelection().toString !== '') {\r\n    let selection = window.getSelection()\r\n    selection = selection.rangeCount > 0 ? selection.getRangeAt(0) :''\r\n    if (selection) {\r\n      if (selection.startContainer.parentNode.tagName === 'A'\r\n      || selection.endContainer.parentNode.tagName === 'A') {\r\n        return true\r\n      } else { return false }\r\n    } else { return false }\r\n  }\r\n}\r\n\r\n\r\nexport class MiniEditbar extends RXComponent{\r\n  constructor(){\r\n    super()\r\n    this.cssClass('mini-editbar')\r\n    this.hide()\r\n    this.state = new EditorState\r\n\r\n    this.domOn('mousedown', (event)=>{\r\n      event.preventDefault()\r\n    })\r\n  \r\n    let boldBtn = new BarButton('Bold', ()=>{\r\n        document.execCommand('bold', false, null)\r\n        this.updateButtonsState()\r\n      })\r\n      .cssClass('icon-button')\r\n      .setInnerHTML('<b>B</b>')\r\n\r\n    this.pushChild(boldBtn)\r\n\r\n    let italicBtn = new BarButton('Italic', ()=>{\r\n        document.execCommand('italic', false, null)\r\n        this.state.italic = !this.state.italic\r\n      })\r\n      .cssClass('icon-button')\r\n      .setInnerHTML('<i>I</i>')\r\n    this.pushChild( italicBtn )\r\n\r\n    let underlineBtn = new BarButton('Underline', ()=>{\r\n        document.execCommand('underline', false, null)\r\n        this.updateButtonsState()\r\n      })\r\n      .cssClass('icon-button')\r\n      .setInnerHTML('<u>U</u>')\r\n    this.pushChild( underlineBtn )\r\n\r\n    let strikeBtn = new BarButton('Strike', ()=>{\r\n        document.execCommand('strikeThrough', false, null)\r\n        this.updateButtonsState()\r\n      })\r\n      .cssClass('icon-button')\r\n      .setInnerHTML('<strike>S</strike>')\r\n    this.pushChild( strikeBtn )\r\n\r\n    let linkBtn = new BarButton('Link', ()=>{\r\n        if(this.state.isLink){\r\n          document.execCommand('unlink', false, null)\r\n        }\r\n        else{\r\n          document.execCommand('createLink', false, '#')\r\n        }\r\n        this.updateButtonsState()\r\n      })\r\n      .cssClass('icon-button')\r\n      .setInnerHTML('<div style=\"transform:rotate(45deg)\"></div>')\r\n    this.pushChild( linkBtn )\r\n\r\n    document.onpaste = (event)=>{\r\n      let plainText  =  event.clipboardData.getData('text/plain').replace(/[\\r\\n]/g,\"<br>\")\r\n      document.execCommand('insertHTML', false, plainText)\r\n      return false\r\n    }\r\n\r\n    document.addEventListener('keydown',(event)=>{\r\n      if (event.keyCode === 13) {\r\n        document.execCommand('insertHTML', false, '<br>')\r\n        event.preventDefault()\r\n        return false\r\n      }\r\n    })\r\n\r\n    /*let codeBtn = new BarButton('Switch Code Editor', ()=>{\r\n        this.updateButtonsState()\r\n      })\r\n      .cssClass('icon-button')\r\n      .setInnerHTML('<div\"><></div>')\r\n    this.pushChild( codeBtn )\r\n    let btnInsert = new BarButton('Bootstrap Styles', ()=>{\r\n      })\r\n      .cssClass('mini-styles')\r\n      .setInnerHTML('Insert <span></span>')\r\n    this.pushChild( btnInsert )*/\r\n\r\n    this.watchOne('bold', boldBtn)\r\n    this.watchOne('italic', italicBtn)\r\n    this.watchOne('underline', underlineBtn)\r\n    this.watchOne('strikeThrough', strikeBtn)\r\n    this.watchOne('isLink', linkBtn)    \r\n    document.addEventListener('scroll', (event)=>{\r\n      this.followElement(this.domElement)\r\n    })\r\n    window.addEventListener('resize', (event)=>{\r\n      this.followElement(this.domElement)\r\n    })\r\n  }\r\n\r\n  watchOne(stateName, btn){\r\n    this.state.watch(stateName, ()=>{\r\n      if(this.state[stateName]){\r\n        btn.cssClass('active')\r\n      }\r\n      else{\r\n        btn.removeCssClass('active')\r\n      }\r\n    })\r\n  }\r\n\r\n  show(followElement){\r\n    if(!followElement) return\r\n    this.followElement(followElement)\r\n    this.updateButtonsState()\r\n    document.addEventListener(\"selectionchange\", (event)=>{\r\n      this.updateButtonsState()\r\n    })\r\n    return super.show()\r\n  }\r\n\r\n  hide(){\r\n    document.removeEventListener(\"selectionchange\", (event)=>{\r\n      this.updateButtonsState()\r\n    })\r\n    return super.hide()\r\n  }\r\n\r\n\r\n  updateButtonsState(){\r\n    if(!this.isShow()){\r\n      return\r\n    }\r\n    this.state.bold = document.queryCommandState('bold')\r\n    this.state.italic = document.queryCommandState('italic')\r\n    this.state.underline = document.queryCommandState('underline')\r\n    this.state.strikeThrough = document.queryCommandState('strikeThrough')\r\n    this.state.isLink = isLink()\r\n  }\r\n\r\n  followElement(domElement){\r\n    if(!domElement) return\r\n    this.domElement = domElement\r\n    let rect = domElement.getBoundingClientRect()\r\n    let height = 32\r\n    if(this.$dom){\r\n      this.$dom.style.left = (rect.x -1)  + 'px'\r\n      if(rect.y < height){\r\n        this.$dom.style.top = (rect.y + rect.height) + 'px'\r\n      }\r\n      else{\r\n        this.$dom.style.top = (rect.y - height) + 'px'\r\n      }\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/mini-editbar.js","import {ClassNode} from './nodes/class-node.js'\r\nimport {TagNode} from './nodes/tag-node.js'\r\nimport {TextNode} from './nodes/text-node.js'\r\nimport rules from './rules'\r\nimport commonRule from'./rules/common-rule'\r\n\r\nexport class NodeParser{\r\n  constructor() {\r\n    this.$dom = document.createElement('div')\r\n  }\r\n\r\n  parse(html){\r\n    this.$dom.innerHTML = html\r\n\r\n    //console.log(this.$dom.childNodes)\r\n    let nodes = []\r\n    for(var i = 0; i < this.$dom.childNodes.length; i++){\r\n        let node = this.paraseNode(this.$dom.childNodes[i])\r\n        if(node){\r\n          nodes.push(node)\r\n        }\r\n    }\r\n    return nodes\r\n  }\r\n\r\n  paraseNode(element, parent){\r\n    var node \r\n    if(element.nodeType === 3){\r\n      let text = element.textContent//.trim()\r\n      if(!text){\r\n        return ''\r\n      }\r\n      let node =  new TextNode(text)\r\n      node.parent = parent\r\n      return node \r\n    }\r\n\r\n    //\r\n    if(element.nodeType === 8){\r\n      return ''\r\n    }\r\n\r\n    if(element.classList.contains('container')){\r\n      node = new ClassNode('container')\r\n    }\r\n\r\n    let clssNode = this.parseClassNode(element)\r\n    node = clssNode ? clssNode : this.parseTagNode(element)\r\n\r\n    this.copyClassList(element.classList, node.meta.classList)\r\n    for(var i = 0; i < element.childNodes.length; i++){\r\n      let child = element.childNodes[i]\r\n\r\n      let childNode = this.paraseNode(child, node)\r\n      if(childNode){\r\n        node.children.push(childNode)\r\n      }\r\n    }\r\n\r\n    this.parseAttributes(node, element)\r\n    node.markDefaultMeta()\r\n\r\n    node.parent = parent\r\n\r\n    return node\r\n  }\r\n\r\n  parseAttributes(node, element){\r\n    let attrs = element.attributes;\r\n     for(var i = 0; i < attrs.length; i++){\r\n      let attrName = attrs[i]['nodeName'];\r\n      let attrValue = attrs[i]['nodeValue'];\r\n      if(attrName.toLowerCase() !== \"class\"){\r\n        node.meta.attributes[attrName] = attrValue\r\n      }\r\n    }\r\n  }\r\n\r\n  parseClassNode(element){\r\n    for(var ruleName in rules.classRules){\r\n      let rule = rules.classRules[ruleName]\r\n      rule.classes = rule.classes ? rule.classes : [ruleName]\r\n\r\n      for(var i = 0; i < rule.classes.length; i++){\r\n        let cssClass = rule.classes[i].toLowerCase()\r\n        if(element.classList.contains(cssClass)){\r\n          let node = new ClassNode(cssClass)\r\n          node.meta.tag = element.tagName.toLowerCase()\r\n          node.setLabel(rule.label ? rule.label : ruleName)\r\n          node.ruleName = ruleName\r\n          node.rule = rule\r\n          return node\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  parseTagNode(element){\r\n    var node\r\n    let elTag = element.tagName.toLowerCase()\r\n    for(var ruleName in rules.tagRules){\r\n      let rule = rules.tagRules[ruleName]\r\n      rule.tags = rule.tags ? rule.tags : [ruleName]\r\n      for(var i = 0; i < rule.tags.length; i++){\r\n        let tag = rule.tags[i]\r\n        if(elTag === tag.toLowerCase()){\r\n          node = new TagNode(tag)\r\n          node.setLabel(rule.label ? rule.label : ruleName)\r\n          node.ruleName = ruleName\r\n          node.rule = rule\r\n          return node\r\n        }\r\n      }\r\n    }\r\n    node = new TagNode(elTag)\r\n    node.ruleName = elTag\r\n    node.rule = Object.assign({}, commonRule)\r\n    return node\r\n  }\r\n\r\n  copyClassList(from, to){\r\n    from.forEach(cssClass=>{\r\n      if(cssClass.indexOf('rx-_-') !== 0){\r\n        to.push(cssClass)\r\n      }\r\n    })\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/node-parser.js","import {RXNode} from './rxnode.js'\r\nimport {add, remove} from \"../../basic/rxarray\"\r\n\r\nexport class ClassNode extends RXNode{\r\n  constructor(cssClass) {\r\n    super()\r\n      //add(cssClass, this.meta.classList)\r\n      this.cssClass = cssClass\r\n  }\r\n\r\n\r\n  make(){\r\n    return new ClassNode(this.cssClass)\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/nodes/class-node.js","import {Node} from '../node.js'\r\nimport {add, remove} from \"../../basic/rxarray\"\r\n\r\nexport class CharNode extends Node{\r\n  constructor(char, parent) {\r\n    super()\r\n    this.parent = parent\r\n    this.char = char\r\n    this.isCharNode = true;\r\n    this.rule = {}\r\n    this.rule.acceptedChildren = []\r\n    this.rule.editMarginStyle = {}\r\n    this.rule.dropInMargin = 5;\r\n  }\r\n\r\n  make(){\r\n    return new CharNode\r\n  }\r\n\r\n  changeTextnodeToCharNode(){\r\n  }\r\n\r\n  toViewModel(){\r\n    return {\r\n      styles:{},\r\n      classList:['char-node'],\r\n      attributes:{},\r\n      innerHTML : this.char,\r\n      tag:'span',\r\n      on:{\r\n        onmousemove:this.mousemove,\r\n        onmouseover:this.mouseover,\r\n        onmouseout:this.mouseout,\r\n        //onclick:this.onclick,\r\n      }\r\n    }\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/nodes/char-node.js","import {RXNode} from './rxnode.js'\r\n\r\nexport class TagNode extends RXNode{\r\n  constructor(tag) {\r\n    super()\r\n    this.meta.tag = tag\r\n    this.label = tag\r\n    this.labelToCapitalize()\r\n\t}\r\n\r\n  make(){\r\n  \tlet node = new TagNode(this.meta.tag)\r\n  \tnode.label = this.label\r\n  \treturn node\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/nodes/tag-node.js","import container from \"./container\"\r\nimport row from \"./row\"\r\nimport col from \"./col\"\r\nimport heading from \"./heading\"\r\nimport commonRule from \"./common-rule\"\r\n\r\n//ruleName:\r\n// -container\r\n// -row\r\n// -col\r\n// -heading\r\n\r\n//token \r\n//Labellabel\r\n//- label:''\r\n//\r\n//- acceptedChildren : '',\r\n//\r\n//- rejectChildren : '',\r\n//\r\n//  '--responsive--'  '','-sm', '-md', '-lg', '-xl'\r\n//classes ID\r\n//tags tagID\r\n\r\nexport default{\r\n  classRules : {\r\n    \"container\": container,\r\n    \"row\": row,\r\n    \"col\": col,\r\n    \"w-100\": Object.assign({}, commonRule),\r\n    \"alert\" : Object.assign({}, commonRule),\r\n  },\r\n\r\n  tagRules : {\r\n    heading: heading\r\n  },\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/rules/index.js","export default {\r\n  dropInMargin : 10,\r\n  editable: false,\r\n  editMarginStyle : {\r\n    paddingX:'30px',\r\n    paddingY:'30px',\r\n  },\r\n  //\r\n  empertyMargin:true,\r\n\r\n  rejectChildren : ['col','thead', 'tbody', \r\n                           'th', 'tr', 'td']\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/rules/container.js","export default{\r\n  dropInMargin : 10,\r\n  editable: false,\r\n  editMarginStyle : {\r\n    paddingX:'20px',\r\n    paddingY:'20px',\r\n  },\r\n  //\r\n  empertyMargin:true,\r\n  acceptChildren : ['col','w-100']\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/rules/row.js","export default{\r\n  label:'column',\r\n  dropInMargin : 10,\r\n  editable: true,\r\n  editMarginStyle : {\r\n    paddingX:'20px',\r\n    paddingY:'20px',\r\n  },\r\n  //\r\n  empertyMargin:true,\r\n  classes:[\r\n    'col', \r\n    'col-1','col-2','col-3', 'col-4', 'col-5', 'col-6', \r\n    'col-7', 'col-8','col-9','col-10','col-11','col-12',\r\n    'col-sm', \r\n    'col-sm-1','col-sm-2','col-sm-3', 'col-sm-4', 'col-sm-5', 'col-sm-6', \r\n    'col-sm-7', 'col-sm-8','col-sm-9','col-sm-10','col-sm-11','col-sm-12',\r\n    'col-md', \r\n    'col-md-1','col-md-2','col-md-3', 'col-md-4', 'col-md-5', 'col-md-6', \r\n    'col-md-7', 'col-md-8','col-md-9','col-md-10','col-md-11','col-md-12',\r\n    'col-lg', \r\n    'col-lg-1','col-lg-2','col-lg-3', 'col-lg-4', 'col-lg-5', 'col-lg-6', \r\n    'col-lg-7', 'col-lg-8','col-lg-9','col-lg-10','col-lg-11','col-lg-12',\r\n    'col-xl', \r\n    'col-xl-1','col-xl-2','col-xl-3', 'col-xl-4', 'col-xl-5', 'col-xl-6', \r\n    'col-xl-7', 'col-xl-8','col-xl-9','col-xl-10','col-xl-11','col-xl-12',\r\n  ],\r\n  rejectChildren : ['col','thead', 'tbody', \r\n                           'th', 'tr', 'td']\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/rules/col.js","export default{\r\n  label:\"Heading\",\r\n  tags:['h1', 'h2', 'h3', 'h4', 'h5', 'h6'],\r\n  editable: true,\r\n  editMarginStyle : {\r\n    paddingX:'5px',\r\n    paddingY:'5px',\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/rules/heading.js","import {add, contains, remove, insertBefore} from \"./rxarray\"\r\n\r\nexport class RXComponent{\r\n  constructor(elementName = 'div'){\r\n    this.children = []\r\n    this.classList = []\r\n    this.style = {}\r\n    this.attrs = {}\r\n    this.domOns = {}\r\n    this.elementName = elementName\r\n  }\r\n\r\n  on(eventName, callback){\r\n    this[eventName] = callback\r\n    return this\r\n  }\r\n\r\n  off(eventName){\r\n    delete this[eventName]\r\n    return this\r\n  }\r\n\r\n  domOn(name, callback){\r\n    if(this.$dom){\r\n      this.$dom.addEventListener(name, callback)\r\n    }\r\n    this.domOns[name] = callback\r\n    return this\r\n  }\r\n\r\n  domOff(name, callback){\r\n    if(this.$dom){\r\n      this.$dom.removeEventListener(name, callback)\r\n    }\r\n    delete this.domOns[name]\r\n    return this\r\n  }\r\n\r\n  pushChild(child){\r\n    this.children.push(child)\r\n    return this\r\n  }\r\n\r\n  unshiftChild(child){\r\n    this.children.unshift(child)\r\n    return this\r\n  }\r\n\r\n  cssClass(className){\r\n    add(className, this.classList)\r\n    if(this.$dom){\r\n      this.$dom.classList.add(className)\r\n    }\r\n    return this\r\n  }\r\n\r\n  removeCssClass(className){\r\n    if(contains(className, this.classList)){\r\n     remove(className, this.classList)\r\n      if(this.$dom && this.$dom.classList.contains(className)){\r\n        this.$dom.classList.remove(className)\r\n      }\r\n    }\r\n    return this\r\n  }\r\n\r\n  cssStyle(name, value){\r\n    this.style[name] = value\r\n    return this\r\n  }\r\n\r\n  removeCssStyle(name){\r\n    delete this.style[name]\r\n  }\r\n\r\n  domAttr(name, value){\r\n    this.attrs[name] = value\r\n    return this\r\n  }\r\n\r\n  removeDomAttr(name){\r\n    delete this.attrs[name]\r\n    return this\r\n  }\r\n\r\n  tongle(cssClass){\r\n    if(contains(cssClass, this.classList)){\r\n     remove(cssClass, this.classList)\r\n      if(this.$dom){\r\n        remove(cssClass, this.$dom.classList)\r\n      }\r\n    }\r\n    else{\r\n     add(cssClass, this.classList)\r\n      if(this.$dom){\r\n        add(cssClass, this.$dom.classList)\r\n      }\r\n    }\r\n  }\r\n  //setInnerHTML(innerHTML){\r\n  //  this.innerHTML = innerHTML\r\n  //  return this\r\n  //}\r\n\r\n  render(parentElement){\r\n    this.$dom =  document.createElement(this.elementName)\r\n    parentElement.appendChild(this.$dom)\r\n\r\n    if(this.innerHTML){\r\n      this.$dom.innerHTML = this.innerHTML\r\n    }\r\n\r\n    for(var styleName in this.style){\r\n      this.$dom.style[styleName] = this.style[styleName]\r\n    }\r\n\r\n    this.classList.forEach((className)=>{\r\n      this.$dom.classList.add(className)\r\n    })\r\n\r\n    for(var attrName in this.attrs){\r\n      this.$dom[attrName] = this.attrs[attrName]\r\n    }\r\n\r\n    for(var eventName in this.domOns){\r\n      this.$dom.addEventListener(eventName, this.domOns[eventName])\r\n    }\r\n\r\n    this.children.forEach((child)=>{\r\n      child.render(this.$dom)\r\n    })\r\n    return this\r\n  }\r\n\r\n  refresh(){\r\n    if(this.$dom){\r\n      let parentDomElement = this.$dom.parentNode\r\n      this.destory()\r\n      this.render(parentDomElement)\r\n    }\r\n  }\r\n\r\n  setInnerHTML(innerHTML){\r\n    this.innerHTML = innerHTML\r\n    if(this.$dom){\r\n      this.$dom.innerHTML = innerHTML\r\n    }\r\n    return this\r\n  }\r\n\r\n  destory(){\r\n    this.$dom.parentNode.removeChild(this.$dom)\r\n    this.$dom = ''\r\n  }\r\n\r\n  removeChild(node){\r\n    remove(node, this.children)\r\n    if(this.$dom && node.$dom && this.$dom.contains(node.$dom)){\r\n      this.$dom.removeChild(node.$dom)\r\n    }\r\n  }\r\n\r\n  clearChild(){\r\n    this.children = new RXArray()\r\n  }\r\n\r\n  classClasses(){\r\n    let dom = this.$dom\r\n    if(dom){\r\n      this.classList.forEach(cssClass=>{\r\n        //console.log(cssClass)\r\n        dom.classList.remove(cssClass)\r\n      })\r\n    }\r\n    this.classList.length = 0\r\n  }\r\n\r\n  show(){\r\n    this.style.display = 'flex'\r\n    if(this.$dom){\r\n      this.$dom.style.display = 'flex'\r\n    }\r\n    return this\r\n  }\r\n\r\n  isShow(){\r\n    return this.style.display !== 'none'\r\n  }\r\n\r\n  hide(){\r\n    this.style.display = 'none'\r\n    if(this.$dom){\r\n      this.$dom.style.display = 'none'\r\n    }\r\n    return this\r\n  }\r\n\r\n\r\n  insertBefore(child, refence){\r\n    insertBefore(child, refence, this.children)\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/basic/rxcomponent.js","export function first(array){\r\n  if(array.length > 0){\r\n    return array[0]\r\n  }\r\n}\r\n\r\nexport function last(array){\r\n  if(array.length > 0){\r\n    return array[array.length - 1]\r\n  }\r\n}\r\n\r\nexport function before(refence, array){\r\n  for(var i = 0; i < array.length; i++){\r\n    if(array[i] === refence && i > 0){\r\n      return array[i - 1];\r\n    }\r\n  }\r\n}\r\n\r\nexport function after(refence, array){\r\n  for(var i = 0; i < array.length; i++){\r\n    if(array[i] === refence && i < array.length){\r\n      return array[i + 1];\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport function insertBefore(child, refence, array){\r\n  for(var i = 0; i < array.length; i++){\r\n    if(array[i] === refence){\r\n      array.splice(i, 0, child)\r\n      return;\r\n    }\r\n  }\r\n\r\n  array.push(child)\r\n}\r\n\r\nexport function insertAfter(child, refence, array){\r\n  for(var i = 0; i < array.length; i++){\r\n    if(array[i] === refence){\r\n      array.splice(i + 1, 0, child)\r\n      return\r\n    }\r\n  }\r\n}\r\n\r\nexport function remove(node, array){\r\n  for (var i = 0; i < array.length; i++) {\r\n    if(array[i] === node){\r\n      array.splice(i, 1)\r\n      break\r\n    }\r\n  }\r\n}\r\n\r\nexport function add(node, array){\r\n  if(!contains(node, array)){\r\n    array.push(node)\r\n  }\r\n}\r\n\r\nexport function contains(node, array){\r\n  for (var i = 0; i < array.length; i++) {\r\n    if(array[i] === node){\r\n      return true\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nexport function tongleOnCondition(condition, node, array){\r\n  if(condition){\r\n    add(node, array)\r\n  }\r\n  else{\r\n    remove(node, array)\r\n  }\r\n}\r\n\r\nexport function clear(array){\r\n  array.length = 0\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/basic/rxarray.js"],"sourceRoot":""}